"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[753],{14753:function(e,t,i){i.d(t,{b:function(){return A}});var r=i(83065),s=i(2128),n=i(69717),a=i.n(n),o=i(7653),c=i(33546),l=i(54972),d=i(53730),u=i(75717),x=i(94293),p=i(80217),m=i(17645),b=i(63116),h=i(34712),v=i(16660),f=i(21354),g=i(41889),y=i(631),w=i(78704),j=i(99710),N=i(15485),k=i(37455),Z=i(50168),P=i(27573);function T(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function O(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?T(Object(i),!0).forEach((function(t){(0,s.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):T(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var S=[{id:"service",stepTitle:"Service Requirement",stepIcon:d.Z,questionText:"What is the primary service you require?",type:"multiple-choice",options:[{id:"protection",text:"Personal Protection",subtext:"High-security for an individual or group.",icon:u.Z},{id:"executive",text:"Executive Transport",subtext:"Professional travel for business needs.",icon:x.Z},{id:"airport",text:"Airport Transfer",subtext:"Secure and reliable airport transportation.",icon:p.Z},{id:"event",text:"Event Security",subtext:"Transport for weddings or special occasions.",icon:m.Z}]},{id:"principalProfile",stepTitle:"Principal Profile (People)",stepIcon:b.Z,questionText:"What is the public profile of the person requiring protection?",type:"multiple-choice",options:[{id:"private",text:"Private Individual",subtext:"Low public visibility, personal travel.",icon:h.Z},{id:"corporate",text:"Corporate Executive",subtext:"C-suite, board member, business figure.",icon:x.Z},{id:"publicFigure",text:"Public Figure",subtext:"Celebrity, politician, artist, or media personality.",icon:v.Z},{id:"other",text:"Other / Prefer Not to Say",subtext:"For sensitive or unique situations.",icon:u.Z}]},{id:"locations",stepTitle:"Journey Details (Places)",stepIcon:f.Z,questionText:"Describe the primary locations for this journey.",type:"multiple-choice",options:[{id:"routine",text:"Routine & Familiar",subtext:"e.g., Home to office, known routes.",icon:f.Z},{id:"varied",text:"Varied Public Venues",subtext:"e.g., Hotels, restaurants, event spaces.",icon:g.Z},{id:"highRisk",text:"High-Risk / Unfamiliar",subtext:"e.g., Overseas, high-crime areas, sensitive meetings.",icon:u.Z},{id:"secure",text:"Secure / Private",subtext:"e.g., FBOs, private residences, secure compounds.",icon:y.Z}]},{id:"threatHistory",stepTitle:"Threat History (History)",stepIcon:w.Z,questionText:"Has the principal ever received specific threats?",type:"multiple-choice",options:[{id:"none",text:"No Known Threats",subtext:"No history of direct or indirect threats.",icon:y.Z},{id:"unwanted",text:"Unwanted Attention",subtext:"e.g., Paparazzi, stalkers, online harassment.",icon:h.Z},{id:"indirect",text:"Indirect / Vague Threats",subtext:"Non-specific threats have been made.",icon:d.Z},{id:"direct",text:"Yes, Direct Threats",subtext:"A credible, specific threat has been identified.",icon:u.Z}]},{id:"perceivedRisk",stepTitle:"Perceived Risk Level",stepIcon:j.Z,questionText:"What is your perceived level of risk for this task?",type:"multiple-choice",options:[{id:"low",text:"Low",subtext:"An attack is unlikely. General awareness needed.",icon:j.Z},{id:"moderate",text:"Moderate",subtext:"An attack is possible. Precautionary measures required.",icon:j.Z},{id:"substantial",text:"Substantial",subtext:"An attack is a strong possibility. Heightened security required.",icon:j.Z},{id:"severe",text:"Severe / Critical",subtext:"An attack is highly likely or expected.",icon:j.Z}]}];function A(){var e=(0,o.useState)(0),t=e[0],i=e[1],n=(0,o.useState)({}),d=n[0],x=n[1],p=(0,o.useState)(!1),m=p[0],b=p[1],h=(0,o.useState)(!1),v=h[0],f=h[1],g=(0,o.useState)("idle"),w=g[0],j=g[1],T=(0,Z.a)().user,A=function(){var e=(0,r.Z)(a().mark((function e(t){var i,r,s,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T){e.next=3;break}return j("error"),e.abrupt("return");case 3:return f(!0),j("idle"),e.prev=5,i=C(),r={user_id:T.id,answers:t,threat_level:i.level,risk_score:q(t),recommendations:i.advice,status:"completed"},e.next=10,k.db.createAssessment(r);case 10:if(s=e.sent,s.data,!(n=s.error)){e.next=15;break}throw n;case 15:j("success"),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(5),j("error");case 22:return e.prev=22,f(!1),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[5,18,22,25]])})));return function(t){return e.apply(this,arguments)}}(),q=function(e){var t={private:1,corporate:2,publicFigure:4,other:3},i={routine:1,varied:2,highRisk:4,secure:1},r={none:1,unwanted:2,indirect:3,direct:4},s={low:1,moderate:2,substantial:3,severe:4},n=0;return n+={protection:4,executive:2,airport:1,event:2}[e.service]||0,n+=t[e.principalProfile]||0,n+=i[e.locations]||0,n+=r[e.threatHistory]||0,n+=2*(s[e.perceivedRisk]||0)},C=function(){var e={private:1,corporate:2,publicFigure:4,other:3},t={routine:1,varied:2,highRisk:4,secure:1},i={none:1,unwanted:2,indirect:3,direct:4},r={low:1,moderate:2,substantial:3,severe:4},s=0;return s+={protection:4,executive:2,airport:1,event:2}[d.service]||0,s+=e[d.principalProfile]||0,s+=t[d.locations]||0,s+=i[d.threatHistory]||0,(s+=2*(r[d.perceivedRisk]||0))>=16?{level:"Severe / Critical",color:"text-red-500",advice:"Requires immediate, comprehensive security planning. A specialist will contact you urgently."}:s>=12?{level:"Substantial",color:"text-orange-500",advice:"Requires a dedicated security detail and threat mitigation plan."}:s>=7?{level:"Moderate",color:"text-yellow-500",advice:"A professional security driver and vehicle is strongly recommended."}:{level:"Low",color:"text-green-500",advice:"A professional security driver provides peace of mind and enhanced safety."}},R=S[t],H=t/(S.length-1)*100;if(m){var I=C();return(0,P.jsxs)("div",{className:"bg-gradient-to-br from-gray-900 via-blue-900 to-black p-8 sm:p-10 lg:p-12 rounded-2xl border border-yellow-500/30 w-full max-w-3xl mx-auto shadow-2xl text-center",children:[(0,P.jsx)("h2",{className:"text-3xl font-bold text-white mb-4",children:"Assessment Complete"}),(0,P.jsx)("p",{className:"text-gray-300 mb-6",children:"Thank you for providing this information. Here is our preliminary assessment:"}),v&&(0,P.jsx)("div",{className:"bg-blue-900/50 p-4 rounded-xl border border-blue-500 mb-6",children:(0,P.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,P.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-yellow-500"}),(0,P.jsx)("span",{className:"text-blue-300",children:"Saving your assessment..."})]})}),"success"===w&&(0,P.jsx)("div",{className:"bg-green-900/50 p-4 rounded-xl border border-green-500 mb-6",children:(0,P.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,P.jsx)(y.Z,{className:"w-5 h-5 text-green-400"}),(0,P.jsx)("span",{className:"text-green-300",children:"Assessment saved successfully!"})]})}),"error"===w&&(0,P.jsx)("div",{className:"bg-red-900/50 p-4 rounded-xl border border-red-500 mb-6",children:(0,P.jsx)("div",{className:"flex items-center justify-center space-x-2",children:(0,P.jsx)("span",{className:"text-red-300",children:"Failed to save assessment. Please try again."})})}),(0,P.jsxs)("div",{className:"bg-black/50 p-6 rounded-xl border border-gray-700 mb-8",children:[(0,P.jsx)("p",{className:"text-lg text-gray-400 mb-2",children:"Initial Threat Assessment"}),(0,P.jsx)("p",{className:"text-4xl font-extrabold ".concat(I.color),children:I.level})]}),(0,P.jsxs)("div",{className:"bg-black/50 p-6 rounded-xl border border-gray-700 mb-8",children:[(0,P.jsx)("p",{className:"text-lg text-gray-400 mb-2",children:"Recommended Action"}),(0,P.jsx)("p",{className:"text-white text-lg",children:I.advice})]}),(0,P.jsx)("p",{className:"text-gray-400 mb-6 text-sm",children:"A member of our senior security team will contact you within 24 hours to conduct a confidential consultation and provide a detailed operational plan and quote."}),(0,P.jsx)("button",{onClick:function(){b(!1),i(0),x({}),j("idle")},className:"w-full bg-yellow-500 text-black font-bold py-3 px-6 rounded-lg hover:bg-yellow-400 transition-colors",children:"Start New Assessment"})]})}return(0,P.jsx)("div",{className:"bg-gradient-to-br from-gray-900 via-blue-900 to-black p-6 sm:p-8 lg:p-10 rounded-2xl border border-yellow-500/30 w-full max-w-5xl mx-auto shadow-2xl relative overflow-hidden",children:(0,P.jsxs)("div",{className:"relative z-10",children:[(0,P.jsxs)("div",{className:"text-center mb-8",children:[(0,P.jsxs)("div",{className:"inline-flex items-center justify-center space-x-3 bg-black/50 px-4 py-2 rounded-full mb-4",children:[(0,P.jsx)(u.Z,{className:"w-6 h-6 text-yellow-500"}),(0,P.jsx)("h1",{className:"text-xl sm:text-2xl font-bold text-white",children:"SIA-Compliant Security Assessment"})]}),(0,P.jsx)("p",{className:"text-gray-400 text-sm sm:text-base",children:'This confidential assessment helps us understand your needs, aligning with "Know Your Client" best practices.'})]}),(0,P.jsxs)("div",{className:"mb-8",children:[(0,P.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,P.jsxs)("div",{className:"flex items-center gap-2",children:[(0,P.jsx)(R.stepIcon,{className:"w-5 h-5 text-yellow-500"}),(0,P.jsx)("span",{className:"text-white font-semibold",children:R.stepTitle})]}),(0,P.jsxs)("span",{className:"text-xs text-gray-400",children:["Step ",t+1," of ",S.length]})]}),(0,P.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-2",children:(0,P.jsx)(c.E.div,{className:"bg-yellow-500 h-2 rounded-full",initial:{width:0},animate:{width:"".concat(H,"%")},transition:{duration:.5,ease:"easeInOut"}})})]}),(0,P.jsx)("div",{className:"min-h-[280px]",children:(0,P.jsx)(l.M,{mode:"wait",children:(0,P.jsxs)(c.E.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3},children:[(0,P.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-center text-white mb-6",children:R.questionText}),(0,P.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:R.options.map((function(e){return(0,P.jsxs)("button",{onClick:function(){return function(e,r){var n=O(O({},d),{},(0,s.Z)({},e,r));x(n),setTimeout((function(){t<S.length-1?i(t+1):(b(!0),A(n))}),300)}(R.id,e.id)},className:"group p-4 border-2 rounded-xl transition-all duration-200 text-left flex items-center gap-4 border-gray-700 bg-gray-800/50 hover:border-yellow-500 hover:bg-gray-800",children:[(0,P.jsx)("div",{className:"w-10 h-10 bg-gray-700 rounded-lg flex items-center justify-center group-hover:bg-yellow-500 transition-colors",children:(0,P.jsx)(e.icon,{className:"w-5 h-5 text-yellow-500 group-hover:text-black transition-colors"})}),(0,P.jsxs)("div",{children:[(0,P.jsx)("h3",{className:"font-semibold text-white",children:e.text}),e.subtext&&(0,P.jsx)("p",{className:"text-sm text-gray-400",children:e.subtext})]})]},e.id)}))})]},t)})}),(0,P.jsx)("div",{className:"flex justify-between items-center mt-8",children:(0,P.jsxs)("button",{onClick:function(){t>0&&i(t-1)},disabled:0===t,className:"flex items-center gap-2 px-4 py-2 bg-gray-700 text-white rounded-lg disabled:opacity-50 transition-colors hover:bg-gray-600",children:[(0,P.jsx)(N.Z,{className:"w-4 h-4"}),(0,P.jsx)("span",{children:"Back"})]})})]})})}}}]);