exports.id=17,exports.ids=[17],exports.modules={2629:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.hkdf=void 0;let u=s(1620);function normalizeDigest(t){switch(t){case"sha256":case"sha384":case"sha512":case"sha1":return t;default:throw TypeError('unsupported "digest" value')}}function normalizeUint8Array(t,r){if("string"==typeof t)return new TextEncoder().encode(t);if(!(t instanceof Uint8Array))throw TypeError(`"${r}"" must be an instance of Uint8Array or a string`);return t}function normalizeIkm(t){let r=normalizeUint8Array(t,"ikm");if(!r.byteLength)throw TypeError('"ikm" must be at least one byte in length');return r}function normalizeInfo(t){let r=normalizeUint8Array(t,"info");if(r.byteLength>1024)throw TypeError('"info" must not contain more than 1024 bytes');return r}function normalizeKeylen(t,r){if("number"!=typeof t||!Number.isInteger(t)||t<1)throw TypeError('"keylen" must be a positive integer');let s=parseInt(r.substr(3),10)>>3||20;if(t>255*s)throw TypeError('"keylen" too large');return t}async function hkdf(t,r,s,p,h){return(0,u.default)(normalizeDigest(t),normalizeIkm(r),normalizeUint8Array(s,"salt"),normalizeInfo(p),normalizeKeylen(h,t))}r.hkdf=hkdf,r.default=hkdf},7046:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let u=s(6113);r.default=(t,r,s,p,h)=>{let E=parseInt(t.substr(3),10)>>3||20,W=(0,u.createHmac)(t,s.byteLength?s:new Uint8Array(E)).update(r).digest(),J=Math.ceil(h/E),R=new Uint8Array(E*J+p.byteLength+1),K=0,U=0;for(let r=1;r<=J;r++)R.set(p,U),R[U+p.byteLength]=r,R.set((0,u.createHmac)(t,W).update(R.subarray(K,U+p.byteLength+1)).digest(),U),K=U,U+=E;return R.slice(0,h)}},1620:(t,r,s)=>{"use strict";let u;Object.defineProperty(r,"__esModule",{value:!0});let p=s(6113),h=s(7046);"function"!=typeof p.hkdf||process.versions.electron||(u=async(...t)=>new Promise((r,s)=>{p.hkdf(...t,(t,u)=>{t?s(t):r(new Uint8Array(u))})})),r.default=async(t,r,s,p,E)=>(u||h.default)(t,r,s,p,E)},3464:(t,r)=>{"use strict";/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */r.parse=parse,r.serialize=serialize;var s=Object.prototype.toString,u=Object.prototype.hasOwnProperty,p=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/,h=/^("?)[\u0021\u0023-\u002B\u002D-\u003A\u003C-\u005B\u005D-\u007E]*\1$/,E=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,W=/^[\u0020-\u003A\u003D-\u007E]*$/;function parse(t,r){if("string"!=typeof t)throw TypeError("argument str must be a string");var s={},p=t.length;if(p<2)return s;var h=r&&r.decode||decode,E=0,W=0,J=0;do{if(-1===(W=t.indexOf("=",E)))break;if(-1===(J=t.indexOf(";",E)))J=p;else if(W>J){E=t.lastIndexOf(";",W-1)+1;continue}var R=startIndex(t,E,W),K=endIndex(t,W,R),U=t.slice(R,K);if(!u.call(s,U)){var D=startIndex(t,W+1,J),G=endIndex(t,J,D);34===t.charCodeAt(D)&&34===t.charCodeAt(G-1)&&(D++,G--);var Y=t.slice(D,G);s[U]=tryDecode(Y,h)}E=J+1}while(E<p);return s}function startIndex(t,r,s){do{var u=t.charCodeAt(r);if(32!==u&&9!==u)return r}while(++r<s);return s}function endIndex(t,r,s){for(;r>s;){var u=t.charCodeAt(--r);if(32!==u&&9!==u)return r+1}return s}function serialize(t,r,s){var u=s&&s.encode||encodeURIComponent;if("function"!=typeof u)throw TypeError("option encode is invalid");if(!p.test(t))throw TypeError("argument name is invalid");var J=u(r);if(!h.test(J))throw TypeError("argument val is invalid");var R=t+"="+J;if(!s)return R;if(null!=s.maxAge){var K=Math.floor(s.maxAge);if(!isFinite(K))throw TypeError("option maxAge is invalid");R+="; Max-Age="+K}if(s.domain){if(!E.test(s.domain))throw TypeError("option domain is invalid");R+="; Domain="+s.domain}if(s.path){if(!W.test(s.path))throw TypeError("option path is invalid");R+="; Path="+s.path}if(s.expires){var U=s.expires;if(!isDate(U)||isNaN(U.valueOf()))throw TypeError("option expires is invalid");R+="; Expires="+U.toUTCString()}if(s.httpOnly&&(R+="; HttpOnly"),s.secure&&(R+="; Secure"),s.partitioned&&(R+="; Partitioned"),s.priority)switch("string"==typeof s.priority?s.priority.toLowerCase():s.priority){case"low":R+="; Priority=Low";break;case"medium":R+="; Priority=Medium";break;case"high":R+="; Priority=High";break;default:throw TypeError("option priority is invalid")}if(s.sameSite)switch("string"==typeof s.sameSite?s.sameSite.toLowerCase():s.sameSite){case!0:case"strict":R+="; SameSite=Strict";break;case"lax":R+="; SameSite=Lax";break;case"none":R+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return R}function decode(t){return -1!==t.indexOf("%")?decodeURIComponent(t):t}function isDate(t){return"[object Date]"===s.call(t)}function tryDecode(t,r){try{return r(t)}catch(r){return t}}},8541:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.cryptoRuntime=r.base64url=r.generateSecret=r.generateKeyPair=r.errors=r.decodeJwt=r.decodeProtectedHeader=r.importJWK=r.importX509=r.importPKCS8=r.importSPKI=r.exportJWK=r.exportSPKI=r.exportPKCS8=r.UnsecuredJWT=r.createRemoteJWKSet=r.createLocalJWKSet=r.EmbeddedJWK=r.calculateJwkThumbprintUri=r.calculateJwkThumbprint=r.EncryptJWT=r.SignJWT=r.GeneralSign=r.FlattenedSign=r.CompactSign=r.FlattenedEncrypt=r.CompactEncrypt=r.jwtDecrypt=r.jwtVerify=r.generalVerify=r.flattenedVerify=r.compactVerify=r.GeneralEncrypt=r.generalDecrypt=r.flattenedDecrypt=r.compactDecrypt=void 0;var u=s(3745);Object.defineProperty(r,"compactDecrypt",{enumerable:!0,get:function(){return u.compactDecrypt}});var p=s(4151);Object.defineProperty(r,"flattenedDecrypt",{enumerable:!0,get:function(){return p.flattenedDecrypt}});var h=s(7645);Object.defineProperty(r,"generalDecrypt",{enumerable:!0,get:function(){return h.generalDecrypt}});var E=s(5310);Object.defineProperty(r,"GeneralEncrypt",{enumerable:!0,get:function(){return E.GeneralEncrypt}});var W=s(8902);Object.defineProperty(r,"compactVerify",{enumerable:!0,get:function(){return W.compactVerify}});var J=s(1976);Object.defineProperty(r,"flattenedVerify",{enumerable:!0,get:function(){return J.flattenedVerify}});var R=s(7682);Object.defineProperty(r,"generalVerify",{enumerable:!0,get:function(){return R.generalVerify}});var K=s(8302);Object.defineProperty(r,"jwtVerify",{enumerable:!0,get:function(){return K.jwtVerify}});var U=s(6422);Object.defineProperty(r,"jwtDecrypt",{enumerable:!0,get:function(){return U.jwtDecrypt}});var D=s(2886);Object.defineProperty(r,"CompactEncrypt",{enumerable:!0,get:function(){return D.CompactEncrypt}});var G=s(9392);Object.defineProperty(r,"FlattenedEncrypt",{enumerable:!0,get:function(){return G.FlattenedEncrypt}});var Y=s(7851);Object.defineProperty(r,"CompactSign",{enumerable:!0,get:function(){return Y.CompactSign}});var X=s(713);Object.defineProperty(r,"FlattenedSign",{enumerable:!0,get:function(){return X.FlattenedSign}});var Z=s(711);Object.defineProperty(r,"GeneralSign",{enumerable:!0,get:function(){return Z.GeneralSign}});var Q=s(2402);Object.defineProperty(r,"SignJWT",{enumerable:!0,get:function(){return Q.SignJWT}});var ee=s(5112);Object.defineProperty(r,"EncryptJWT",{enumerable:!0,get:function(){return ee.EncryptJWT}});var et=s(4322);Object.defineProperty(r,"calculateJwkThumbprint",{enumerable:!0,get:function(){return et.calculateJwkThumbprint}}),Object.defineProperty(r,"calculateJwkThumbprintUri",{enumerable:!0,get:function(){return et.calculateJwkThumbprintUri}});var er=s(5344);Object.defineProperty(r,"EmbeddedJWK",{enumerable:!0,get:function(){return er.EmbeddedJWK}});var en=s(7674);Object.defineProperty(r,"createLocalJWKSet",{enumerable:!0,get:function(){return en.createLocalJWKSet}});var ei=s(4607);Object.defineProperty(r,"createRemoteJWKSet",{enumerable:!0,get:function(){return ei.createRemoteJWKSet}});var eo=s(7593);Object.defineProperty(r,"UnsecuredJWT",{enumerable:!0,get:function(){return eo.UnsecuredJWT}});var ea=s(6256);Object.defineProperty(r,"exportPKCS8",{enumerable:!0,get:function(){return ea.exportPKCS8}}),Object.defineProperty(r,"exportSPKI",{enumerable:!0,get:function(){return ea.exportSPKI}}),Object.defineProperty(r,"exportJWK",{enumerable:!0,get:function(){return ea.exportJWK}});var es=s(7622);Object.defineProperty(r,"importSPKI",{enumerable:!0,get:function(){return es.importSPKI}}),Object.defineProperty(r,"importPKCS8",{enumerable:!0,get:function(){return es.importPKCS8}}),Object.defineProperty(r,"importX509",{enumerable:!0,get:function(){return es.importX509}}),Object.defineProperty(r,"importJWK",{enumerable:!0,get:function(){return es.importJWK}});var el=s(9276);Object.defineProperty(r,"decodeProtectedHeader",{enumerable:!0,get:function(){return el.decodeProtectedHeader}});var ec=s(9e3);Object.defineProperty(r,"decodeJwt",{enumerable:!0,get:function(){return ec.decodeJwt}}),r.errors=s(3872);var eu=s(5811);Object.defineProperty(r,"generateKeyPair",{enumerable:!0,get:function(){return eu.generateKeyPair}});var ed=s(3734);Object.defineProperty(r,"generateSecret",{enumerable:!0,get:function(){return ed.generateSecret}}),r.base64url=s(5771);var ep=s(3604);Object.defineProperty(r,"cryptoRuntime",{enumerable:!0,get:function(){return ep.default}})},3745:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.compactDecrypt=void 0;let u=s(4151),p=s(3872),h=s(6239);async function compactDecrypt(t,r,s){if(t instanceof Uint8Array&&(t=h.decoder.decode(t)),"string"!=typeof t)throw new p.JWEInvalid("Compact JWE must be a string or Uint8Array");let{0:E,1:W,2:J,3:R,4:K,length:U}=t.split(".");if(5!==U)throw new p.JWEInvalid("Invalid Compact JWE");let D=await (0,u.flattenedDecrypt)({ciphertext:R,iv:J||void 0,protected:E||void 0,tag:K||void 0,encrypted_key:W||void 0},r,s),G={plaintext:D.plaintext,protectedHeader:D.protectedHeader};return"function"==typeof r?{...G,key:D.key}:G}r.compactDecrypt=compactDecrypt},2886:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CompactEncrypt=void 0;let u=s(9392);let CompactEncrypt=class CompactEncrypt{constructor(t){this._flattened=new u.FlattenedEncrypt(t)}setContentEncryptionKey(t){return this._flattened.setContentEncryptionKey(t),this}setInitializationVector(t){return this._flattened.setInitializationVector(t),this}setProtectedHeader(t){return this._flattened.setProtectedHeader(t),this}setKeyManagementParameters(t){return this._flattened.setKeyManagementParameters(t),this}async encrypt(t,r){let s=await this._flattened.encrypt(t,r);return[s.protected,s.encrypted_key,s.iv,s.ciphertext,s.tag].join(".")}};r.CompactEncrypt=CompactEncrypt},4151:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.flattenedDecrypt=void 0;let u=s(4973),p=s(5315),h=s(94),E=s(3872),W=s(2601),J=s(6515),R=s(2710),K=s(6239),U=s(8864),D=s(1311),G=s(4144);async function flattenedDecrypt(t,r,s){var Y;let X,Z,Q,ee,et,er,en;if(!(0,J.default)(t))throw new E.JWEInvalid("Flattened JWE must be an object");if(void 0===t.protected&&void 0===t.header&&void 0===t.unprotected)throw new E.JWEInvalid("JOSE Header missing");if("string"!=typeof t.iv)throw new E.JWEInvalid("JWE Initialization Vector missing or incorrect type");if("string"!=typeof t.ciphertext)throw new E.JWEInvalid("JWE Ciphertext missing or incorrect type");if("string"!=typeof t.tag)throw new E.JWEInvalid("JWE Authentication Tag missing or incorrect type");if(void 0!==t.protected&&"string"!=typeof t.protected)throw new E.JWEInvalid("JWE Protected Header incorrect type");if(void 0!==t.encrypted_key&&"string"!=typeof t.encrypted_key)throw new E.JWEInvalid("JWE Encrypted Key incorrect type");if(void 0!==t.aad&&"string"!=typeof t.aad)throw new E.JWEInvalid("JWE AAD incorrect type");if(void 0!==t.header&&!(0,J.default)(t.header))throw new E.JWEInvalid("JWE Shared Unprotected Header incorrect type");if(void 0!==t.unprotected&&!(0,J.default)(t.unprotected))throw new E.JWEInvalid("JWE Per-Recipient Unprotected Header incorrect type");if(t.protected)try{let r=(0,u.decode)(t.protected);X=JSON.parse(K.decoder.decode(r))}catch{throw new E.JWEInvalid("JWE Protected Header is invalid")}if(!(0,W.default)(X,t.header,t.unprotected))throw new E.JWEInvalid("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");let ei={...X,...t.header,...t.unprotected};if((0,D.default)(E.JWEInvalid,new Map,null==s?void 0:s.crit,X,ei),void 0!==ei.zip){if(!X||!X.zip)throw new E.JWEInvalid('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if("DEF"!==ei.zip)throw new E.JOSENotSupported('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}let{alg:eo,enc:ea}=ei;if("string"!=typeof eo||!eo)throw new E.JWEInvalid("missing JWE Algorithm (alg) in JWE Header");if("string"!=typeof ea||!ea)throw new E.JWEInvalid("missing JWE Encryption Algorithm (enc) in JWE Header");let es=s&&(0,G.default)("keyManagementAlgorithms",s.keyManagementAlgorithms),el=s&&(0,G.default)("contentEncryptionAlgorithms",s.contentEncryptionAlgorithms);if(es&&!es.has(eo))throw new E.JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter not allowed');if(el&&!el.has(ea))throw new E.JOSEAlgNotAllowed('"enc" (Encryption Algorithm) Header Parameter not allowed');if(void 0!==t.encrypted_key)try{Z=(0,u.decode)(t.encrypted_key)}catch{throw new E.JWEInvalid("Failed to base64url decode the encrypted_key")}let ec=!1;"function"==typeof r&&(r=await r(X,t),ec=!0);try{Q=await (0,R.default)(eo,r,Z,ei,s)}catch(t){if(t instanceof TypeError||t instanceof E.JWEInvalid||t instanceof E.JOSENotSupported)throw t;Q=(0,U.default)(ea)}try{ee=(0,u.decode)(t.iv)}catch{throw new E.JWEInvalid("Failed to base64url decode the iv")}try{et=(0,u.decode)(t.tag)}catch{throw new E.JWEInvalid("Failed to base64url decode the tag")}let eu=K.encoder.encode(null!==(Y=t.protected)&&void 0!==Y?Y:"");er=void 0!==t.aad?(0,K.concat)(eu,K.encoder.encode("."),K.encoder.encode(t.aad)):eu;try{en=(0,u.decode)(t.ciphertext)}catch{throw new E.JWEInvalid("Failed to base64url decode the ciphertext")}let ed=await (0,p.default)(ea,Q,en,ee,et,er);"DEF"===ei.zip&&(ed=await ((null==s?void 0:s.inflateRaw)||h.inflate)(ed));let ep={plaintext:ed};if(void 0!==t.protected&&(ep.protectedHeader=X),void 0!==t.aad)try{ep.additionalAuthenticatedData=(0,u.decode)(t.aad)}catch{throw new E.JWEInvalid("Failed to base64url decode the aad")}return(void 0!==t.unprotected&&(ep.sharedUnprotectedHeader=t.unprotected),void 0!==t.header&&(ep.unprotectedHeader=t.header),ec)?{...ep,key:r}:ep}r.flattenedDecrypt=flattenedDecrypt},9392:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.FlattenedEncrypt=r.unprotected=void 0;let u=s(4973),p=s(9003),h=s(94),E=s(5568),W=s(623),J=s(3872),R=s(2601),K=s(6239),U=s(1311);r.unprotected=Symbol();let FlattenedEncrypt=class FlattenedEncrypt{constructor(t){if(!(t instanceof Uint8Array))throw TypeError("plaintext must be an instance of Uint8Array");this._plaintext=t}setKeyManagementParameters(t){if(this._keyManagementParameters)throw TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=t,this}setProtectedHeader(t){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setSharedUnprotectedHeader(t){if(this._sharedUnprotectedHeader)throw TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=t,this}setUnprotectedHeader(t){if(this._unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}setAdditionalAuthenticatedData(t){return this._aad=t,this}setContentEncryptionKey(t){if(this._cek)throw TypeError("setContentEncryptionKey can only be called once");return this._cek=t,this}setInitializationVector(t){if(this._iv)throw TypeError("setInitializationVector can only be called once");return this._iv=t,this}async encrypt(t,s){let D,G,Y,X,Z,Q,ee;if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new J.JWEInvalid("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!(0,R.default)(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new J.JWEInvalid("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let et={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if((0,U.default)(J.JWEInvalid,new Map,null==s?void 0:s.crit,this._protectedHeader,et),void 0!==et.zip){if(!this._protectedHeader||!this._protectedHeader.zip)throw new J.JWEInvalid('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if("DEF"!==et.zip)throw new J.JOSENotSupported('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}let{alg:er,enc:en}=et;if("string"!=typeof er||!er)throw new J.JWEInvalid('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("string"!=typeof en||!en)throw new J.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if("dir"===er){if(this._cek)throw TypeError("setContentEncryptionKey cannot be called when using Direct Encryption")}else if("ECDH-ES"===er&&this._cek)throw TypeError("setContentEncryptionKey cannot be called when using Direct Key Agreement");{let u;({cek:G,encryptedKey:D,parameters:u}=await (0,W.default)(er,en,t,this._cek,this._keyManagementParameters)),u&&(s&&r.unprotected in s?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,...u}:this.setUnprotectedHeader(u):this._protectedHeader?this._protectedHeader={...this._protectedHeader,...u}:this.setProtectedHeader(u))}if(this._iv||(this._iv=(0,E.default)(en)),X=this._protectedHeader?K.encoder.encode((0,u.encode)(JSON.stringify(this._protectedHeader))):K.encoder.encode(""),this._aad?(Z=(0,u.encode)(this._aad),Y=(0,K.concat)(X,K.encoder.encode("."),K.encoder.encode(Z))):Y=X,"DEF"===et.zip){let t=await ((null==s?void 0:s.deflateRaw)||h.deflate)(this._plaintext);({ciphertext:Q,tag:ee}=await (0,p.default)(en,t,G,this._iv,Y))}else({ciphertext:Q,tag:ee}=await (0,p.default)(en,this._plaintext,G,this._iv,Y));let ei={ciphertext:(0,u.encode)(Q),iv:(0,u.encode)(this._iv),tag:(0,u.encode)(ee)};return D&&(ei.encrypted_key=(0,u.encode)(D)),Z&&(ei.aad=Z),this._protectedHeader&&(ei.protected=K.decoder.decode(X)),this._sharedUnprotectedHeader&&(ei.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(ei.header=this._unprotectedHeader),ei}};r.FlattenedEncrypt=FlattenedEncrypt},7645:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.generalDecrypt=void 0;let u=s(4151),p=s(3872),h=s(6515);async function generalDecrypt(t,r,s){if(!(0,h.default)(t))throw new p.JWEInvalid("General JWE must be an object");if(!Array.isArray(t.recipients)||!t.recipients.every(h.default))throw new p.JWEInvalid("JWE Recipients missing or incorrect type");if(!t.recipients.length)throw new p.JWEInvalid("JWE Recipients has no members");for(let p of t.recipients)try{return await (0,u.flattenedDecrypt)({aad:t.aad,ciphertext:t.ciphertext,encrypted_key:p.encrypted_key,header:p.header,iv:t.iv,protected:t.protected,tag:t.tag,unprotected:t.unprotected},r,s)}catch{}throw new p.JWEDecryptionFailed}r.generalDecrypt=generalDecrypt},5310:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.GeneralEncrypt=void 0;let u=s(9392),p=s(3872),h=s(8864),E=s(2601),W=s(623),J=s(4973),R=s(1311);let IndividualRecipient=class IndividualRecipient{constructor(t,r,s){this.parent=t,this.key=r,this.options=s}setUnprotectedHeader(t){if(this.unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=t,this}addRecipient(...t){return this.parent.addRecipient(...t)}encrypt(...t){return this.parent.encrypt(...t)}done(){return this.parent}};let GeneralEncrypt=class GeneralEncrypt{constructor(t){this._recipients=[],this._plaintext=t}addRecipient(t,r){let s=new IndividualRecipient(this,t,{crit:null==r?void 0:r.crit});return this._recipients.push(s),s}setProtectedHeader(t){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setSharedUnprotectedHeader(t){if(this._unprotectedHeader)throw TypeError("setSharedUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}setAdditionalAuthenticatedData(t){return this._aad=t,this}async encrypt(t){var r,s,K;let U;if(!this._recipients.length)throw new p.JWEInvalid("at least one recipient must be added");if(t={deflateRaw:null==t?void 0:t.deflateRaw},1===this._recipients.length){let[r]=this._recipients,s=await new u.FlattenedEncrypt(this._plaintext).setAdditionalAuthenticatedData(this._aad).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(r.unprotectedHeader).encrypt(r.key,{...r.options,...t}),p={ciphertext:s.ciphertext,iv:s.iv,recipients:[{}],tag:s.tag};return s.aad&&(p.aad=s.aad),s.protected&&(p.protected=s.protected),s.unprotected&&(p.unprotected=s.unprotected),s.encrypted_key&&(p.recipients[0].encrypted_key=s.encrypted_key),s.header&&(p.recipients[0].header=s.header),p}for(let t=0;t<this._recipients.length;t++){let r=this._recipients[t];if(!(0,E.default)(this._protectedHeader,this._unprotectedHeader,r.unprotectedHeader))throw new p.JWEInvalid("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let s={...this._protectedHeader,...this._unprotectedHeader,...r.unprotectedHeader},{alg:u}=s;if("string"!=typeof u||!u)throw new p.JWEInvalid('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("dir"===u||"ECDH-ES"===u)throw new p.JWEInvalid('"dir" and "ECDH-ES" alg may only be used with a single recipient');if("string"!=typeof s.enc||!s.enc)throw new p.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(U){if(U!==s.enc)throw new p.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter must be the same for all recipients')}else U=s.enc;if((0,R.default)(p.JWEInvalid,new Map,r.options.crit,this._protectedHeader,s),void 0!==s.zip&&(!this._protectedHeader||!this._protectedHeader.zip))throw new p.JWEInvalid('JWE "zip" (Compression Algorithm) Header MUST be integrity protected')}let D=(0,h.default)(U),G={ciphertext:"",iv:"",recipients:[],tag:""};for(let p=0;p<this._recipients.length;p++){let h=this._recipients[p],E={};G.recipients.push(E);let R={...this._protectedHeader,...this._unprotectedHeader,...h.unprotectedHeader},Y=R.alg.startsWith("PBES2")?2048+p:void 0;if(0===p){let r=await new u.FlattenedEncrypt(this._plaintext).setAdditionalAuthenticatedData(this._aad).setContentEncryptionKey(D).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(h.unprotectedHeader).setKeyManagementParameters({p2c:Y}).encrypt(h.key,{...h.options,...t,[u.unprotected]:!0});G.ciphertext=r.ciphertext,G.iv=r.iv,G.tag=r.tag,r.aad&&(G.aad=r.aad),r.protected&&(G.protected=r.protected),r.unprotected&&(G.unprotected=r.unprotected),E.encrypted_key=r.encrypted_key,r.header&&(E.header=r.header);continue}let{encryptedKey:X,parameters:Z}=await (0,W.default)((null===(r=h.unprotectedHeader)||void 0===r?void 0:r.alg)||(null===(s=this._protectedHeader)||void 0===s?void 0:s.alg)||(null===(K=this._unprotectedHeader)||void 0===K?void 0:K.alg),U,h.key,D,{p2c:Y});E.encrypted_key=(0,J.encode)(X),(h.unprotectedHeader||Z)&&(E.header={...h.unprotectedHeader,...Z})}return G}};r.GeneralEncrypt=GeneralEncrypt},5344:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.EmbeddedJWK=void 0;let u=s(7622),p=s(6515),h=s(3872);async function EmbeddedJWK(t,r){let s={...t,...null==r?void 0:r.header};if(!(0,p.default)(s.jwk))throw new h.JWSInvalid('"jwk" (JSON Web Key) Header Parameter must be a JSON object');let E=await (0,u.importJWK)({...s.jwk,ext:!0},s.alg,!0);if(E instanceof Uint8Array||"public"!==E.type)throw new h.JWSInvalid('"jwk" (JSON Web Key) Header Parameter must be a public key');return E}r.EmbeddedJWK=EmbeddedJWK},4322:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.calculateJwkThumbprintUri=r.calculateJwkThumbprint=void 0;let u=s(8421),p=s(4973),h=s(3872),E=s(6239),W=s(6515),check=(t,r)=>{if("string"!=typeof t||!t)throw new h.JWKInvalid(`${r} missing or invalid`)};async function calculateJwkThumbprint(t,r){let s;if(!(0,W.default)(t))throw TypeError("JWK must be an object");if(null!=r||(r="sha256"),"sha256"!==r&&"sha384"!==r&&"sha512"!==r)throw TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');switch(t.kty){case"EC":check(t.crv,'"crv" (Curve) Parameter'),check(t.x,'"x" (X Coordinate) Parameter'),check(t.y,'"y" (Y Coordinate) Parameter'),s={crv:t.crv,kty:t.kty,x:t.x,y:t.y};break;case"OKP":check(t.crv,'"crv" (Subtype of Key Pair) Parameter'),check(t.x,'"x" (Public Key) Parameter'),s={crv:t.crv,kty:t.kty,x:t.x};break;case"RSA":check(t.e,'"e" (Exponent) Parameter'),check(t.n,'"n" (Modulus) Parameter'),s={e:t.e,kty:t.kty,n:t.n};break;case"oct":check(t.k,'"k" (Key Value) Parameter'),s={k:t.k,kty:t.kty};break;default:throw new h.JOSENotSupported('"kty" (Key Type) Parameter missing or unsupported')}let J=E.encoder.encode(JSON.stringify(s));return(0,p.encode)(await (0,u.default)(r,J))}async function calculateJwkThumbprintUri(t,r){null!=r||(r="sha256");let s=await calculateJwkThumbprint(t,r);return`urn:ietf:params:oauth:jwk-thumbprint:sha-${r.slice(-3)}:${s}`}r.calculateJwkThumbprint=calculateJwkThumbprint,r.calculateJwkThumbprintUri=calculateJwkThumbprintUri},7674:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createLocalJWKSet=r.LocalJWKSet=r.isJWKSLike=void 0;let u=s(7622),p=s(3872),h=s(6515);function getKtyFromAlg(t){switch("string"==typeof t&&t.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new p.JOSENotSupported('Unsupported "alg" value for a JSON Web Key Set')}}function isJWKSLike(t){return t&&"object"==typeof t&&Array.isArray(t.keys)&&t.keys.every(isJWKLike)}function isJWKLike(t){return(0,h.default)(t)}function clone(t){return"function"==typeof structuredClone?structuredClone(t):JSON.parse(JSON.stringify(t))}r.isJWKSLike=isJWKSLike;let LocalJWKSet=class LocalJWKSet{constructor(t){if(this._cached=new WeakMap,!isJWKSLike(t))throw new p.JWKSInvalid("JSON Web Key Set malformed");this._jwks=clone(t)}async getKey(t,r){let{alg:s,kid:u}={...t,...null==r?void 0:r.header},h=getKtyFromAlg(s),E=this._jwks.keys.filter(t=>{let r=h===t.kty;if(r&&"string"==typeof u&&(r=u===t.kid),r&&"string"==typeof t.alg&&(r=s===t.alg),r&&"string"==typeof t.use&&(r="sig"===t.use),r&&Array.isArray(t.key_ops)&&(r=t.key_ops.includes("verify")),r&&"EdDSA"===s&&(r="Ed25519"===t.crv||"Ed448"===t.crv),r)switch(s){case"ES256":r="P-256"===t.crv;break;case"ES256K":r="secp256k1"===t.crv;break;case"ES384":r="P-384"===t.crv;break;case"ES512":r="P-521"===t.crv}return r}),{0:W,length:J}=E;if(0===J)throw new p.JWKSNoMatchingKey;if(1!==J){let t=new p.JWKSMultipleMatchingKeys,{_cached:r}=this;throw t[Symbol.asyncIterator]=async function*(){for(let t of E)try{yield await importWithAlgCache(r,t,s)}catch{continue}},t}return importWithAlgCache(this._cached,W,s)}};async function importWithAlgCache(t,r,s){let h=t.get(r)||t.set(r,{}).get(r);if(void 0===h[s]){let t=await (0,u.importJWK)({...r,ext:!0},s);if(t instanceof Uint8Array||"public"!==t.type)throw new p.JWKSInvalid("JSON Web Key Set members must be public keys");h[s]=t}return h[s]}function createLocalJWKSet(t){let r=new LocalJWKSet(t);return async function(t,s){return r.getKey(t,s)}}r.LocalJWKSet=LocalJWKSet,r.createLocalJWKSet=createLocalJWKSet},4607:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createRemoteJWKSet=void 0;let u=s(7530),p=s(3872),h=s(7674);function isCloudflareWorkers(){return"undefined"!=typeof WebSocketPair||"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||"undefined"!=typeof EdgeRuntime&&"vercel"===EdgeRuntime}let RemoteJWKSet=class RemoteJWKSet extends h.LocalJWKSet{constructor(t,r){if(super({keys:[]}),this._jwks=void 0,!(t instanceof URL))throw TypeError("url must be an instance of URL");this._url=new URL(t.href),this._options={agent:null==r?void 0:r.agent,headers:null==r?void 0:r.headers},this._timeoutDuration="number"==typeof(null==r?void 0:r.timeoutDuration)?null==r?void 0:r.timeoutDuration:5e3,this._cooldownDuration="number"==typeof(null==r?void 0:r.cooldownDuration)?null==r?void 0:r.cooldownDuration:3e4,this._cacheMaxAge="number"==typeof(null==r?void 0:r.cacheMaxAge)?null==r?void 0:r.cacheMaxAge:6e5}coolingDown(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cooldownDuration}fresh(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cacheMaxAge}async getKey(t,r){this._jwks&&this.fresh()||await this.reload();try{return await super.getKey(t,r)}catch(s){if(s instanceof p.JWKSNoMatchingKey&&!1===this.coolingDown())return await this.reload(),super.getKey(t,r);throw s}}async reload(){this._pendingFetch&&isCloudflareWorkers()&&(this._pendingFetch=void 0),this._pendingFetch||(this._pendingFetch=(0,u.default)(this._url,this._timeoutDuration,this._options).then(t=>{if(!(0,h.isJWKSLike)(t))throw new p.JWKSInvalid("JSON Web Key Set malformed");this._jwks={keys:t.keys},this._jwksTimestamp=Date.now(),this._pendingFetch=void 0}).catch(t=>{throw this._pendingFetch=void 0,t})),await this._pendingFetch}};function createRemoteJWKSet(t,r){let s=new RemoteJWKSet(t,r);return async function(t,r){return s.getKey(t,r)}}r.createRemoteJWKSet=createRemoteJWKSet},7851:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CompactSign=void 0;let u=s(713);let CompactSign=class CompactSign{constructor(t){this._flattened=new u.FlattenedSign(t)}setProtectedHeader(t){return this._flattened.setProtectedHeader(t),this}async sign(t,r){let s=await this._flattened.sign(t,r);if(void 0===s.payload)throw TypeError("use the flattened module for creating JWS with b64: false");return`${s.protected}.${s.payload}.${s.signature}`}};r.CompactSign=CompactSign},8902:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.compactVerify=void 0;let u=s(1976),p=s(3872),h=s(6239);async function compactVerify(t,r,s){if(t instanceof Uint8Array&&(t=h.decoder.decode(t)),"string"!=typeof t)throw new p.JWSInvalid("Compact JWS must be a string or Uint8Array");let{0:E,1:W,2:J,length:R}=t.split(".");if(3!==R)throw new p.JWSInvalid("Invalid Compact JWS");let K=await (0,u.flattenedVerify)({payload:W,protected:E,signature:J},r,s),U={payload:K.payload,protectedHeader:K.protectedHeader};return"function"==typeof r?{...U,key:K.key}:U}r.compactVerify=compactVerify},713:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.FlattenedSign=void 0;let u=s(4973),p=s(7543),h=s(2601),E=s(3872),W=s(6239),J=s(1045),R=s(1311);let FlattenedSign=class FlattenedSign{constructor(t){if(!(t instanceof Uint8Array))throw TypeError("payload must be an instance of Uint8Array");this._payload=t}setProtectedHeader(t){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setUnprotectedHeader(t){if(this._unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}async sign(t,r){let s;if(!this._protectedHeader&&!this._unprotectedHeader)throw new E.JWSInvalid("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!(0,h.default)(this._protectedHeader,this._unprotectedHeader))throw new E.JWSInvalid("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let K={...this._protectedHeader,...this._unprotectedHeader},U=(0,R.default)(E.JWSInvalid,new Map([["b64",!0]]),null==r?void 0:r.crit,this._protectedHeader,K),D=!0;if(U.has("b64")&&"boolean"!=typeof(D=this._protectedHeader.b64))throw new E.JWSInvalid('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:G}=K;if("string"!=typeof G||!G)throw new E.JWSInvalid('JWS "alg" (Algorithm) Header Parameter missing or invalid');(0,J.default)(G,t,"sign");let Y=this._payload;D&&(Y=W.encoder.encode((0,u.encode)(Y))),s=this._protectedHeader?W.encoder.encode((0,u.encode)(JSON.stringify(this._protectedHeader))):W.encoder.encode("");let X=(0,W.concat)(s,W.encoder.encode("."),Y),Z=await (0,p.default)(G,t,X),Q={signature:(0,u.encode)(Z),payload:""};return D&&(Q.payload=W.decoder.decode(Y)),this._unprotectedHeader&&(Q.header=this._unprotectedHeader),this._protectedHeader&&(Q.protected=W.decoder.decode(s)),Q}};r.FlattenedSign=FlattenedSign},1976:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.flattenedVerify=void 0;let u=s(4973),p=s(7986),h=s(3872),E=s(6239),W=s(2601),J=s(6515),R=s(1045),K=s(1311),U=s(4144);async function flattenedVerify(t,r,s){var D;let G,Y;if(!(0,J.default)(t))throw new h.JWSInvalid("Flattened JWS must be an object");if(void 0===t.protected&&void 0===t.header)throw new h.JWSInvalid('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==t.protected&&"string"!=typeof t.protected)throw new h.JWSInvalid("JWS Protected Header incorrect type");if(void 0===t.payload)throw new h.JWSInvalid("JWS Payload missing");if("string"!=typeof t.signature)throw new h.JWSInvalid("JWS Signature missing or incorrect type");if(void 0!==t.header&&!(0,J.default)(t.header))throw new h.JWSInvalid("JWS Unprotected Header incorrect type");let X={};if(t.protected)try{let r=(0,u.decode)(t.protected);X=JSON.parse(E.decoder.decode(r))}catch{throw new h.JWSInvalid("JWS Protected Header is invalid")}if(!(0,W.default)(X,t.header))throw new h.JWSInvalid("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let Z={...X,...t.header},Q=(0,K.default)(h.JWSInvalid,new Map([["b64",!0]]),null==s?void 0:s.crit,X,Z),ee=!0;if(Q.has("b64")&&"boolean"!=typeof(ee=X.b64))throw new h.JWSInvalid('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:et}=Z;if("string"!=typeof et||!et)throw new h.JWSInvalid('JWS "alg" (Algorithm) Header Parameter missing or invalid');let er=s&&(0,U.default)("algorithms",s.algorithms);if(er&&!er.has(et))throw new h.JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter not allowed');if(ee){if("string"!=typeof t.payload)throw new h.JWSInvalid("JWS Payload must be a string")}else if("string"!=typeof t.payload&&!(t.payload instanceof Uint8Array))throw new h.JWSInvalid("JWS Payload must be a string or an Uint8Array instance");let en=!1;"function"==typeof r&&(r=await r(X,t),en=!0),(0,R.default)(et,r,"verify");let ei=(0,E.concat)(E.encoder.encode(null!==(D=t.protected)&&void 0!==D?D:""),E.encoder.encode("."),"string"==typeof t.payload?E.encoder.encode(t.payload):t.payload);try{G=(0,u.decode)(t.signature)}catch{throw new h.JWSInvalid("Failed to base64url decode the signature")}let eo=await (0,p.default)(et,r,G,ei);if(!eo)throw new h.JWSSignatureVerificationFailed;if(ee)try{Y=(0,u.decode)(t.payload)}catch{throw new h.JWSInvalid("Failed to base64url decode the payload")}else Y="string"==typeof t.payload?E.encoder.encode(t.payload):t.payload;let ea={payload:Y};return(void 0!==t.protected&&(ea.protectedHeader=X),void 0!==t.header&&(ea.unprotectedHeader=t.header),en)?{...ea,key:r}:ea}r.flattenedVerify=flattenedVerify},711:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.GeneralSign=void 0;let u=s(713),p=s(3872);let IndividualSignature=class IndividualSignature{constructor(t,r,s){this.parent=t,this.key=r,this.options=s}setProtectedHeader(t){if(this.protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this.protectedHeader=t,this}setUnprotectedHeader(t){if(this.unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=t,this}addSignature(...t){return this.parent.addSignature(...t)}sign(...t){return this.parent.sign(...t)}done(){return this.parent}};let GeneralSign=class GeneralSign{constructor(t){this._signatures=[],this._payload=t}addSignature(t,r){let s=new IndividualSignature(this,t,r);return this._signatures.push(s),s}async sign(){if(!this._signatures.length)throw new p.JWSInvalid("at least one signature must be added");let t={signatures:[],payload:""};for(let r=0;r<this._signatures.length;r++){let s=this._signatures[r],h=new u.FlattenedSign(this._payload);h.setProtectedHeader(s.protectedHeader),h.setUnprotectedHeader(s.unprotectedHeader);let{payload:E,...W}=await h.sign(s.key,s.options);if(0===r)t.payload=E;else if(t.payload!==E)throw new p.JWSInvalid("inconsistent use of JWS Unencoded Payload (RFC7797)");t.signatures.push(W)}return t}};r.GeneralSign=GeneralSign},7682:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.generalVerify=void 0;let u=s(1976),p=s(3872),h=s(6515);async function generalVerify(t,r,s){if(!(0,h.default)(t))throw new p.JWSInvalid("General JWS must be an object");if(!Array.isArray(t.signatures)||!t.signatures.every(h.default))throw new p.JWSInvalid("JWS Signatures missing or incorrect type");for(let p of t.signatures)try{return await (0,u.flattenedVerify)({header:p.header,payload:t.payload,protected:p.protected,signature:p.signature},r,s)}catch{}throw new p.JWSSignatureVerificationFailed}r.generalVerify=generalVerify},6422:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.jwtDecrypt=void 0;let u=s(3745),p=s(7e3),h=s(3872);async function jwtDecrypt(t,r,s){let E=await (0,u.compactDecrypt)(t,r,s),W=(0,p.default)(E.protectedHeader,E.plaintext,s),{protectedHeader:J}=E;if(void 0!==J.iss&&J.iss!==W.iss)throw new h.JWTClaimValidationFailed('replicated "iss" claim header parameter mismatch',"iss","mismatch");if(void 0!==J.sub&&J.sub!==W.sub)throw new h.JWTClaimValidationFailed('replicated "sub" claim header parameter mismatch',"sub","mismatch");if(void 0!==J.aud&&JSON.stringify(J.aud)!==JSON.stringify(W.aud))throw new h.JWTClaimValidationFailed('replicated "aud" claim header parameter mismatch',"aud","mismatch");let R={payload:W,protectedHeader:J};return"function"==typeof r?{...R,key:E.key}:R}r.jwtDecrypt=jwtDecrypt},5112:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.EncryptJWT=void 0;let u=s(2886),p=s(6239),h=s(8303);let EncryptJWT=class EncryptJWT extends h.ProduceJWT{setProtectedHeader(t){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setKeyManagementParameters(t){if(this._keyManagementParameters)throw TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=t,this}setContentEncryptionKey(t){if(this._cek)throw TypeError("setContentEncryptionKey can only be called once");return this._cek=t,this}setInitializationVector(t){if(this._iv)throw TypeError("setInitializationVector can only be called once");return this._iv=t,this}replicateIssuerAsHeader(){return this._replicateIssuerAsHeader=!0,this}replicateSubjectAsHeader(){return this._replicateSubjectAsHeader=!0,this}replicateAudienceAsHeader(){return this._replicateAudienceAsHeader=!0,this}async encrypt(t,r){let s=new u.CompactEncrypt(p.encoder.encode(JSON.stringify(this._payload)));return this._replicateIssuerAsHeader&&(this._protectedHeader={...this._protectedHeader,iss:this._payload.iss}),this._replicateSubjectAsHeader&&(this._protectedHeader={...this._protectedHeader,sub:this._payload.sub}),this._replicateAudienceAsHeader&&(this._protectedHeader={...this._protectedHeader,aud:this._payload.aud}),s.setProtectedHeader(this._protectedHeader),this._iv&&s.setInitializationVector(this._iv),this._cek&&s.setContentEncryptionKey(this._cek),this._keyManagementParameters&&s.setKeyManagementParameters(this._keyManagementParameters),s.encrypt(t,r)}};r.EncryptJWT=EncryptJWT},8303:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ProduceJWT=void 0;let u=s(4163),p=s(6515),h=s(8409);let ProduceJWT=class ProduceJWT{constructor(t){if(!(0,p.default)(t))throw TypeError("JWT Claims Set MUST be an object");this._payload=t}setIssuer(t){return this._payload={...this._payload,iss:t},this}setSubject(t){return this._payload={...this._payload,sub:t},this}setAudience(t){return this._payload={...this._payload,aud:t},this}setJti(t){return this._payload={...this._payload,jti:t},this}setNotBefore(t){return"number"==typeof t?this._payload={...this._payload,nbf:t}:this._payload={...this._payload,nbf:(0,u.default)(new Date)+(0,h.default)(t)},this}setExpirationTime(t){return"number"==typeof t?this._payload={...this._payload,exp:t}:this._payload={...this._payload,exp:(0,u.default)(new Date)+(0,h.default)(t)},this}setIssuedAt(t){return void 0===t?this._payload={...this._payload,iat:(0,u.default)(new Date)}:this._payload={...this._payload,iat:t},this}};r.ProduceJWT=ProduceJWT},2402:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SignJWT=void 0;let u=s(7851),p=s(3872),h=s(6239),E=s(8303);let SignJWT=class SignJWT extends E.ProduceJWT{setProtectedHeader(t){return this._protectedHeader=t,this}async sign(t,r){var s;let E=new u.CompactSign(h.encoder.encode(JSON.stringify(this._payload)));if(E.setProtectedHeader(this._protectedHeader),Array.isArray(null===(s=this._protectedHeader)||void 0===s?void 0:s.crit)&&this._protectedHeader.crit.includes("b64")&&!1===this._protectedHeader.b64)throw new p.JWTInvalid("JWTs MUST NOT use unencoded payload");return E.sign(t,r)}};r.SignJWT=SignJWT},7593:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.UnsecuredJWT=void 0;let u=s(4973),p=s(6239),h=s(3872),E=s(7e3),W=s(8303);let UnsecuredJWT=class UnsecuredJWT extends W.ProduceJWT{encode(){let t=u.encode(JSON.stringify({alg:"none"})),r=u.encode(JSON.stringify(this._payload));return`${t}.${r}.`}static decode(t,r){let s;if("string"!=typeof t)throw new h.JWTInvalid("Unsecured JWT must be a string");let{0:W,1:J,2:R,length:K}=t.split(".");if(3!==K||""!==R)throw new h.JWTInvalid("Invalid Unsecured JWT");try{if(s=JSON.parse(p.decoder.decode(u.decode(W))),"none"!==s.alg)throw Error()}catch{throw new h.JWTInvalid("Invalid Unsecured JWT")}let U=(0,E.default)(s,u.decode(J),r);return{payload:U,header:s}}};r.UnsecuredJWT=UnsecuredJWT},8302:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.jwtVerify=void 0;let u=s(8902),p=s(7e3),h=s(3872);async function jwtVerify(t,r,s){var E;let W=await (0,u.compactVerify)(t,r,s);if((null===(E=W.protectedHeader.crit)||void 0===E?void 0:E.includes("b64"))&&!1===W.protectedHeader.b64)throw new h.JWTInvalid("JWTs MUST NOT use unencoded payload");let J=(0,p.default)(W.protectedHeader,W.payload,s),R={payload:J,protectedHeader:W.protectedHeader};return"function"==typeof r?{...R,key:W.key}:R}r.jwtVerify=jwtVerify},6256:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.exportJWK=r.exportPKCS8=r.exportSPKI=void 0;let u=s(8889),p=s(8889),h=s(6);async function exportSPKI(t){return(0,u.toSPKI)(t)}async function exportPKCS8(t){return(0,p.toPKCS8)(t)}async function exportJWK(t){return(0,h.default)(t)}r.exportSPKI=exportSPKI,r.exportPKCS8=exportPKCS8,r.exportJWK=exportJWK},5811:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.generateKeyPair=void 0;let u=s(3802);async function generateKeyPair(t,r){return(0,u.generateKeyPair)(t,r)}r.generateKeyPair=generateKeyPair},3734:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.generateSecret=void 0;let u=s(3802);async function generateSecret(t,r){return(0,u.generateSecret)(t,r)}r.generateSecret=generateSecret},7622:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.importJWK=r.importPKCS8=r.importX509=r.importSPKI=void 0;let u=s(4973),p=s(8889),h=s(7199),E=s(3872),W=s(6515);async function importSPKI(t,r,s){if("string"!=typeof t||0!==t.indexOf("-----BEGIN PUBLIC KEY-----"))throw TypeError('"spki" must be SPKI formatted string');return(0,p.fromSPKI)(t,r,s)}async function importX509(t,r,s){if("string"!=typeof t||0!==t.indexOf("-----BEGIN CERTIFICATE-----"))throw TypeError('"x509" must be X.509 formatted string');return(0,p.fromX509)(t,r,s)}async function importPKCS8(t,r,s){if("string"!=typeof t||0!==t.indexOf("-----BEGIN PRIVATE KEY-----"))throw TypeError('"pkcs8" must be PKCS#8 formatted string');return(0,p.fromPKCS8)(t,r,s)}async function importJWK(t,r,s){var p;if(!(0,W.default)(t))throw TypeError("JWK must be an object");switch(r||(r=t.alg),t.kty){case"oct":if("string"!=typeof t.k||!t.k)throw TypeError('missing "k" (Key Value) Parameter value');if(null!=s||(s=!0!==t.ext),s)return(0,h.default)({...t,alg:r,ext:null!==(p=t.ext)&&void 0!==p&&p});return(0,u.decode)(t.k);case"RSA":if(void 0!==t.oth)throw new E.JOSENotSupported('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return(0,h.default)({...t,alg:r});default:throw new E.JOSENotSupported('Unsupported "kty" (Key Type) Parameter value')}}r.importSPKI=importSPKI,r.importX509=importX509,r.importPKCS8=importPKCS8,r.importJWK=importJWK},417:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.unwrap=r.wrap=void 0;let u=s(9003),p=s(5315),h=s(5568),E=s(4973);async function wrap(t,r,s,p){let W=t.slice(0,7);p||(p=(0,h.default)(W));let{ciphertext:J,tag:R}=await (0,u.default)(W,s,r,p,new Uint8Array(0));return{encryptedKey:J,iv:(0,E.encode)(p),tag:(0,E.encode)(R)}}async function unwrap(t,r,s,u,h){let E=t.slice(0,7);return(0,p.default)(E,r,s,u,h,new Uint8Array(0))}r.wrap=wrap,r.unwrap=unwrap},6239:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.concatKdf=r.lengthAndInput=r.uint32be=r.uint64be=r.p2s=r.concat=r.decoder=r.encoder=void 0;let u=s(8421);function concat(...t){let r=t.reduce((t,{length:r})=>t+r,0),s=new Uint8Array(r),u=0;return t.forEach(t=>{s.set(t,u),u+=t.length}),s}function p2s(t,s){return concat(r.encoder.encode(t),new Uint8Array([0]),s)}function writeUInt32BE(t,r,s){if(r<0||r>=4294967296)throw RangeError(`value must be >= 0 and <= ${4294967296-1}. Received ${r}`);t.set([r>>>24,r>>>16,r>>>8,255&r],s)}function uint64be(t){let r=new Uint8Array(8);return writeUInt32BE(r,Math.floor(t/4294967296),0),writeUInt32BE(r,t%4294967296,4),r}function uint32be(t){let r=new Uint8Array(4);return writeUInt32BE(r,t),r}function lengthAndInput(t){return concat(uint32be(t.length),t)}async function concatKdf(t,r,s){let p=Math.ceil((r>>3)/32),h=new Uint8Array(32*p);for(let r=0;r<p;r++){let p=new Uint8Array(4+t.length+s.length);p.set(uint32be(r+1)),p.set(t,4),p.set(s,4+t.length),h.set(await (0,u.default)("sha256",p),32*r)}return h.slice(0,r>>3)}r.encoder=new TextEncoder,r.decoder=new TextDecoder,r.concat=concat,r.p2s=p2s,r.uint64be=uint64be,r.uint32be=uint32be,r.lengthAndInput=lengthAndInput,r.concatKdf=concatKdf},8864:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.bitLength=void 0;let u=s(3872),p=s(5402);function bitLength(t){switch(t){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new u.JOSENotSupported(`Unsupported JWE Algorithm: ${t}`)}}r.bitLength=bitLength,r.default=t=>(0,p.default)(new Uint8Array(bitLength(t)>>3))},4284:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let u=s(3872),p=s(5568);r.default=(t,r)=>{if(r.length<<3!==(0,p.bitLength)(t))throw new u.JWEInvalid("Invalid Initialization Vector length")}},1045:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let u=s(3965),p=s(1342),symmetricTypeCheck=(t,r)=>{if(!(r instanceof Uint8Array)){if(!(0,p.default)(r))throw TypeError((0,u.withAlg)(t,r,...p.types,"Uint8Array"));if("secret"!==r.type)throw TypeError(`${p.types.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}},asymmetricTypeCheck=(t,r,s)=>{if(!(0,p.default)(r))throw TypeError((0,u.withAlg)(t,r,...p.types));if("secret"===r.type)throw TypeError(`${p.types.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if("sign"===s&&"public"===r.type)throw TypeError(`${p.types.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if("decrypt"===s&&"public"===r.type)throw TypeError(`${p.types.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(r.algorithm&&"verify"===s&&"private"===r.type)throw TypeError(`${p.types.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(r.algorithm&&"encrypt"===s&&"private"===r.type)throw TypeError(`${p.types.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)};r.default=(t,r,s)=>{let u=t.startsWith("HS")||"dir"===t||t.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(t);u?symmetricTypeCheck(t,r):asymmetricTypeCheck(t,r,s)}},6298:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let u=s(3872);function checkP2s(t){if(!(t instanceof Uint8Array)||t.length<8)throw new u.JWEInvalid("PBES2 Salt Input must be 8 or more octets")}r.default=checkP2s},9604:(t,r)=>{"use strict";function unusable(t,r="algorithm.name"){return TypeError(`CryptoKey does not support this operation, its ${r} must be ${t}`)}function isAlgorithm(t,r){return t.name===r}function getHashLength(t){return parseInt(t.name.slice(4),10)}function getNamedCurve(t){switch(t){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw Error("unreachable")}}function checkUsage(t,r){if(r.length&&!r.some(r=>t.usages.includes(r))){let t="CryptoKey does not support this operation, its usages must include ";if(r.length>2){let s=r.pop();t+=`one of ${r.join(", ")}, or ${s}.`}else 2===r.length?t+=`one of ${r[0]} or ${r[1]}.`:t+=`${r[0]}.`;throw TypeError(t)}}function checkSigCryptoKey(t,r,...s){switch(r){case"HS256":case"HS384":case"HS512":{if(!isAlgorithm(t.algorithm,"HMAC"))throw unusable("HMAC");let s=parseInt(r.slice(2),10),u=getHashLength(t.algorithm.hash);if(u!==s)throw unusable(`SHA-${s}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!isAlgorithm(t.algorithm,"RSASSA-PKCS1-v1_5"))throw unusable("RSASSA-PKCS1-v1_5");let s=parseInt(r.slice(2),10),u=getHashLength(t.algorithm.hash);if(u!==s)throw unusable(`SHA-${s}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!isAlgorithm(t.algorithm,"RSA-PSS"))throw unusable("RSA-PSS");let s=parseInt(r.slice(2),10),u=getHashLength(t.algorithm.hash);if(u!==s)throw unusable(`SHA-${s}`,"algorithm.hash");break}case"EdDSA":if("Ed25519"!==t.algorithm.name&&"Ed448"!==t.algorithm.name)throw unusable("Ed25519 or Ed448");break;case"ES256":case"ES384":case"ES512":{if(!isAlgorithm(t.algorithm,"ECDSA"))throw unusable("ECDSA");let s=getNamedCurve(r),u=t.algorithm.namedCurve;if(u!==s)throw unusable(s,"algorithm.namedCurve");break}default:throw TypeError("CryptoKey does not support this operation")}checkUsage(t,s)}function checkEncCryptoKey(t,r,...s){switch(r){case"A128GCM":case"A192GCM":case"A256GCM":{if(!isAlgorithm(t.algorithm,"AES-GCM"))throw unusable("AES-GCM");let s=parseInt(r.slice(1,4),10),u=t.algorithm.length;if(u!==s)throw unusable(s,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!isAlgorithm(t.algorithm,"AES-KW"))throw unusable("AES-KW");let s=parseInt(r.slice(1,4),10),u=t.algorithm.length;if(u!==s)throw unusable(s,"algorithm.length");break}case"ECDH":switch(t.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw unusable("ECDH, X25519, or X448")}break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!isAlgorithm(t.algorithm,"PBKDF2"))throw unusable("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!isAlgorithm(t.algorithm,"RSA-OAEP"))throw unusable("RSA-OAEP");let s=parseInt(r.slice(9),10)||1,u=getHashLength(t.algorithm.hash);if(u!==s)throw unusable(`SHA-${s}`,"algorithm.hash");break}default:throw TypeError("CryptoKey does not support this operation")}checkUsage(t,s)}Object.defineProperty(r,"__esModule",{value:!0}),r.checkEncCryptoKey=r.checkSigCryptoKey=void 0,r.checkSigCryptoKey=checkSigCryptoKey,r.checkEncCryptoKey=checkEncCryptoKey},2710:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let u=s(6529),p=s(6048),h=s(7794),E=s(8830),W=s(4973),J=s(3872),R=s(8864),K=s(7622),U=s(1045),D=s(6515),G=s(417);async function decryptKeyManagement(t,r,s,Y,X){switch((0,U.default)(t,r,"decrypt"),t){case"dir":if(void 0!==s)throw new J.JWEInvalid("Encountered unexpected JWE Encrypted Key");return r;case"ECDH-ES":if(void 0!==s)throw new J.JWEInvalid("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let h,E;if(!(0,D.default)(Y.epk))throw new J.JWEInvalid('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!p.ecdhAllowed(r))throw new J.JOSENotSupported("ECDH with the provided key is not allowed or not supported by your javascript runtime");let U=await (0,K.importJWK)(Y.epk,t);if(void 0!==Y.apu){if("string"!=typeof Y.apu)throw new J.JWEInvalid('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{h=(0,W.decode)(Y.apu)}catch{throw new J.JWEInvalid("Failed to base64url decode the apu")}}if(void 0!==Y.apv){if("string"!=typeof Y.apv)throw new J.JWEInvalid('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{E=(0,W.decode)(Y.apv)}catch{throw new J.JWEInvalid("Failed to base64url decode the apv")}}let G=await p.deriveKey(U,r,"ECDH-ES"===t?Y.enc:t,"ECDH-ES"===t?(0,R.bitLength)(Y.enc):parseInt(t.slice(-5,-2),10),h,E);if("ECDH-ES"===t)return G;if(void 0===s)throw new J.JWEInvalid("JWE Encrypted Key missing");return(0,u.unwrap)(t.slice(-6),G,s)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":if(void 0===s)throw new J.JWEInvalid("JWE Encrypted Key missing");return(0,E.decrypt)(t,r,s);case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{let u;if(void 0===s)throw new J.JWEInvalid("JWE Encrypted Key missing");if("number"!=typeof Y.p2c)throw new J.JWEInvalid('JOSE Header "p2c" (PBES2 Count) missing or invalid');let p=(null==X?void 0:X.maxPBES2Count)||1e4;if(Y.p2c>p)throw new J.JWEInvalid('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if("string"!=typeof Y.p2s)throw new J.JWEInvalid('JOSE Header "p2s" (PBES2 Salt) missing or invalid');try{u=(0,W.decode)(Y.p2s)}catch{throw new J.JWEInvalid("Failed to base64url decode the p2s")}return(0,h.decrypt)(t,r,s,Y.p2c,u)}case"A128KW":case"A192KW":case"A256KW":if(void 0===s)throw new J.JWEInvalid("JWE Encrypted Key missing");return(0,u.unwrap)(t,r,s);case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{let u,p;if(void 0===s)throw new J.JWEInvalid("JWE Encrypted Key missing");if("string"!=typeof Y.iv)throw new J.JWEInvalid('JOSE Header "iv" (Initialization Vector) missing or invalid');if("string"!=typeof Y.tag)throw new J.JWEInvalid('JOSE Header "tag" (Authentication Tag) missing or invalid');try{u=(0,W.decode)(Y.iv)}catch{throw new J.JWEInvalid("Failed to base64url decode the iv")}try{p=(0,W.decode)(Y.tag)}catch{throw new J.JWEInvalid("Failed to base64url decode the tag")}return(0,G.unwrap)(t,r,s,u,p)}default:throw new J.JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value')}}r.default=decryptKeyManagement},623:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let u=s(6529),p=s(6048),h=s(7794),E=s(8830),W=s(4973),J=s(8864),R=s(3872),K=s(6256),U=s(1045),D=s(417);async function encryptKeyManagement(t,r,s,G,Y={}){let X,Z,Q;switch((0,U.default)(t,s,"encrypt"),t){case"dir":Q=s;break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!p.ecdhAllowed(s))throw new R.JOSENotSupported("ECDH with the provided key is not allowed or not supported by your javascript runtime");let{apu:h,apv:E}=Y,{epk:U}=Y;U||(U=(await p.generateEpk(s)).privateKey);let{x:D,y:ee,crv:et,kty:er}=await (0,K.exportJWK)(U),en=await p.deriveKey(s,U,"ECDH-ES"===t?r:t,"ECDH-ES"===t?(0,J.bitLength)(r):parseInt(t.slice(-5,-2),10),h,E);if(Z={epk:{x:D,crv:et,kty:er}},"EC"===er&&(Z.epk.y=ee),h&&(Z.apu=(0,W.encode)(h)),E&&(Z.apv=(0,W.encode)(E)),"ECDH-ES"===t){Q=en;break}Q=G||(0,J.default)(r);let ei=t.slice(-6);X=await (0,u.wrap)(ei,en,Q);break}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":Q=G||(0,J.default)(r),X=await (0,E.encrypt)(t,s,Q);break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{Q=G||(0,J.default)(r);let{p2c:u,p2s:p}=Y;({encryptedKey:X,...Z}=await (0,h.encrypt)(t,s,Q,u,p));break}case"A128KW":case"A192KW":case"A256KW":Q=G||(0,J.default)(r),X=await (0,u.wrap)(t,s,Q);break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{Q=G||(0,J.default)(r);let{iv:u}=Y;({encryptedKey:X,...Z}=await (0,D.wrap)(t,s,Q,u));break}default:throw new R.JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:Q,encryptedKey:X,parameters:Z}}r.default=encryptKeyManagement},4163:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=t=>Math.floor(t.getTime()/1e3)},3965:(t,r)=>{"use strict";function message(t,r,...s){if(s.length>2){let r=s.pop();t+=`one of type ${s.join(", ")}, or ${r}.`}else 2===s.length?t+=`one of type ${s[0]} or ${s[1]}.`:t+=`of type ${s[0]}.`;return null==r?t+=` Received ${r}`:"function"==typeof r&&r.name?t+=` Received function ${r.name}`:"object"==typeof r&&null!=r&&r.constructor&&r.constructor.name&&(t+=` Received an instance of ${r.constructor.name}`),t}function withAlg(t,r,...s){return message(`Key for the ${t} algorithm must be `,r,...s)}Object.defineProperty(r,"__esModule",{value:!0}),r.withAlg=void 0,r.default=(t,...r)=>message("Key must be ",t,...r),r.withAlg=withAlg},2601:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=(...t)=>{let r;let s=t.filter(Boolean);if(0===s.length||1===s.length)return!0;for(let t of s){let s=Object.keys(t);if(!r||0===r.size){r=new Set(s);continue}for(let t of s){if(r.has(t))return!1;r.add(t)}}return!0}},6515:(t,r)=>{"use strict";function isObjectLike(t){return"object"==typeof t&&null!==t}function isObject(t){if(!isObjectLike(t)||"[object Object]"!==Object.prototype.toString.call(t))return!1;if(null===Object.getPrototypeOf(t))return!0;let r=t;for(;null!==Object.getPrototypeOf(r);)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(t)===r}Object.defineProperty(r,"__esModule",{value:!0}),r.default=isObject},5568:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.bitLength=void 0;let u=s(3872),p=s(5402);function bitLength(t){switch(t){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new u.JOSENotSupported(`Unsupported JWE Algorithm: ${t}`)}}r.bitLength=bitLength,r.default=t=>(0,p.default)(new Uint8Array(bitLength(t)>>3))},7e3:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let u=s(3872),p=s(6239),h=s(4163),E=s(8409),W=s(6515),normalizeTyp=t=>t.toLowerCase().replace(/^application\//,""),checkAudiencePresence=(t,r)=>"string"==typeof t?r.includes(t):!!Array.isArray(t)&&r.some(Set.prototype.has.bind(new Set(t)));r.default=(t,r,s={})=>{let J,R;let{typ:K}=s;if(K&&("string"!=typeof t.typ||normalizeTyp(t.typ)!==normalizeTyp(K)))throw new u.JWTClaimValidationFailed('unexpected "typ" JWT header value',"typ","check_failed");try{J=JSON.parse(p.decoder.decode(r))}catch{}if(!(0,W.default)(J))throw new u.JWTInvalid("JWT Claims Set must be a top-level JSON object");let{requiredClaims:U=[],issuer:D,subject:G,audience:Y,maxTokenAge:X}=s;for(let t of(void 0!==X&&U.push("iat"),void 0!==Y&&U.push("aud"),void 0!==G&&U.push("sub"),void 0!==D&&U.push("iss"),new Set(U.reverse())))if(!(t in J))throw new u.JWTClaimValidationFailed(`missing required "${t}" claim`,t,"missing");if(D&&!(Array.isArray(D)?D:[D]).includes(J.iss))throw new u.JWTClaimValidationFailed('unexpected "iss" claim value',"iss","check_failed");if(G&&J.sub!==G)throw new u.JWTClaimValidationFailed('unexpected "sub" claim value',"sub","check_failed");if(Y&&!checkAudiencePresence(J.aud,"string"==typeof Y?[Y]:Y))throw new u.JWTClaimValidationFailed('unexpected "aud" claim value',"aud","check_failed");switch(typeof s.clockTolerance){case"string":R=(0,E.default)(s.clockTolerance);break;case"number":R=s.clockTolerance;break;case"undefined":R=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:Z}=s,Q=(0,h.default)(Z||new Date);if((void 0!==J.iat||X)&&"number"!=typeof J.iat)throw new u.JWTClaimValidationFailed('"iat" claim must be a number',"iat","invalid");if(void 0!==J.nbf){if("number"!=typeof J.nbf)throw new u.JWTClaimValidationFailed('"nbf" claim must be a number',"nbf","invalid");if(J.nbf>Q+R)throw new u.JWTClaimValidationFailed('"nbf" claim timestamp check failed',"nbf","check_failed")}if(void 0!==J.exp){if("number"!=typeof J.exp)throw new u.JWTClaimValidationFailed('"exp" claim must be a number',"exp","invalid");if(J.exp<=Q-R)throw new u.JWTExpired('"exp" claim timestamp check failed',"exp","check_failed")}if(X){let t=Q-J.iat,r="number"==typeof X?X:(0,E.default)(X);if(t-R>r)throw new u.JWTExpired('"iat" claim timestamp check failed (too far in the past)',"iat","check_failed");if(t<0-R)throw new u.JWTClaimValidationFailed('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}return J}},8409:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let s=604800,u=31557600,p=/^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i;r.default=t=>{let r=p.exec(t);if(!r)throw TypeError("Invalid time period format");let h=parseFloat(r[1]),E=r[2].toLowerCase();switch(E){case"sec":case"secs":case"second":case"seconds":case"s":return Math.round(h);case"minute":case"minutes":case"min":case"mins":case"m":return Math.round(60*h);case"hour":case"hours":case"hr":case"hrs":case"h":return Math.round(3600*h);case"day":case"days":case"d":return Math.round(86400*h);case"week":case"weeks":case"w":return Math.round(h*s);default:return Math.round(h*u)}}},4144:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=(t,r)=>{if(void 0!==r&&(!Array.isArray(r)||r.some(t=>"string"!=typeof t)))throw TypeError(`"${t}" option must be an array of strings`);if(r)return new Set(r)}},1311:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let u=s(3872);function validateCrit(t,r,s,p,h){let E;if(void 0!==h.crit&&void 0===p.crit)throw new t('"crit" (Critical) Header Parameter MUST be integrity protected');if(!p||void 0===p.crit)return new Set;if(!Array.isArray(p.crit)||0===p.crit.length||p.crit.some(t=>"string"!=typeof t||0===t.length))throw new t('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let W of(E=void 0!==s?new Map([...Object.entries(s),...r.entries()]):r,p.crit)){if(!E.has(W))throw new u.JOSENotSupported(`Extension Header Parameter "${W}" is not recognized`);if(void 0===h[W])throw new t(`Extension Header Parameter "${W}" is missing`);if(E.get(W)&&void 0===p[W])throw new t(`Extension Header Parameter "${W}" MUST be integrity protected`)}return new Set(p.crit)}r.default=validateCrit},6529:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.unwrap=r.wrap=void 0;let u=s(4300),p=s(6113),h=s(3872),E=s(6239),W=s(4636),J=s(9604),R=s(95),K=s(3965),U=s(464),D=s(1342);function checkKeySize(t,r){if(t.symmetricKeySize<<3!==parseInt(r.slice(1,4),10))throw TypeError(`Invalid key size for alg: ${r}`)}function ensureKeyObject(t,r,s){if((0,R.default)(t))return t;if(t instanceof Uint8Array)return(0,p.createSecretKey)(t);if((0,W.isCryptoKey)(t))return(0,J.checkEncCryptoKey)(t,r,s),p.KeyObject.from(t);throw TypeError((0,K.default)(t,...D.types,"Uint8Array"))}r.wrap=(t,r,s)=>{let W=parseInt(t.slice(1,4),10),J=`aes${W}-wrap`;if(!(0,U.default)(J))throw new h.JOSENotSupported(`alg ${t} is not supported either by JOSE or your javascript runtime`);let R=ensureKeyObject(r,t,"wrapKey");checkKeySize(R,t);let K=(0,p.createCipheriv)(J,R,u.Buffer.alloc(8,166));return(0,E.concat)(K.update(s),K.final())},r.unwrap=(t,r,s)=>{let W=parseInt(t.slice(1,4),10),J=`aes${W}-wrap`;if(!(0,U.default)(J))throw new h.JOSENotSupported(`alg ${t} is not supported either by JOSE or your javascript runtime`);let R=ensureKeyObject(r,t,"unwrapKey");checkKeySize(R,t);let K=(0,p.createDecipheriv)(J,R,u.Buffer.alloc(8,166));return(0,E.concat)(K.update(s),K.final())}},8889:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.fromX509=r.fromSPKI=r.fromPKCS8=r.toPKCS8=r.toSPKI=void 0;let u=s(6113),p=s(4300),h=s(4636),E=s(95),W=s(3965),J=s(1342),genericExport=(t,r,s)=>{let p;if((0,h.isCryptoKey)(s)){if(!s.extractable)throw TypeError("CryptoKey is not extractable");p=u.KeyObject.from(s)}else if((0,E.default)(s))p=s;else throw TypeError((0,W.default)(s,...J.types));if(p.type!==t)throw TypeError(`key is not a ${t} key`);return p.export({format:"pem",type:r})};r.toSPKI=t=>genericExport("public","spki",t),r.toPKCS8=t=>genericExport("private","pkcs8",t),r.fromPKCS8=t=>(0,u.createPrivateKey)({key:p.Buffer.from(t.replace(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g,""),"base64"),type:"pkcs8",format:"der"}),r.fromSPKI=t=>(0,u.createPublicKey)({key:p.Buffer.from(t.replace(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g,""),"base64"),type:"spki",format:"der"}),r.fromX509=t=>(0,u.createPublicKey)({key:t,type:"spki",format:"pem"})},9182:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let Asn1SequenceDecoder=class Asn1SequenceDecoder{constructor(t){if(48!==t[0])throw TypeError();this.buffer=t,this.offset=1;let r=this.decodeLength();if(r!==t.length-this.offset)throw TypeError()}decodeLength(){let t=this.buffer[this.offset++];if(128&t){let r=-129&t;t=0;for(let s=0;s<r;s++)t=t<<8|this.buffer[this.offset+s];this.offset+=r}return t}unsignedInteger(){if(2!==this.buffer[this.offset++])throw TypeError();let t=this.decodeLength();0===this.buffer[this.offset]&&(this.offset++,t--);let r=this.buffer.slice(this.offset,this.offset+t);return this.offset+=t,r}end(){if(this.offset!==this.buffer.length)throw TypeError()}};r.default=Asn1SequenceDecoder},2853:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let u=s(4300),p=s(3872),h=u.Buffer.from([0]),E=u.Buffer.from([2]),W=u.Buffer.from([3]),J=u.Buffer.from([48]),R=u.Buffer.from([4]),encodeLength=t=>{if(t<128)return u.Buffer.from([t]);let r=u.Buffer.alloc(5);r.writeUInt32BE(t,1);let s=1;for(;0===r[s];)s++;return r[s-1]=128|5-s,r.slice(s-1)},K=new Map([["P-256",u.Buffer.from("06 08 2A 86 48 CE 3D 03 01 07".replace(/ /g,""),"hex")],["secp256k1",u.Buffer.from("06 05 2B 81 04 00 0A".replace(/ /g,""),"hex")],["P-384",u.Buffer.from("06 05 2B 81 04 00 22".replace(/ /g,""),"hex")],["P-521",u.Buffer.from("06 05 2B 81 04 00 23".replace(/ /g,""),"hex")],["ecPublicKey",u.Buffer.from("06 07 2A 86 48 CE 3D 02 01".replace(/ /g,""),"hex")],["X25519",u.Buffer.from("06 03 2B 65 6E".replace(/ /g,""),"hex")],["X448",u.Buffer.from("06 03 2B 65 6F".replace(/ /g,""),"hex")],["Ed25519",u.Buffer.from("06 03 2B 65 70".replace(/ /g,""),"hex")],["Ed448",u.Buffer.from("06 03 2B 65 71".replace(/ /g,""),"hex")]]);let DumbAsn1Encoder=class DumbAsn1Encoder{constructor(){this.length=0,this.elements=[]}oidFor(t){let r=K.get(t);if(!r)throw new p.JOSENotSupported("Invalid or unsupported OID");this.elements.push(r),this.length+=r.length}zero(){this.elements.push(E,u.Buffer.from([1]),h),this.length+=3}one(){this.elements.push(E,u.Buffer.from([1]),u.Buffer.from([1])),this.length+=3}unsignedInteger(t){if(128&t[0]){let r=encodeLength(t.length+1);this.elements.push(E,r,h,t),this.length+=2+r.length+t.length}else{let r=0;for(;0===t[r]&&(128&t[r+1])==0;)r++;let s=encodeLength(t.length-r);this.elements.push(E,encodeLength(t.length-r),t.slice(r)),this.length+=1+s.length+t.length-r}}octStr(t){let r=encodeLength(t.length);this.elements.push(R,encodeLength(t.length),t),this.length+=1+r.length+t.length}bitStr(t){let r=encodeLength(t.length+1);this.elements.push(W,encodeLength(t.length+1),h,t),this.length+=1+r.length+t.length+1}add(t){this.elements.push(t),this.length+=t.length}end(t=J){let r=encodeLength(this.length);return u.Buffer.concat([t,r,...this.elements],1+r.length+this.length)}};r.default=DumbAsn1Encoder},4973:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.decode=r.encode=r.encodeBase64=r.decodeBase64=void 0;let u=s(4300),p=s(6239);function normalize(t){let r=t;return r instanceof Uint8Array&&(r=p.decoder.decode(r)),r}u.Buffer.isEncoding("base64url")?r.encode=t=>u.Buffer.from(t).toString("base64url"):r.encode=t=>u.Buffer.from(t).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),r.decodeBase64=t=>u.Buffer.from(t,"base64"),r.encodeBase64=t=>u.Buffer.from(t).toString("base64"),r.decode=t=>u.Buffer.from(normalize(t),"base64")},7487:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let u=s(6113),p=s(6239);function cbcTag(t,r,s,h,E,W){let J=(0,p.concat)(t,r,s,(0,p.uint64be)(t.length<<3)),R=(0,u.createHmac)(`sha${h}`,E);return R.update(J),R.digest().slice(0,W>>3)}r.default=cbcTag},9723:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let u=s(3872),p=s(95);r.default=(t,r)=>{let s;switch(t){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":s=parseInt(t.slice(-3),10);break;case"A128GCM":case"A192GCM":case"A256GCM":s=parseInt(t.slice(1,4),10);break;default:throw new u.JOSENotSupported(`Content Encryption Algorithm ${t} is not supported either by JOSE or your javascript runtime`)}if(r instanceof Uint8Array){let t=r.byteLength<<3;if(t!==s)throw new u.JWEInvalid(`Invalid Content Encryption Key length. Expected ${s} bits, got ${t} bits`);return}if((0,p.default)(r)&&"secret"===r.type){let t=r.symmetricKeySize<<3;if(t!==s)throw new u.JWEInvalid(`Invalid Content Encryption Key length. Expected ${s} bits, got ${t} bits`);return}throw TypeError("Invalid Content Encryption Key type")}},9382:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.setModulusLength=r.weakMap=void 0,r.weakMap=new WeakMap;let getLength=(t,r)=>{let s=t.readUInt8(1);if((128&s)==0)return 0===r?s:getLength(t.subarray(2+s),r-1);let u=127&s;s=0;for(let r=0;r<u;r++){s<<=8;let u=t.readUInt8(2+r);s|=u}return 0===r?s:getLength(t.subarray(2+s),r-1)},getLengthOfSeqIndex=(t,r)=>{let s=t.readUInt8(1);return(128&s)==0?getLength(t.subarray(2),r):getLength(t.subarray(2+(127&s)),r)},getModulusLength=t=>{var s,u;if(r.weakMap.has(t))return r.weakMap.get(t);let p=null!==(u=null===(s=t.asymmetricKeyDetails)||void 0===s?void 0:s.modulusLength)&&void 0!==u?u:getLengthOfSeqIndex(t.export({format:"der",type:"pkcs1"}),"private"===t.type?1:0)-1<<3;return r.weakMap.set(t,p),p};r.setModulusLength=(t,s)=>{r.weakMap.set(t,s)},r.default=(t,r)=>{if(2048>getModulusLength(t))throw TypeError(`${r} requires key modulusLength to be 2048 bits or larger`)}},464:(t,r,s)=>{"use strict";let u;Object.defineProperty(r,"__esModule",{value:!0});let p=s(6113);r.default=t=>(u||(u=new Set((0,p.getCiphers)())),u.has(t))},5315:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let u=s(6113),p=s(4284),h=s(9723),E=s(6239),W=s(3872),J=s(9967),R=s(7487),K=s(4636),U=s(9604),D=s(95),G=s(3965),Y=s(464),X=s(1342);function cbcDecrypt(t,r,s,p,h,K){let U,G;let X=parseInt(t.slice(1,4),10);(0,D.default)(r)&&(r=r.export());let Z=r.subarray(X>>3),Q=r.subarray(0,X>>3),ee=parseInt(t.slice(-3),10),et=`aes-${X}-cbc`;if(!(0,Y.default)(et))throw new W.JOSENotSupported(`alg ${t} is not supported by your javascript runtime`);let er=(0,R.default)(K,p,s,ee,Q,X);try{U=(0,J.default)(h,er)}catch{}if(!U)throw new W.JWEDecryptionFailed;try{let t=(0,u.createDecipheriv)(et,Z,p);G=(0,E.concat)(t.update(s),t.final())}catch{}if(!G)throw new W.JWEDecryptionFailed;return G}function gcmDecrypt(t,r,s,p,h,E){let J=parseInt(t.slice(1,4),10),R=`aes-${J}-gcm`;if(!(0,Y.default)(R))throw new W.JOSENotSupported(`alg ${t} is not supported by your javascript runtime`);try{let t=(0,u.createDecipheriv)(R,r,p,{authTagLength:16});t.setAuthTag(h),E.byteLength&&t.setAAD(E,{plaintextLength:s.length});let W=t.update(s);return t.final(),W}catch{throw new W.JWEDecryptionFailed}}r.default=(t,r,s,E,J,R)=>{let Y;if((0,K.isCryptoKey)(r))(0,U.checkEncCryptoKey)(r,t,"decrypt"),Y=u.KeyObject.from(r);else if(r instanceof Uint8Array||(0,D.default)(r))Y=r;else throw TypeError((0,G.default)(r,...X.types,"Uint8Array"));switch((0,h.default)(t,Y),(0,p.default)(t,E),t){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return cbcDecrypt(t,Y,s,E,J,R);case"A128GCM":case"A192GCM":case"A256GCM":return gcmDecrypt(t,Y,s,E,J,R);default:throw new W.JOSENotSupported("Unsupported JWE Content Encryption Algorithm")}}},8421:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let u=s(6113);r.default=(t,r)=>(0,u.createHash)(t).update(r).digest()},7684:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let u=s(3872);function dsaDigest(t){switch(t){case"PS256":case"RS256":case"ES256":case"ES256K":return"sha256";case"PS384":case"RS384":case"ES384":return"sha384";case"PS512":case"RS512":case"ES512":return"sha512";case"EdDSA":return;default:throw new u.JOSENotSupported(`alg ${t} is not supported either by JOSE or your javascript runtime`)}}r.default=dsaDigest},6048:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ecdhAllowed=r.generateEpk=r.deriveKey=void 0;let u=s(6113),p=s(3837),h=s(2042),E=s(6239),W=s(3872),J=s(4636),R=s(9604),K=s(95),U=s(3965),D=s(1342),G=(0,p.promisify)(u.generateKeyPair);async function deriveKey(t,r,s,p,h=new Uint8Array(0),W=new Uint8Array(0)){let G,Y;if((0,J.isCryptoKey)(t))(0,R.checkEncCryptoKey)(t,"ECDH"),G=u.KeyObject.from(t);else if((0,K.default)(t))G=t;else throw TypeError((0,U.default)(t,...D.types));if((0,J.isCryptoKey)(r))(0,R.checkEncCryptoKey)(r,"ECDH","deriveBits"),Y=u.KeyObject.from(r);else if((0,K.default)(r))Y=r;else throw TypeError((0,U.default)(r,...D.types));let X=(0,E.concat)((0,E.lengthAndInput)(E.encoder.encode(s)),(0,E.lengthAndInput)(h),(0,E.lengthAndInput)(W),(0,E.uint32be)(p)),Z=(0,u.diffieHellman)({privateKey:Y,publicKey:G});return(0,E.concatKdf)(Z,p,X)}async function generateEpk(t){let r;if((0,J.isCryptoKey)(t))r=u.KeyObject.from(t);else if((0,K.default)(t))r=t;else throw TypeError((0,U.default)(t,...D.types));switch(r.asymmetricKeyType){case"x25519":return G("x25519");case"x448":return G("x448");case"ec":{let t=(0,h.default)(r);return G("ec",{namedCurve:t})}default:throw new W.JOSENotSupported("Invalid or unsupported EPK")}}r.deriveKey=deriveKey,r.generateEpk=generateEpk,r.ecdhAllowed=t=>["P-256","P-384","P-521","X25519","X448"].includes((0,h.default)(t))},9003:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let u=s(6113),p=s(4284),h=s(9723),E=s(6239),W=s(7487),J=s(4636),R=s(9604),K=s(95),U=s(3965),D=s(3872),G=s(464),Y=s(1342);function cbcEncrypt(t,r,s,p,h){let J=parseInt(t.slice(1,4),10);(0,K.default)(s)&&(s=s.export());let R=s.subarray(J>>3),U=s.subarray(0,J>>3),Y=`aes-${J}-cbc`;if(!(0,G.default)(Y))throw new D.JOSENotSupported(`alg ${t} is not supported by your javascript runtime`);let X=(0,u.createCipheriv)(Y,R,p),Z=(0,E.concat)(X.update(r),X.final()),Q=parseInt(t.slice(-3),10),ee=(0,W.default)(h,p,Z,Q,U,J);return{ciphertext:Z,tag:ee}}function gcmEncrypt(t,r,s,p,h){let E=parseInt(t.slice(1,4),10),W=`aes-${E}-gcm`;if(!(0,G.default)(W))throw new D.JOSENotSupported(`alg ${t} is not supported by your javascript runtime`);let J=(0,u.createCipheriv)(W,s,p,{authTagLength:16});h.byteLength&&J.setAAD(h,{plaintextLength:r.length});let R=J.update(r);J.final();let K=J.getAuthTag();return{ciphertext:R,tag:K}}r.default=(t,r,s,E,W)=>{let G;if((0,J.isCryptoKey)(s))(0,R.checkEncCryptoKey)(s,t,"encrypt"),G=u.KeyObject.from(s);else if(s instanceof Uint8Array||(0,K.default)(s))G=s;else throw TypeError((0,U.default)(s,...Y.types,"Uint8Array"));switch((0,h.default)(t,G),(0,p.default)(t,E),t){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return cbcEncrypt(t,r,G,E,W);case"A128GCM":case"A192GCM":case"A256GCM":return gcmEncrypt(t,r,G,E,W);default:throw new D.JOSENotSupported("Unsupported JWE Content Encryption Algorithm")}}},7530:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let u=s(3685),p=s(5687),h=s(2361),E=s(3872),W=s(6239),fetchJwks=async(t,r,s)=>{let J;switch(t.protocol){case"https:":J=p.get;break;case"http:":J=u.get;break;default:throw TypeError("Unsupported URL protocol.")}let{agent:R,headers:K}=s,U=J(t.href,{agent:R,timeout:r,headers:K}),[D]=await Promise.race([(0,h.once)(U,"response"),(0,h.once)(U,"timeout")]);if(!D)throw U.destroy(),new E.JWKSTimeout;if(200!==D.statusCode)throw new E.JOSEError("Expected 200 OK from the JSON Web Key Set HTTP response");let G=[];for await(let t of D)G.push(t);try{return JSON.parse(W.decoder.decode((0,W.concat)(...G)))}catch{throw new E.JOSEError("Failed to parse the JSON Web Key Set HTTP response as JSON")}};r.default=fetchJwks},804:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.jwkImport=r.jwkExport=r.rsaPssParams=r.oneShotCallback=void 0;let[s,u]=process.versions.node.split(".").map(t=>parseInt(t,10));r.oneShotCallback=s>=16||15===s&&u>=13,r.rsaPssParams=!("electron"in process.versions)&&(s>=17||16===s&&u>=9),r.jwkExport=s>=16||15===s&&u>=9,r.jwkImport=s>=16||15===s&&u>=12},3802:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.generateKeyPair=r.generateSecret=void 0;let u=s(6113),p=s(3837),h=s(5402),E=s(9382),W=s(3872),J=(0,p.promisify)(u.generateKeyPair);async function generateSecret(t,r){let s;switch(t){case"HS256":case"HS384":case"HS512":case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":s=parseInt(t.slice(-3),10);break;case"A128KW":case"A192KW":case"A256KW":case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":case"A128GCM":case"A192GCM":case"A256GCM":s=parseInt(t.slice(1,4),10);break;default:throw new W.JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return(0,u.createSecretKey)((0,h.default)(new Uint8Array(s>>3)))}async function generateKeyPair(t,r){var s,u;switch(t){case"RS256":case"RS384":case"RS512":case"PS256":case"PS384":case"PS512":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":case"RSA1_5":{let t=null!==(s=null==r?void 0:r.modulusLength)&&void 0!==s?s:2048;if("number"!=typeof t||t<2048)throw new W.JOSENotSupported("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");let u=await J("rsa",{modulusLength:t,publicExponent:65537});return(0,E.setModulusLength)(u.privateKey,t),(0,E.setModulusLength)(u.publicKey,t),u}case"ES256":return J("ec",{namedCurve:"P-256"});case"ES256K":return J("ec",{namedCurve:"secp256k1"});case"ES384":return J("ec",{namedCurve:"P-384"});case"ES512":return J("ec",{namedCurve:"P-521"});case"EdDSA":switch(null==r?void 0:r.crv){case void 0:case"Ed25519":return J("ed25519");case"Ed448":return J("ed448");default:throw new W.JOSENotSupported("Invalid or unsupported crv option provided, supported values are Ed25519 and Ed448")}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":let p=null!==(u=null==r?void 0:r.crv)&&void 0!==u?u:"P-256";switch(p){case void 0:case"P-256":case"P-384":case"P-521":return J("ec",{namedCurve:p});case"X25519":return J("x25519");case"X448":return J("x448");default:throw new W.JOSENotSupported("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448")}default:throw new W.JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}}r.generateSecret=generateSecret,r.generateKeyPair=generateKeyPair},2042:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.setCurve=r.weakMap=void 0;let u=s(4300),p=s(6113),h=s(3872),E=s(4636),W=s(95),J=s(3965),R=s(1342),K=u.Buffer.from([42,134,72,206,61,3,1,7]),U=u.Buffer.from([43,129,4,0,34]),D=u.Buffer.from([43,129,4,0,35]),G=u.Buffer.from([43,129,4,0,10]);r.weakMap=new WeakMap;let namedCurveToJOSE=t=>{switch(t){case"prime256v1":return"P-256";case"secp384r1":return"P-384";case"secp521r1":return"P-521";case"secp256k1":return"secp256k1";default:throw new h.JOSENotSupported("Unsupported key curve for this operation")}},getNamedCurve=(t,s)=>{var u;let Y;if((0,E.isCryptoKey)(t))Y=p.KeyObject.from(t);else if((0,W.default)(t))Y=t;else throw TypeError((0,J.default)(t,...R.types));if("secret"===Y.type)throw TypeError('only "private" or "public" type keys can be used for this operation');switch(Y.asymmetricKeyType){case"ed25519":case"ed448":return`Ed${Y.asymmetricKeyType.slice(2)}`;case"x25519":case"x448":return`X${Y.asymmetricKeyType.slice(1)}`;case"ec":{if(r.weakMap.has(Y))return r.weakMap.get(Y);let t=null===(u=Y.asymmetricKeyDetails)||void 0===u?void 0:u.namedCurve;if(t||"private"!==Y.type){if(!t){let r=Y.export({format:"der",type:"spki"}),s=r[1]<128?14:15,u=r[s],p=r.slice(s+1,s+1+u);if(p.equals(K))t="prime256v1";else if(p.equals(U))t="secp384r1";else if(p.equals(D))t="secp521r1";else if(p.equals(G))t="secp256k1";else throw new h.JOSENotSupported("Unsupported key curve for this operation")}}else t=getNamedCurve((0,p.createPublicKey)(Y),!0);if(s)return t;let E=namedCurveToJOSE(t);return r.weakMap.set(Y,E),E}default:throw TypeError("Invalid asymmetric key type for this operation")}};function setCurve(t,s){r.weakMap.set(t,s)}r.setCurve=setCurve,r.default=getNamedCurve},3764:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let u=s(6113),p=s(4636),h=s(9604),E=s(3965),W=s(1342);function getSignVerifyKey(t,r,s){if(r instanceof Uint8Array){if(!t.startsWith("HS"))throw TypeError((0,E.default)(r,...W.types));return(0,u.createSecretKey)(r)}if(r instanceof u.KeyObject)return r;if((0,p.isCryptoKey)(r))return(0,h.checkSigCryptoKey)(r,t,s),u.KeyObject.from(r);throw TypeError((0,E.default)(r,...W.types,"Uint8Array"))}r.default=getSignVerifyKey},4553:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let u=s(3872);function hmacDigest(t){switch(t){case"HS256":return"sha256";case"HS384":return"sha384";case"HS512":return"sha512";default:throw new u.JOSENotSupported(`alg ${t} is not supported either by JOSE or your javascript runtime`)}}r.default=hmacDigest},1342:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.types=void 0;let u=s(4636),p=s(95);r.default=t=>(0,p.default)(t)||(0,u.isCryptoKey)(t);let h=["KeyObject"];r.types=h,(globalThis.CryptoKey||(null===u.default||void 0===u.default?void 0:u.default.CryptoKey))&&h.push("CryptoKey")},95:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let u=s(6113),p=s(3837);r.default=p.types.isKeyObject?t=>p.types.isKeyObject(t):t=>null!=t&&t instanceof u.KeyObject},7199:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let u=s(4300),p=s(6113),h=s(4973),E=s(3872),W=s(2042),J=s(9382),R=s(2853),K=s(804);r.default=t=>{if(K.jwkImport&&"oct"!==t.kty)return t.d?(0,p.createPrivateKey)({format:"jwk",key:t}):(0,p.createPublicKey)({format:"jwk",key:t});switch(t.kty){case"oct":return(0,p.createSecretKey)((0,h.decode)(t.k));case"RSA":{let r=new R.default,s=void 0!==t.d,h=u.Buffer.from(t.n,"base64"),E=u.Buffer.from(t.e,"base64");s?(r.zero(),r.unsignedInteger(h),r.unsignedInteger(E),r.unsignedInteger(u.Buffer.from(t.d,"base64")),r.unsignedInteger(u.Buffer.from(t.p,"base64")),r.unsignedInteger(u.Buffer.from(t.q,"base64")),r.unsignedInteger(u.Buffer.from(t.dp,"base64")),r.unsignedInteger(u.Buffer.from(t.dq,"base64")),r.unsignedInteger(u.Buffer.from(t.qi,"base64"))):(r.unsignedInteger(h),r.unsignedInteger(E));let W=r.end(),K={key:W,format:"der",type:"pkcs1"},U=s?(0,p.createPrivateKey)(K):(0,p.createPublicKey)(K);return(0,J.setModulusLength)(U,h.length<<3),U}case"EC":{let r=new R.default,s=void 0!==t.d,h=u.Buffer.concat([u.Buffer.alloc(1,4),u.Buffer.from(t.x,"base64"),u.Buffer.from(t.y,"base64")]);if(s){r.zero();let s=new R.default;s.oidFor("ecPublicKey"),s.oidFor(t.crv),r.add(s.end());let E=new R.default;E.one(),E.octStr(u.Buffer.from(t.d,"base64"));let J=new R.default;J.bitStr(h);let K=J.end(u.Buffer.from([161]));E.add(K);let U=E.end(),D=new R.default;D.add(U);let G=D.end(u.Buffer.from([4]));r.add(G);let Y=r.end(),X=(0,p.createPrivateKey)({key:Y,format:"der",type:"pkcs8"});return(0,W.setCurve)(X,t.crv),X}let E=new R.default;E.oidFor("ecPublicKey"),E.oidFor(t.crv),r.add(E.end()),r.bitStr(h);let J=r.end(),K=(0,p.createPublicKey)({key:J,format:"der",type:"spki"});return(0,W.setCurve)(K,t.crv),K}case"OKP":{let r=new R.default,s=void 0!==t.d;if(s){r.zero();let s=new R.default;s.oidFor(t.crv),r.add(s.end());let h=new R.default;h.octStr(u.Buffer.from(t.d,"base64"));let E=h.end(u.Buffer.from([4]));r.add(E);let W=r.end();return(0,p.createPrivateKey)({key:W,format:"der",type:"pkcs8"})}let h=new R.default;h.oidFor(t.crv),r.add(h.end()),r.bitStr(u.Buffer.from(t.x,"base64"));let E=r.end();return(0,p.createPublicKey)({key:E,format:"der",type:"spki"})}default:throw new E.JOSENotSupported('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}}},6:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let u=s(6113),p=s(4973),h=s(9182),E=s(3872),W=s(2042),J=s(4636),R=s(95),K=s(3965),U=s(1342),D=s(804),keyToJWK=t=>{let r;if((0,J.isCryptoKey)(t)){if(!t.extractable)throw TypeError("CryptoKey is not extractable");r=u.KeyObject.from(t)}else if((0,R.default)(t))r=t;else if(t instanceof Uint8Array)return{kty:"oct",k:(0,p.encode)(t)};else throw TypeError((0,K.default)(t,...U.types,"Uint8Array"));if(D.jwkExport){if("secret"!==r.type&&!["rsa","ec","ed25519","x25519","ed448","x448"].includes(r.asymmetricKeyType))throw new E.JOSENotSupported("Unsupported key asymmetricKeyType");return r.export({format:"jwk"})}switch(r.type){case"secret":return{kty:"oct",k:(0,p.encode)(r.export())};case"private":case"public":switch(r.asymmetricKeyType){case"rsa":{let t;let s=r.export({format:"der",type:"pkcs1"}),u=new h.default(s);"private"===r.type&&u.unsignedInteger();let E=(0,p.encode)(u.unsignedInteger()),W=(0,p.encode)(u.unsignedInteger());return"private"===r.type&&(t={d:(0,p.encode)(u.unsignedInteger()),p:(0,p.encode)(u.unsignedInteger()),q:(0,p.encode)(u.unsignedInteger()),dp:(0,p.encode)(u.unsignedInteger()),dq:(0,p.encode)(u.unsignedInteger()),qi:(0,p.encode)(u.unsignedInteger())}),u.end(),{kty:"RSA",n:E,e:W,...t}}case"ec":{let t,s,h;let J=(0,W.default)(r);switch(J){case"secp256k1":t=64,s=33,h=-1;break;case"P-256":t=64,s=36,h=-1;break;case"P-384":t=96,s=35,h=-3;break;case"P-521":t=132,s=35,h=-3;break;default:throw new E.JOSENotSupported("Unsupported curve")}if("public"===r.type){let s=r.export({type:"spki",format:"der"});return{kty:"EC",crv:J,x:(0,p.encode)(s.subarray(-t,-t/2)),y:(0,p.encode)(s.subarray(-t/2))}}let R=r.export({type:"pkcs8",format:"der"});return R.length<100&&(s+=h),{...keyToJWK((0,u.createPublicKey)(r)),d:(0,p.encode)(R.subarray(s,s+t/2))}}case"ed25519":case"x25519":{let t=(0,W.default)(r);if("public"===r.type){let s=r.export({type:"spki",format:"der"});return{kty:"OKP",crv:t,x:(0,p.encode)(s.subarray(-32))}}let s=r.export({type:"pkcs8",format:"der"});return{...keyToJWK((0,u.createPublicKey)(r)),d:(0,p.encode)(s.subarray(-32))}}case"ed448":case"x448":{let t=(0,W.default)(r);if("public"===r.type){let s=r.export({type:"spki",format:"der"});return{kty:"OKP",crv:t,x:(0,p.encode)(s.subarray("Ed448"===t?-57:-56))}}let s=r.export({type:"pkcs8",format:"der"});return{...keyToJWK((0,u.createPublicKey)(r)),d:(0,p.encode)(s.subarray("Ed448"===t?-57:-56))}}default:throw new E.JOSENotSupported("Unsupported key asymmetricKeyType")}default:throw new E.JOSENotSupported("Unsupported key type")}};r.default=keyToJWK},4928:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let u=s(6113),p=s(2042),h=s(3872),E=s(9382),W=s(804),J={padding:u.constants.RSA_PKCS1_PSS_PADDING,saltLength:u.constants.RSA_PSS_SALTLEN_DIGEST},R=new Map([["ES256","P-256"],["ES256K","secp256k1"],["ES384","P-384"],["ES512","P-521"]]);function keyForCrypto(t,r){switch(t){case"EdDSA":if(!["ed25519","ed448"].includes(r.asymmetricKeyType))throw TypeError("Invalid key for this operation, its asymmetricKeyType must be ed25519 or ed448");return r;case"RS256":case"RS384":case"RS512":if("rsa"!==r.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");return(0,E.default)(r,t),r;case W.rsaPssParams&&"PS256":case W.rsaPssParams&&"PS384":case W.rsaPssParams&&"PS512":if("rsa-pss"===r.asymmetricKeyType){let{hashAlgorithm:s,mgf1HashAlgorithm:u,saltLength:p}=r.asymmetricKeyDetails,h=parseInt(t.slice(-3),10);if(void 0!==s&&(s!==`sha${h}`||u!==s))throw TypeError(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${t}`);if(void 0!==p&&p>h>>3)throw TypeError(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${t}`)}else if("rsa"!==r.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa or rsa-pss");return(0,E.default)(r,t),{key:r,...J};case!W.rsaPssParams&&"PS256":case!W.rsaPssParams&&"PS384":case!W.rsaPssParams&&"PS512":if("rsa"!==r.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");return(0,E.default)(r,t),{key:r,...J};case"ES256":case"ES256K":case"ES384":case"ES512":{if("ec"!==r.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be ec");let s=(0,p.default)(r),u=R.get(t);if(s!==u)throw TypeError(`Invalid key curve for the algorithm, its curve must be ${u}, got ${s}`);return{dsaEncoding:"ieee-p1363",key:r}}default:throw new h.JOSENotSupported(`alg ${t} is not supported either by JOSE or your javascript runtime`)}}r.default=keyForCrypto},7794:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.decrypt=r.encrypt=void 0;let u=s(3837),p=s(6113),h=s(5402),E=s(6239),W=s(4973),J=s(6529),R=s(6298),K=s(4636),U=s(9604),D=s(95),G=s(3965),Y=s(1342),X=(0,u.promisify)(p.pbkdf2);function getPassword(t,r){if((0,D.default)(t))return t.export();if(t instanceof Uint8Array)return t;if((0,K.isCryptoKey)(t))return(0,U.checkEncCryptoKey)(t,r,"deriveBits","deriveKey"),p.KeyObject.from(t).export();throw TypeError((0,G.default)(t,...Y.types,"Uint8Array"))}let encrypt=async(t,r,s,u=2048,p=(0,h.default)(new Uint8Array(16)))=>{(0,R.default)(p);let K=(0,E.p2s)(t,p),U=parseInt(t.slice(13,16),10)>>3,D=getPassword(r,t),G=await X(D,K,u,U,`sha${t.slice(8,11)}`),Y=await (0,J.wrap)(t.slice(-6),G,s);return{encryptedKey:Y,p2c:u,p2s:(0,W.encode)(p)}};r.encrypt=encrypt;let decrypt=async(t,r,s,u,p)=>{(0,R.default)(p);let h=(0,E.p2s)(t,p),W=parseInt(t.slice(13,16),10)>>3,K=getPassword(r,t),U=await X(K,h,u,W,`sha${t.slice(8,11)}`);return(0,J.unwrap)(t.slice(-6),U,s)};r.decrypt=decrypt},5402:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var u=s(6113);Object.defineProperty(r,"default",{enumerable:!0,get:function(){return u.randomFillSync}})},8830:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.decrypt=r.encrypt=void 0;let u=s(6113),p=s(9382),h=s(4636),E=s(9604),W=s(95),J=s(3965),R=s(1342),checkKey=(t,r)=>{if("rsa"!==t.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");(0,p.default)(t,r)},resolvePadding=t=>{switch(t){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return u.constants.RSA_PKCS1_OAEP_PADDING;case"RSA1_5":return u.constants.RSA_PKCS1_PADDING;default:return}},resolveOaepHash=t=>{switch(t){case"RSA-OAEP":return"sha1";case"RSA-OAEP-256":return"sha256";case"RSA-OAEP-384":return"sha384";case"RSA-OAEP-512":return"sha512";default:return}};function ensureKeyObject(t,r,...s){if((0,W.default)(t))return t;if((0,h.isCryptoKey)(t))return(0,E.checkEncCryptoKey)(t,r,...s),u.KeyObject.from(t);throw TypeError((0,J.default)(t,...R.types))}r.encrypt=(t,r,s)=>{let p=resolvePadding(t),h=resolveOaepHash(t),E=ensureKeyObject(r,t,"wrapKey","encrypt");return checkKey(E,t),(0,u.publicEncrypt)({key:E,oaepHash:h,padding:p},s)},r.decrypt=(t,r,s)=>{let p=resolvePadding(t),h=resolveOaepHash(t),E=ensureKeyObject(r,t,"unwrapKey","decrypt");return checkKey(E,t),(0,u.privateDecrypt)({key:E,oaepHash:h,padding:p},s)}},8332:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default="node:crypto"},7543:(t,r,s)=>{"use strict";let u;Object.defineProperty(r,"__esModule",{value:!0});let p=s(6113),h=s(3837),E=s(7684),W=s(4553),J=s(4928),R=s(3764);u=p.sign.length>3?(0,h.promisify)(p.sign):p.sign;let sign=async(t,r,s)=>{let h=(0,R.default)(t,r,"sign");if(t.startsWith("HS")){let r=p.createHmac((0,W.default)(t),h);return r.update(s),r.digest()}return u((0,E.default)(t),s,(0,J.default)(t,h))};r.default=sign},9967:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let u=s(6113),p=u.timingSafeEqual;r.default=p},7986:(t,r,s)=>{"use strict";let u;Object.defineProperty(r,"__esModule",{value:!0});let p=s(6113),h=s(3837),E=s(7684),W=s(4928),J=s(7543),R=s(3764),K=s(804);u=p.verify.length>4&&K.oneShotCallback?(0,h.promisify)(p.verify):p.verify;let verify=async(t,r,s,h)=>{let K=(0,R.default)(t,r,"verify");if(t.startsWith("HS")){let r=await (0,J.default)(t,K,h);try{return p.timingSafeEqual(s,r)}catch{return!1}}let U=(0,E.default)(t),D=(0,W.default)(t,K);try{return await u(U,h,D,s)}catch{return!1}};r.default=verify},4636:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isCryptoKey=void 0;let u=s(6113),p=s(3837),h=u.webcrypto;r.default=h,r.isCryptoKey=p.types.isCryptoKey?t=>p.types.isCryptoKey(t):t=>!1},94:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deflate=r.inflate=void 0;let u=s(3837),p=s(9796),h=s(3872),E=(0,u.promisify)(p.inflateRaw),W=(0,u.promisify)(p.deflateRaw);r.inflate=t=>E(t,{maxOutputLength:25e4}).catch(()=>{throw new h.JWEDecompressionFailed}),r.deflate=t=>W(t)},5771:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.decode=r.encode=void 0;let u=s(4973);r.encode=u.encode,r.decode=u.decode},9e3:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.decodeJwt=void 0;let u=s(5771),p=s(6239),h=s(6515),E=s(3872);function decodeJwt(t){let r,s;if("string"!=typeof t)throw new E.JWTInvalid("JWTs must use Compact JWS serialization, JWT must be a string");let{1:W,length:J}=t.split(".");if(5===J)throw new E.JWTInvalid("Only JWTs using Compact JWS serialization can be decoded");if(3!==J)throw new E.JWTInvalid("Invalid JWT");if(!W)throw new E.JWTInvalid("JWTs must contain a payload");try{r=(0,u.decode)(W)}catch{throw new E.JWTInvalid("Failed to base64url decode the payload")}try{s=JSON.parse(p.decoder.decode(r))}catch{throw new E.JWTInvalid("Failed to parse the decoded payload as JSON")}if(!(0,h.default)(s))throw new E.JWTInvalid("Invalid JWT Claims Set");return s}r.decodeJwt=decodeJwt},9276:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.decodeProtectedHeader=void 0;let u=s(5771),p=s(6239),h=s(6515);function decodeProtectedHeader(t){let r;if("string"==typeof t){let s=t.split(".");(3===s.length||5===s.length)&&([r]=s)}else if("object"==typeof t&&t){if("protected"in t)r=t.protected;else throw TypeError("Token does not contain a Protected Header")}try{if("string"!=typeof r||!r)throw Error();let t=JSON.parse(p.decoder.decode((0,u.decode)(r)));if(!(0,h.default)(t))throw Error();return t}catch{throw TypeError("Invalid Token or Protected Header formatting")}}r.decodeProtectedHeader=decodeProtectedHeader},3872:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.JWSSignatureVerificationFailed=r.JWKSTimeout=r.JWKSMultipleMatchingKeys=r.JWKSNoMatchingKey=r.JWKSInvalid=r.JWKInvalid=r.JWTInvalid=r.JWSInvalid=r.JWEInvalid=r.JWEDecompressionFailed=r.JWEDecryptionFailed=r.JOSENotSupported=r.JOSEAlgNotAllowed=r.JWTExpired=r.JWTClaimValidationFailed=r.JOSEError=void 0;let JOSEError=class JOSEError extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(t){var r;super(t),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,null===(r=Error.captureStackTrace)||void 0===r||r.call(Error,this,this.constructor)}};r.JOSEError=JOSEError;let JWTClaimValidationFailed=class JWTClaimValidationFailed extends JOSEError{static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}constructor(t,r="unspecified",s="unspecified"){super(t),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=r,this.reason=s}};r.JWTClaimValidationFailed=JWTClaimValidationFailed;let JWTExpired=class JWTExpired extends JOSEError{static get code(){return"ERR_JWT_EXPIRED"}constructor(t,r="unspecified",s="unspecified"){super(t),this.code="ERR_JWT_EXPIRED",this.claim=r,this.reason=s}};r.JWTExpired=JWTExpired;let JOSEAlgNotAllowed=class JOSEAlgNotAllowed extends JOSEError{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}};r.JOSEAlgNotAllowed=JOSEAlgNotAllowed;let JOSENotSupported=class JOSENotSupported extends JOSEError{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}};r.JOSENotSupported=JOSENotSupported;let JWEDecryptionFailed=class JWEDecryptionFailed extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWE_DECRYPTION_FAILED",this.message="decryption operation failed"}static get code(){return"ERR_JWE_DECRYPTION_FAILED"}};r.JWEDecryptionFailed=JWEDecryptionFailed;let JWEDecompressionFailed=class JWEDecompressionFailed extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWE_DECOMPRESSION_FAILED",this.message="decompression operation failed"}static get code(){return"ERR_JWE_DECOMPRESSION_FAILED"}};r.JWEDecompressionFailed=JWEDecompressionFailed;let JWEInvalid=class JWEInvalid extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}static get code(){return"ERR_JWE_INVALID"}};r.JWEInvalid=JWEInvalid;let JWSInvalid=class JWSInvalid extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}};r.JWSInvalid=JWSInvalid;let JWTInvalid=class JWTInvalid extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}};r.JWTInvalid=JWTInvalid;let JWKInvalid=class JWKInvalid extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}static get code(){return"ERR_JWK_INVALID"}};r.JWKInvalid=JWKInvalid;let JWKSInvalid=class JWKSInvalid extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}static get code(){return"ERR_JWKS_INVALID"}};r.JWKSInvalid=JWKSInvalid;let JWKSNoMatchingKey=class JWKSNoMatchingKey extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWKS_NO_MATCHING_KEY",this.message="no applicable key found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_NO_MATCHING_KEY"}};r.JWKSNoMatchingKey=JWKSNoMatchingKey;let JWKSMultipleMatchingKeys=class JWKSMultipleMatchingKeys extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS",this.message="multiple matching keys found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_MULTIPLE_MATCHING_KEYS"}};r.JWKSMultipleMatchingKeys=JWKSMultipleMatchingKeys,Symbol.asyncIterator;let JWKSTimeout=class JWKSTimeout extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWKS_TIMEOUT",this.message="request timed out"}static get code(){return"ERR_JWKS_TIMEOUT"}};r.JWKSTimeout=JWKSTimeout;let JWSSignatureVerificationFailed=class JWSSignatureVerificationFailed extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",this.message="signature verification failed"}static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}};r.JWSSignatureVerificationFailed=JWSSignatureVerificationFailed},3604:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let u=s(8332);r.default=u.default},9215:(t,r,s)=>{"use strict";var u=s(2236);Object.defineProperty(r,"__esModule",{value:!0}),r.UnsupportedStrategy=r.UnknownError=r.OAuthCallbackError=r.MissingSecret=r.MissingAuthorize=r.MissingAdapterMethods=r.MissingAdapter=r.MissingAPIRoute=r.InvalidCallbackUrl=r.AccountNotLinkedError=void 0,r.adapterErrorHandler=adapterErrorHandler,r.capitalize=capitalize,r.eventsErrorHandler=eventsErrorHandler,r.upperSnake=upperSnake;var p=u(s(4364)),h=u(s(7524)),E=u(s(7709)),W=u(s(7521)),J=u(s(222)),R=u(s(5988)),K=u(s(2328)),U=u(s(2247)),D=u(s(1681));function _callSuper(t,r,s){return r=(0,K.default)(r),(0,R.default)(t,_isNativeReflectConstruct()?Reflect.construct(r,s||[],(0,K.default)(t).constructor):r.apply(t,s))}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_isNativeReflectConstruct=function(){return!!t})()}var G=r.UnknownError=function(t){function UnknownError(t){var r,s;return(0,W.default)(this,UnknownError),(s=_callSuper(this,UnknownError,[null!==(r=null==t?void 0:t.message)&&void 0!==r?r:t])).name="UnknownError",s.code=t.code,t instanceof Error&&(s.stack=t.stack),s}return(0,U.default)(UnknownError,t),(0,J.default)(UnknownError,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,stack:this.stack}}}])}((0,D.default)(Error));function upperSnake(t){return t.replace(/([A-Z])/g,"_$1").toUpperCase()}function capitalize(t){return"".concat(t[0].toUpperCase()).concat(t.slice(1))}function eventsErrorHandler(t,r){return Object.keys(t).reduce(function(s,u){return s[u]=(0,h.default)(p.default.mark(function _callee(){var s,h=arguments;return p.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.prev=0,s=t[u],p.next=4,s.apply(void 0,h);case 4:return p.abrupt("return",p.sent);case 7:p.prev=7,p.t0=p.catch(0),r.error("".concat(upperSnake(u),"_EVENT_ERROR"),p.t0);case 10:case"end":return p.stop()}},_callee,null,[[0,7]])})),s},{})}function adapterErrorHandler(t,r){if(t)return Object.keys(t).reduce(function(s,u){return s[u]=(0,h.default)(p.default.mark(function _callee2(){var s,h,E,W,J,R=arguments;return p.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:for(p.prev=0,h=Array(s=R.length),E=0;E<s;E++)h[E]=R[E];return r.debug("adapter_".concat(u),{args:h}),W=t[u],p.next=6,W.apply(void 0,h);case 6:return p.abrupt("return",p.sent);case 9:throw p.prev=9,p.t0=p.catch(0),r.error("adapter_error_".concat(u),p.t0),(J=new G(p.t0)).name="".concat(capitalize(u),"Error"),J;case 15:case"end":return p.stop()}},_callee2,null,[[0,9]])})),s},{})}r.OAuthCallbackError=function(t){function OAuthCallbackError(){var t;(0,W.default)(this,OAuthCallbackError);for(var r=arguments.length,s=Array(r),u=0;u<r;u++)s[u]=arguments[u];return t=_callSuper(this,OAuthCallbackError,[].concat(s)),(0,E.default)(t,"name","OAuthCallbackError"),t}return(0,U.default)(OAuthCallbackError,t),(0,J.default)(OAuthCallbackError)}(G),r.AccountNotLinkedError=function(t){function AccountNotLinkedError(){var t;(0,W.default)(this,AccountNotLinkedError);for(var r=arguments.length,s=Array(r),u=0;u<r;u++)s[u]=arguments[u];return t=_callSuper(this,AccountNotLinkedError,[].concat(s)),(0,E.default)(t,"name","AccountNotLinkedError"),t}return(0,U.default)(AccountNotLinkedError,t),(0,J.default)(AccountNotLinkedError)}(G),r.MissingAPIRoute=function(t){function MissingAPIRoute(){var t;(0,W.default)(this,MissingAPIRoute);for(var r=arguments.length,s=Array(r),u=0;u<r;u++)s[u]=arguments[u];return t=_callSuper(this,MissingAPIRoute,[].concat(s)),(0,E.default)(t,"name","MissingAPIRouteError"),(0,E.default)(t,"code","MISSING_NEXTAUTH_API_ROUTE_ERROR"),t}return(0,U.default)(MissingAPIRoute,t),(0,J.default)(MissingAPIRoute)}(G),r.MissingSecret=function(t){function MissingSecret(){var t;(0,W.default)(this,MissingSecret);for(var r=arguments.length,s=Array(r),u=0;u<r;u++)s[u]=arguments[u];return t=_callSuper(this,MissingSecret,[].concat(s)),(0,E.default)(t,"name","MissingSecretError"),(0,E.default)(t,"code","NO_SECRET"),t}return(0,U.default)(MissingSecret,t),(0,J.default)(MissingSecret)}(G),r.MissingAuthorize=function(t){function MissingAuthorize(){var t;(0,W.default)(this,MissingAuthorize);for(var r=arguments.length,s=Array(r),u=0;u<r;u++)s[u]=arguments[u];return t=_callSuper(this,MissingAuthorize,[].concat(s)),(0,E.default)(t,"name","MissingAuthorizeError"),(0,E.default)(t,"code","CALLBACK_CREDENTIALS_HANDLER_ERROR"),t}return(0,U.default)(MissingAuthorize,t),(0,J.default)(MissingAuthorize)}(G),r.MissingAdapter=function(t){function MissingAdapter(){var t;(0,W.default)(this,MissingAdapter);for(var r=arguments.length,s=Array(r),u=0;u<r;u++)s[u]=arguments[u];return t=_callSuper(this,MissingAdapter,[].concat(s)),(0,E.default)(t,"name","MissingAdapterError"),(0,E.default)(t,"code","EMAIL_REQUIRES_ADAPTER_ERROR"),t}return(0,U.default)(MissingAdapter,t),(0,J.default)(MissingAdapter)}(G),r.MissingAdapterMethods=function(t){function MissingAdapterMethods(){var t;(0,W.default)(this,MissingAdapterMethods);for(var r=arguments.length,s=Array(r),u=0;u<r;u++)s[u]=arguments[u];return t=_callSuper(this,MissingAdapterMethods,[].concat(s)),(0,E.default)(t,"name","MissingAdapterMethodsError"),(0,E.default)(t,"code","MISSING_ADAPTER_METHODS_ERROR"),t}return(0,U.default)(MissingAdapterMethods,t),(0,J.default)(MissingAdapterMethods)}(G),r.UnsupportedStrategy=function(t){function UnsupportedStrategy(){var t;(0,W.default)(this,UnsupportedStrategy);for(var r=arguments.length,s=Array(r),u=0;u<r;u++)s[u]=arguments[u];return t=_callSuper(this,UnsupportedStrategy,[].concat(s)),(0,E.default)(t,"name","UnsupportedStrategyError"),(0,E.default)(t,"code","CALLBACK_CREDENTIALS_JWT_ERROR"),t}return(0,U.default)(UnsupportedStrategy,t),(0,J.default)(UnsupportedStrategy)}(G),r.InvalidCallbackUrl=function(t){function InvalidCallbackUrl(){var t;(0,W.default)(this,InvalidCallbackUrl);for(var r=arguments.length,s=Array(r),u=0;u<r;u++)s[u]=arguments[u];return t=_callSuper(this,InvalidCallbackUrl,[].concat(s)),(0,E.default)(t,"name","InvalidCallbackUrl"),(0,E.default)(t,"code","INVALID_CALLBACK_URL_ERROR"),t}return(0,U.default)(InvalidCallbackUrl,t),(0,J.default)(InvalidCallbackUrl)}(G)},7367:(t,r,s)=>{"use strict";var u=s(2236);Object.defineProperty(r,"__esModule",{value:!0}),r.AuthHandler=AuthHandler;var p=_interopRequireWildcard(s(8562)),h=s(2119),E=_interopRequireWildcard(s(3541)),W=u(s(9280)),J=s(7894),R=s(6685),K=s(371),U=s(3464);function _getRequireWildcardCache(t){if("function"!=typeof WeakMap)return null;var r=new WeakMap,s=new WeakMap;return(_getRequireWildcardCache=function(t){return t?s:r})(t)}function _interopRequireWildcard(t,r){if(!r&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var s=_getRequireWildcardCache(r);if(s&&s.has(t))return s.get(t);var u={__proto__:null},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var h in t)if("default"!==h&&({}).hasOwnProperty.call(t,h)){var E=p?Object.getOwnPropertyDescriptor(t,h):null;E&&(E.get||E.set)?Object.defineProperty(u,h,E):u[h]=t[h]}return u.default=t,s&&s.set(t,u),u}async function getBody(t){try{return await t.json()}catch(t){}}async function toInternalRequest(t){var r,s,u,p;if(t instanceof Request){let r=new URL(t.url),E=r.pathname.split("/").slice(3),W=Object.fromEntries(t.headers),J=Object.fromEntries(r.searchParams);return J.nextauth=E,{action:E[0],method:t.method,headers:W,body:await getBody(t),cookies:(0,U.parse)(null!==(s=t.headers.get("cookie"))&&void 0!==s?s:""),providerId:E[1],error:null!==(u=r.searchParams.get("error"))&&void 0!==u?u:E[1],origin:(0,h.detectOrigin)(null!==(p=W["x-forwarded-host"])&&void 0!==p?p:W.host,W["x-forwarded-proto"]),query:J}}let{headers:E}=t,W=null!==(r=null==E?void 0:E["x-forwarded-host"])&&void 0!==r?r:null==E?void 0:E.host;return t.origin=(0,h.detectOrigin)(W,null==E?void 0:E["x-forwarded-proto"]),t}async function AuthHandler(t){var r,s,u,h,U,D,G;let{options:Y,req:X}=t,Z=await toInternalRequest(X);(0,p.setLogger)(Y.logger,Y.debug);let Q=(0,R.assertConfig)({options:Y,req:Z});if(Array.isArray(Q))Q.forEach(p.default.warn);else if(Q instanceof Error){if(p.default.error(Q.code,Q),!["signin","signout","error","verify-request"].includes(Z.action)||"GET"!==Z.method)return{status:500,headers:[{key:"Content-Type",value:"application/json"}],body:{message:"There is a problem with the server configuration. Check the server logs for more information."}};let{pages:t,theme:r}=Y,s=(null==t?void 0:t.error)&&(null===(U=Z.query)||void 0===U||null===(U=U.callbackUrl)||void 0===U?void 0:U.startsWith(t.error));if(!(null!=t&&t.error)||s){s&&p.default.error("AUTH_ON_ERROR_PAGE_ERROR",Error(`The error page ${null==t?void 0:t.error} should not require authentication`));let u=(0,W.default)({theme:r});return u.error({error:"configuration"})}return{redirect:`${t.error}?error=Configuration`}}let{action:ee,providerId:et,error:er,method:en="GET"}=Z,{options:ei,cookies:eo}=await (0,J.init)({authOptions:Y,action:ee,providerId:et,origin:Z.origin,callbackUrl:null!==(r=null===(s=Z.body)||void 0===s?void 0:s.callbackUrl)&&void 0!==r?r:null===(u=Z.query)||void 0===u?void 0:u.callbackUrl,csrfToken:null===(h=Z.body)||void 0===h?void 0:h.csrfToken,cookies:Z.cookies,isPost:"POST"===en}),ea=new K.SessionStore(ei.cookies.sessionToken,Z,ei.logger);if("GET"===en){let t=(0,W.default)({...ei,query:Z.query,cookies:eo}),{pages:r}=ei;switch(ee){case"providers":return await E.providers(ei.providers);case"session":{let t=await E.session({options:ei,sessionStore:ea});return t.cookies&&eo.push(...t.cookies),{...t,cookies:eo}}case"csrf":return{headers:[{key:"Content-Type",value:"application/json"}],body:{csrfToken:ei.csrfToken},cookies:eo};case"signin":if(r.signIn){let t=`${r.signIn}${r.signIn.includes("?")?"&":"?"}callbackUrl=${encodeURIComponent(ei.callbackUrl)}`;return er&&(t=`${t}&error=${encodeURIComponent(er)}`),{redirect:t,cookies:eo}}return t.signin();case"signout":if(r.signOut)return{redirect:r.signOut,cookies:eo};return t.signout();case"callback":if(ei.provider){let t=await E.callback({body:Z.body,query:Z.query,headers:Z.headers,cookies:Z.cookies,method:en,options:ei,sessionStore:ea});return t.cookies&&eo.push(...t.cookies),{...t,cookies:eo}}break;case"verify-request":if(r.verifyRequest)return{redirect:r.verifyRequest,cookies:eo};return t.verifyRequest();case"error":if(["Signin","OAuthSignin","OAuthCallback","OAuthCreateAccount","EmailCreateAccount","Callback","OAuthAccountNotLinked","EmailSignin","CredentialsSignin","SessionRequired"].includes(er))return{redirect:`${ei.url}/signin?error=${er}`,cookies:eo};if(r.error)return{redirect:`${r.error}${r.error.includes("?")?"&":"?"}error=${er}`,cookies:eo};return t.error({error:er})}}else if("POST"===en)switch(ee){case"signin":if(ei.csrfTokenVerified&&ei.provider){let t=await E.signin({query:Z.query,body:Z.body,options:ei});return t.cookies&&eo.push(...t.cookies),{...t,cookies:eo}}return{redirect:`${ei.url}/signin?csrf=true`,cookies:eo};case"signout":if(ei.csrfTokenVerified){let t=await E.signout({options:ei,sessionStore:ea});return t.cookies&&eo.push(...t.cookies),{...t,cookies:eo}}return{redirect:`${ei.url}/signout?csrf=true`,cookies:eo};case"callback":if(ei.provider){if("credentials"===ei.provider.type&&!ei.csrfTokenVerified)return{redirect:`${ei.url}/signin?csrf=true`,cookies:eo};let t=await E.callback({body:Z.body,query:Z.query,headers:Z.headers,cookies:Z.cookies,method:en,options:ei,sessionStore:ea});return t.cookies&&eo.push(...t.cookies),{...t,cookies:eo}}break;case"_log":if(Y.logger)try{let{code:t,level:r,...s}=null!==(D=Z.body)&&void 0!==D?D:{};p.default[r](t,s)}catch(t){p.default.error("LOGGER_ERROR",t)}return{};case"session":if(ei.csrfTokenVerified){let t=await E.session({options:ei,sessionStore:ea,newSession:null===(G=Z.body)||void 0===G?void 0:G.data,isUpdate:!0});return t.cookies&&eo.push(...t.cookies),{...t,cookies:eo}}return{status:400,body:{},cookies:eo}}return{status:400,body:`Error: This action with HTTP ${en} is not supported by NextAuth.js`}}},7894:(t,r,s)=>{"use strict";var u=s(2236);Object.defineProperty(r,"__esModule",{value:!0}),r.init=init;var p=s(6113),h=u(s(8562)),E=s(9215),W=u(s(2798)),J=s(5353),R=_interopRequireWildcard(s(371)),K=_interopRequireWildcard(s(4046)),U=s(2251),D=s(7168),G=s(124),Y=u(s(5431));function _getRequireWildcardCache(t){if("function"!=typeof WeakMap)return null;var r=new WeakMap,s=new WeakMap;return(_getRequireWildcardCache=function(t){return t?s:r})(t)}function _interopRequireWildcard(t,r){if(!r&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var s=_getRequireWildcardCache(r);if(s&&s.has(t))return s.get(t);var u={__proto__:null},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var h in t)if("default"!==h&&({}).hasOwnProperty.call(t,h)){var E=p?Object.getOwnPropertyDescriptor(t,h):null;E&&(E.get||E.set)?Object.defineProperty(u,h,E):u[h]=t[h]}return u.default=t,s&&s.set(t,u),u}async function init({authOptions:t,providerId:r,action:s,origin:u,cookies:X,callbackUrl:Z,csrfToken:Q,isPost:ee}){var et,er;let en=(0,Y.default)(u),ei=(0,J.createSecret)({authOptions:t,url:en}),{providers:eo,provider:ea}=(0,W.default)({providers:t.providers,url:en,providerId:r}),es={debug:!1,pages:{},theme:{colorScheme:"auto",logo:"",brandColor:"",buttonText:""},...t,url:en,action:s,provider:ea,cookies:{...R.defaultCookies(null!==(et=t.useSecureCookies)&&void 0!==et?et:en.base.startsWith("https://")),...t.cookies},secret:ei,providers:eo,session:{strategy:t.adapter?"database":"jwt",maxAge:2592e3,updateAge:86400,generateSessionToken:()=>{var t;return null!==(t=null===p.randomUUID||void 0===p.randomUUID?void 0:(0,p.randomUUID)())&&void 0!==t?t:(0,p.randomBytes)(32).toString("hex")},...t.session},jwt:{secret:ei,maxAge:2592e3,encode:K.encode,decode:K.decode,...t.jwt},events:(0,E.eventsErrorHandler)(null!==(er=t.events)&&void 0!==er?er:{},h.default),adapter:(0,E.adapterErrorHandler)(t.adapter,h.default),callbacks:{...U.defaultCallbacks,...t.callbacks},logger:h.default,callbackUrl:en.origin},el=[],{csrfToken:ec,cookie:eu,csrfTokenVerified:ed}=(0,D.createCSRFToken)({options:es,cookieValue:null==X?void 0:X[es.cookies.csrfToken.name],isPost:ee,bodyValue:Q});es.csrfToken=ec,es.csrfTokenVerified=ed,eu&&el.push({name:es.cookies.csrfToken.name,value:eu,options:es.cookies.csrfToken.options});let{callbackUrl:ep,callbackUrlCookie:eh}=await (0,G.createCallbackUrl)({options:es,cookieValue:null==X?void 0:X[es.cookies.callbackUrl.name],paramValue:Z});return es.callbackUrl=ep,eh&&el.push({name:es.cookies.callbackUrl.name,value:eh,options:es.cookies.callbackUrl.options}),{options:es,cookies:el}}},6685:(t,r,s)=>{"use strict";var u=s(2236);Object.defineProperty(r,"__esModule",{value:!0}),r.assertConfig=assertConfig;var p=s(9215),h=u(s(5431)),E=s(371);let W=!1;function isValidHttpUrl(t,r){try{return/^https?:/.test(new URL(t,t.startsWith("/")?r:void 0).protocol)}catch(t){return!1}}function assertConfig(t){var r,s,u,J,R,K,U;let D,G,Y;let{options:X,req:Z}=t,Q=[];if(!W&&(Z.origin||Q.push("NEXTAUTH_URL"),X.secret,X.debug&&Q.push("DEBUG_ENABLED")),!X.secret)return new p.MissingSecret("Please define a `secret` in production.");if(!(null!==(r=Z.query)&&void 0!==r&&r.nextauth)&&!Z.action)return new p.MissingAPIRoute("Cannot find [...nextauth].{js,ts} in `/pages/api/auth`. Make sure the filename is written correctly.");let ee=null===(s=Z.query)||void 0===s?void 0:s.callbackUrl,et=(0,h.default)(Z.origin);if(ee&&!isValidHttpUrl(ee,et.base))return new p.InvalidCallbackUrl(`Invalid callback URL. Received: ${ee}`);let{callbackUrl:er}=(0,E.defaultCookies)(null!==(u=X.useSecureCookies)&&void 0!==u?u:et.base.startsWith("https://")),en=null===(J=Z.cookies)||void 0===J?void 0:J[null!==(R=null===(K=X.cookies)||void 0===K||null===(K=K.callbackUrl)||void 0===K?void 0:K.name)&&void 0!==R?R:er.name];if(en&&!isValidHttpUrl(en,et.base))return new p.InvalidCallbackUrl(`Invalid callback URL. Received: ${en}`);for(let t of X.providers)"credentials"===t.type?D=!0:"email"===t.type?G=!0:"twitter"===t.id&&"2.0"===t.version&&(Y=!0);if(D){let t=(null===(U=X.session)||void 0===U?void 0:U.strategy)==="database",r=!X.providers.some(t=>"credentials"!==t.type);if(t&&r)return new p.UnsupportedStrategy("Signin in with credentials only supported if JWT strategy is enabled");let s=X.providers.some(t=>"credentials"===t.type&&!t.authorize);if(s)return new p.MissingAuthorize("Must define an authorize() handler to use credentials authentication provider")}if(G){let{adapter:t}=X;if(!t)return new p.MissingAdapter("E-mail login requires an adapter.");let r=["createVerificationToken","useVerificationToken","getUserByEmail"].filter(r=>!t[r]);if(r.length)return new p.MissingAdapterMethods(`Required adapter methods were missing: ${r.join(", ")}`)}return W||(Y&&Q.push("TWITTER_OAUTH_2_BETA"),W=!0),Q}},8682:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=callbackHandler;var u=s(9215),p=s(5353);async function callbackHandler(t){var r,s,h,E,W,J;let{sessionToken:R,profile:K,account:U,options:D}=t;if(!(null!=U&&U.providerAccountId)||!U.type)throw Error("Missing or invalid provider account");if(!["email","oauth"].includes(U.type))throw Error("Provider not supported");let{adapter:G,jwt:Y,events:X,session:{strategy:Z,generateSessionToken:Q}}=D;if(!G)return{user:K,account:U};let{createUser:ee,updateUser:et,getUser:er,getUserByAccount:en,getUserByEmail:ei,linkAccount:eo,createSession:ea,getSessionAndUser:es,deleteSession:el}=G,ec=null,eu=null,ed=!1,ep="jwt"===Z;if(R){if(ep)try{(ec=await Y.decode({...Y,token:R}))&&"sub"in ec&&ec.sub&&(eu=await er(ec.sub))}catch(t){}else{let t=await es(R);t&&(ec=t.session,eu=t.user)}}if("email"===U.type){let t=await ei(K.email);if(t)(null===(r=eu)||void 0===r?void 0:r.id)!==t.id&&!ep&&R&&await el(R),eu=await et({id:t.id,emailVerified:new Date}),await (null===(s=X.updateUser)||void 0===s?void 0:s.call(X,{user:eu}));else{let{id:t,...r}={...K,emailVerified:new Date};eu=await ee(r),await (null===(h=X.createUser)||void 0===h?void 0:h.call(X,{user:eu})),ed=!0}return{session:ec=ep?{}:await ea({sessionToken:await Q(),userId:eu.id,expires:(0,p.fromDate)(D.session.maxAge)}),user:eu,isNewUser:ed}}if("oauth"===U.type){let t=await en({providerAccountId:U.providerAccountId,provider:U.provider});if(t){if(eu){if(t.id===eu.id)return{session:ec,user:eu,isNewUser:ed};throw new u.AccountNotLinkedError("The account is already associated with another user")}return{session:ec=ep?{}:await ea({sessionToken:await Q(),userId:t.id,expires:(0,p.fromDate)(D.session.maxAge)}),user:t,isNewUser:ed}}{if(eu)return await eo({...U,userId:eu.id}),await (null===(J=X.linkAccount)||void 0===J?void 0:J.call(X,{user:eu,account:U,profile:K})),{session:ec,user:eu,isNewUser:ed};let t=K.email?await ei(K.email):null;if(t){let r=D.provider;if(null!=r&&r.allowDangerousEmailAccountLinking)eu=t;else throw new u.AccountNotLinkedError("Another account already exists with the same e-mail address")}else{let{id:t,...r}={...K,emailVerified:null};eu=await ee(r)}return await (null===(E=X.createUser)||void 0===E?void 0:E.call(X,{user:eu})),await eo({...U,userId:eu.id}),await (null===(W=X.linkAccount)||void 0===W?void 0:W.call(X,{user:eu,account:U,profile:K})),{session:ec=ep?{}:await ea({sessionToken:await Q(),userId:eu.id,expires:(0,p.fromDate)(D.session.maxAge)}),user:eu,isNewUser:!0}}}throw Error("Unsupported account type")}},124:(t,r)=>{"use strict";async function createCallbackUrl({options:t,paramValue:r,cookieValue:s}){let{url:u,callbacks:p}=t,h=u.origin;return r?h=await p.redirect({url:r,baseUrl:u.origin}):s&&(h=await p.redirect({url:s,baseUrl:u.origin})),{callbackUrl:h,callbackUrlCookie:h!==s?h:void 0}}Object.defineProperty(r,"__esModule",{value:!0}),r.createCallbackUrl=createCallbackUrl},371:(t,r)=>{"use strict";function _classPrivateMethodInitSpec(t,r){_checkPrivateRedeclaration(t,r),r.add(t)}function _classPrivateFieldInitSpec(t,r,s){_checkPrivateRedeclaration(t,r),r.set(t,s)}function _checkPrivateRedeclaration(t,r){if(r.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldGet(t,r){return t.get(_assertClassBrand(t,r))}function _classPrivateFieldSet(t,r,s){return t.set(_assertClassBrand(t,r),s),s}function _assertClassBrand(t,r,s){if("function"==typeof t?t===r:t.has(r))return arguments.length<3?r:s;throw TypeError("Private element is not present on this object")}function defaultCookies(t){let r=t?"__Secure-":"";return{sessionToken:{name:`${r}next-auth.session-token`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:t}},callbackUrl:{name:`${r}next-auth.callback-url`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:t}},csrfToken:{name:`${t?"__Host-":""}next-auth.csrf-token`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:t}},pkceCodeVerifier:{name:`${r}next-auth.pkce.code_verifier`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:t,maxAge:900}},state:{name:`${r}next-auth.state`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:t,maxAge:900}},nonce:{name:`${r}next-auth.nonce`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:t}}}}Object.defineProperty(r,"__esModule",{value:!0}),r.SessionStore=void 0,r.defaultCookies=defaultCookies;var s=new WeakMap,u=new WeakMap,p=new WeakMap,h=new WeakSet;let SessionStore=class SessionStore{constructor(t,r,E){_classPrivateMethodInitSpec(this,h),_classPrivateFieldInitSpec(this,s,{}),_classPrivateFieldInitSpec(this,u,void 0),_classPrivateFieldInitSpec(this,p,void 0),_classPrivateFieldSet(p,this,E),_classPrivateFieldSet(u,this,t);let{cookies:W}=r,{name:J}=t;if("function"==typeof(null==W?void 0:W.getAll))for(let{name:t,value:r}of W.getAll())t.startsWith(J)&&(_classPrivateFieldGet(s,this)[t]=r);else if(W instanceof Map)for(let t of W.keys())t.startsWith(J)&&(_classPrivateFieldGet(s,this)[t]=W.get(t));else for(let t in W)t.startsWith(J)&&(_classPrivateFieldGet(s,this)[t]=W[t])}get value(){let t=Object.keys(_classPrivateFieldGet(s,this)).sort((t,r)=>{var s,u;let p=parseInt(null!==(s=t.split(".").pop())&&void 0!==s?s:"0"),h=parseInt(null!==(u=r.split(".").pop())&&void 0!==u?u:"0");return p-h});return t.map(t=>_classPrivateFieldGet(s,this)[t]).join("")}chunk(t,r){let s=_assertClassBrand(h,this,_clean).call(this),p=_assertClassBrand(h,this,_chunk).call(this,{name:_classPrivateFieldGet(u,this).name,value:t,options:{..._classPrivateFieldGet(u,this).options,...r}});for(let t of p)s[t.name]=t;return Object.values(s)}clean(){return Object.values(_assertClassBrand(h,this,_clean).call(this))}};function _chunk(t){let r=Math.ceil(t.value.length/3933);if(1===r)return _classPrivateFieldGet(s,this)[t.name]=t.value,[t];let u=[];for(let p=0;p<r;p++){let r=`${t.name}.${p}`,h=t.value.substr(3933*p,3933);u.push({...t,name:r,value:h}),_classPrivateFieldGet(s,this)[r]=h}return _classPrivateFieldGet(p,this).debug("CHUNKING_SESSION_COOKIE",{message:"Session cookie exceeds allowed 4096 bytes.",emptyCookieSize:163,valueSize:t.value.length,chunks:u.map(t=>t.value.length+163)}),u}function _clean(){let t={};for(let p in _classPrivateFieldGet(s,this)){var r;null===(r=_classPrivateFieldGet(s,this))||void 0===r||delete r[p],t[p]={name:p,value:"",options:{..._classPrivateFieldGet(u,this).options,maxAge:0}}}return t}r.SessionStore=SessionStore},7168:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createCSRFToken=createCSRFToken;var u=s(6113);function createCSRFToken({options:t,cookieValue:r,isPost:s,bodyValue:p}){if(r){let[h,E]=r.split("|"),W=(0,u.createHash)("sha256").update(`${h}${t.secret}`).digest("hex");if(E===W){let t=s&&h===p;return{csrfTokenVerified:t,csrfToken:h}}}let h=(0,u.randomBytes)(32).toString("hex"),E=(0,u.createHash)("sha256").update(`${h}${t.secret}`).digest("hex"),W=`${h}|${E}`;return{cookie:W,csrfToken:h}}},2251:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.defaultCallbacks=void 0,r.defaultCallbacks={signIn:()=>!0,redirect:({url:t,baseUrl:r})=>t.startsWith("/")?`${r}${t}`:new URL(t).origin===r?t:r,session:({session:t})=>t,jwt:({token:t})=>t}},4685:(t,r)=>{"use strict";async function getAdapterUserFromEmail({email:t,adapter:r}){let{getUserByEmail:s}=r,u=t?await s(t):null;return u||{id:t,email:t,emailVerified:null}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=getAdapterUserFromEmail},889:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=email;var u=s(6113),p=s(5353);async function email(t,r){var s,h,E,W;let{url:J,adapter:R,provider:K,callbackUrl:U,theme:D}=r,G=null!==(s=await (null===(h=K.generateVerificationToken)||void 0===h?void 0:h.call(K)))&&void 0!==s?s:(0,u.randomBytes)(32).toString("hex"),Y=new Date(Date.now()+(null!==(E=K.maxAge)&&void 0!==E?E:86400)*1e3),X=new URLSearchParams({callbackUrl:U,token:G,email:t}),Z=`${J}/callback/${K.id}?${X}`;return await Promise.all([K.sendVerificationRequest({identifier:t,token:G,expires:Y,url:Z,provider:K,theme:D}),null===(W=R.createVerificationToken)||void 0===W?void 0:W.call(R,{identifier:t,token:(0,p.hashToken)(G,r),expires:Y})]),`${J}/verify-request?${new URLSearchParams({provider:K.id,type:K.type})}`}},5501:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=getAuthorizationUrl;var u=s(7766),p=s(1041),h=_interopRequireWildcard(s(8482));function _getRequireWildcardCache(t){if("function"!=typeof WeakMap)return null;var r=new WeakMap,s=new WeakMap;return(_getRequireWildcardCache=function(t){return t?s:r})(t)}function _interopRequireWildcard(t,r){if(!r&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var s=_getRequireWildcardCache(r);if(s&&s.has(t))return s.get(t);var u={__proto__:null},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var h in t)if("default"!==h&&({}).hasOwnProperty.call(t,h)){var E=p?Object.getOwnPropertyDescriptor(t,h):null;E&&(E.get||E.set)?Object.defineProperty(u,h,E):u[h]=t[h]}return u.default=t,s&&s.set(t,u),u}async function getAuthorizationUrl({options:t,query:r}){var s,E,W;let{logger:J,provider:R}=t,K={};if("string"==typeof R.authorization){let t=new URL(R.authorization),r=Object.fromEntries(t.searchParams);K={...K,...r}}else K={...K,...null===(E=R.authorization)||void 0===E?void 0:E.params};if(K={...K,...r},null!==(s=R.version)&&void 0!==s&&s.startsWith("1.")){let r=(0,p.oAuth1Client)(t),s=await r.getOAuthRequestToken(K),u=`${null===(W=R.authorization)||void 0===W?void 0:W.url}?${new URLSearchParams({oauth_token:s.oauth_token,oauth_token_secret:s.oauth_token_secret,...s.params})}`;return p.oAuth1TokenStore.set(s.oauth_token,s.oauth_token_secret),J.debug("GET_AUTHORIZATION_URL",{url:u,provider:R}),{redirect:u}}let U=await (0,u.openidClient)(t),D=K,G=[];await h.state.create(t,G,D),await h.pkce.create(t,G,D),await h.nonce.create(t,G,D);let Y=U.authorizationUrl(D);return J.debug("GET_AUTHORIZATION_URL",{url:Y,cookies:G,provider:R}),{redirect:Y,cookies:G}}},5045:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=oAuthCallback;var u=s(5715),p=s(7766),h=s(1041),E=_interopRequireWildcard(s(8482)),W=s(9215);function _getRequireWildcardCache(t){if("function"!=typeof WeakMap)return null;var r=new WeakMap,s=new WeakMap;return(_getRequireWildcardCache=function(t){return t?s:r})(t)}function _interopRequireWildcard(t,r){if(!r&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var s=_getRequireWildcardCache(r);if(s&&s.has(t))return s.get(t);var u={__proto__:null},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var h in t)if("default"!==h&&({}).hasOwnProperty.call(t,h)){var E=p?Object.getOwnPropertyDescriptor(t,h):null;E&&(E.get||E.set)?Object.defineProperty(u,h,E):u[h]=t[h]}return u.default=t,s&&s.set(t,u),u}async function oAuthCallback(t){var r,s,J,R,K,U;let{options:D,query:G,body:Y,method:X,cookies:Z}=t,{logger:Q,provider:ee}=D,et=null!==(r=null==Y?void 0:Y.error)&&void 0!==r?r:null==G?void 0:G.error;if(et){let t=Error(et);throw Q.error("OAUTH_CALLBACK_HANDLER_ERROR",{error:t,error_description:null==G?void 0:G.error_description,providerId:ee.id}),Q.debug("OAUTH_CALLBACK_HANDLER_ERROR",{body:Y}),t}if(null!==(s=ee.version)&&void 0!==s&&s.startsWith("1."))try{let t=await (0,h.oAuth1Client)(D),{oauth_token:r,oauth_verifier:s}=null!=G?G:{},u=await t.getOAuthAccessToken(r,h.oAuth1TokenStore.get(r),s),p=await t.get(ee.profileUrl,u.oauth_token,u.oauth_token_secret);"string"==typeof p&&(p=JSON.parse(p));let E=await getProfile({profile:p,tokens:u,provider:ee,logger:Q});return{...E,cookies:[]}}catch(t){throw Q.error("OAUTH_V1_GET_ACCESS_TOKEN_ERROR",t),t}null!=G&&G.oauth_token&&h.oAuth1TokenStore.delete(G.oauth_token);try{let t,r;let s=await (0,p.openidClient)(D),h={},W=[];await E.state.use(Z,W,D,h),await E.pkce.use(Z,W,D,h),await E.nonce.use(Z,W,D,h);let et={...s.callbackParams({url:`http://n?${new URLSearchParams(G)}`,body:Y,method:X}),...null===(J=ee.token)||void 0===J?void 0:J.params};if(null!==(R=ee.token)&&void 0!==R&&R.request){let r=await ee.token.request({provider:ee,params:et,checks:h,client:s});t=new u.TokenSet(r.tokens)}else t=ee.idToken?await s.callback(ee.callbackUrl,et,h):await s.oauthCallback(ee.callbackUrl,et,h);Array.isArray(t.scope)&&(t.scope=t.scope.join(" ")),r=null!==(K=ee.userinfo)&&void 0!==K&&K.request?await ee.userinfo.request({provider:ee,tokens:t,client:s}):ee.idToken?t.claims():await s.userinfo(t,{params:null===(U=ee.userinfo)||void 0===U?void 0:U.params});let er=await getProfile({profile:r,provider:ee,tokens:t,logger:Q});return{...er,cookies:W}}catch(t){throw new W.OAuthCallbackError(t)}}async function getProfile({profile:t,tokens:r,provider:s,logger:u}){try{var p;u.debug("PROFILE_DATA",{OAuthProfile:t});let h=await s.profile(t,r);if(h.email=null===(p=h.email)||void 0===p?void 0:p.toLowerCase(),!h.id)throw TypeError(`Profile id is missing in ${s.name} OAuth profile response`);return{profile:h,account:{provider:s.id,type:s.type,providerAccountId:h.id.toString(),...r},OAuthProfile:t}}catch(r){u.error("OAUTH_PARSE_PROFILE_ERROR",{error:r,OAuthProfile:t})}}},8482:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.pkce=r.nonce=r.PKCE_CODE_CHALLENGE_METHOD=void 0,r.signCookie=signCookie,r.state=void 0;var u=s(5715),p=_interopRequireWildcard(s(4046));function _getRequireWildcardCache(t){if("function"!=typeof WeakMap)return null;var r=new WeakMap,s=new WeakMap;return(_getRequireWildcardCache=function(t){return t?s:r})(t)}function _interopRequireWildcard(t,r){if(!r&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var s=_getRequireWildcardCache(r);if(s&&s.has(t))return s.get(t);var u={__proto__:null},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var h in t)if("default"!==h&&({}).hasOwnProperty.call(t,h)){var E=p?Object.getOwnPropertyDescriptor(t,h):null;E&&(E.get||E.set)?Object.defineProperty(u,h,E):u[h]=t[h]}return u.default=t,s&&s.set(t,u),u}async function signCookie(t,r,s,u){let{cookies:h,logger:E}=u;E.debug(`CREATE_${t.toUpperCase()}`,{value:r,maxAge:s});let{name:W}=h[t],J=new Date;return J.setTime(J.getTime()+1e3*s),{name:W,value:await p.encode({...u.jwt,maxAge:s,token:{value:r},salt:W}),options:{...h[t].options,expires:J}}}let h=r.PKCE_CODE_CHALLENGE_METHOD="S256";r.pkce={async create(t,r,s){var p,E;if(!(null!==(p=t.provider)&&void 0!==p&&null!==(p=p.checks)&&void 0!==p&&p.includes("pkce")))return;let W=u.generators.codeVerifier(),J=u.generators.codeChallenge(W);s.code_challenge=J,s.code_challenge_method=h;let R=null!==(E=t.cookies.pkceCodeVerifier.options.maxAge)&&void 0!==E?E:900;r.push(await signCookie("pkceCodeVerifier",W,R,t))},async use(t,r,s,u){var h;if(!(null!==(h=s.provider)&&void 0!==h&&null!==(h=h.checks)&&void 0!==h&&h.includes("pkce")))return;let E=null==t?void 0:t[s.cookies.pkceCodeVerifier.name];if(!E)throw TypeError("PKCE code_verifier cookie was missing.");let{name:W}=s.cookies.pkceCodeVerifier,J=await p.decode({...s.jwt,token:E,salt:W});if(!(null!=J&&J.value))throw TypeError("PKCE code_verifier value could not be parsed.");r.push({name:W,value:"",options:{...s.cookies.pkceCodeVerifier.options,maxAge:0}}),u.code_verifier=J.value}},r.state={async create(t,r,s){var p,h;if(!(null!==(p=t.provider.checks)&&void 0!==p&&p.includes("state")))return;let E=u.generators.state();s.state=E;let W=null!==(h=t.cookies.state.options.maxAge)&&void 0!==h?h:900;r.push(await signCookie("state",E,W,t))},async use(t,r,s,u){var h;if(!(null!==(h=s.provider.checks)&&void 0!==h&&h.includes("state")))return;let E=null==t?void 0:t[s.cookies.state.name];if(!E)throw TypeError("State cookie was missing.");let{name:W}=s.cookies.state,J=await p.decode({...s.jwt,token:E,salt:W});if(!(null!=J&&J.value))throw TypeError("State value could not be parsed.");r.push({name:W,value:"",options:{...s.cookies.state.options,maxAge:0}}),u.state=J.value}},r.nonce={async create(t,r,s){var p,h;if(!(null!==(p=t.provider.checks)&&void 0!==p&&p.includes("nonce")))return;let E=u.generators.nonce();s.nonce=E;let W=null!==(h=t.cookies.nonce.options.maxAge)&&void 0!==h?h:900;r.push(await signCookie("nonce",E,W,t))},async use(t,r,s,u){var h;if(!(null!==(h=s.provider)&&void 0!==h&&null!==(h=h.checks)&&void 0!==h&&h.includes("nonce")))return;let E=null==t?void 0:t[s.cookies.nonce.name];if(!E)throw TypeError("Nonce cookie was missing.");let{name:W}=s.cookies.nonce,J=await p.decode({...s.jwt,token:E,salt:W});if(!(null!=J&&J.value))throw TypeError("Nonce value could not be parsed.");r.push({name:W,value:"",options:{...s.cookies.nonce.options,maxAge:0}}),u.nonce=J.value}}},1041:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.oAuth1Client=oAuth1Client,r.oAuth1TokenStore=void 0;var u=s(5256);function oAuth1Client(t){var r,s;let p=t.provider,h=new u.OAuth(p.requestTokenUrl,p.accessTokenUrl,p.clientId,p.clientSecret,null!==(r=p.version)&&void 0!==r?r:"1.0",p.callbackUrl,null!==(s=p.encoding)&&void 0!==s?s:"HMAC-SHA1"),E=h.get.bind(h);h.get=async(...t)=>await new Promise((r,s)=>{E(...t,(t,u)=>{if(t)return s(t);r(u)})});let W=h.getOAuthAccessToken.bind(h);h.getOAuthAccessToken=async(...t)=>await new Promise((r,s)=>{W(...t,(t,u,p)=>{if(t)return s(t);r({oauth_token:u,oauth_token_secret:p})})});let J=h.getOAuthRequestToken.bind(h);return h.getOAuthRequestToken=async(t={})=>await new Promise((r,s)=>{J(t,(t,u,p,h)=>{if(t)return s(t);r({oauth_token:u,oauth_token_secret:p,params:h})})}),h}r.oAuth1TokenStore=new Map},7766:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.openidClient=openidClient;var u=s(5715);async function openidClient(t){let r;let s=t.provider;if(s.httpOptions&&u.custom.setHttpOptionsDefaults(s.httpOptions),s.wellKnown)r=await u.Issuer.discover(s.wellKnown);else{var p,h,E;r=new u.Issuer({issuer:s.issuer,authorization_endpoint:null===(p=s.authorization)||void 0===p?void 0:p.url,token_endpoint:null===(h=s.token)||void 0===h?void 0:h.url,userinfo_endpoint:null===(E=s.userinfo)||void 0===E?void 0:E.url,jwks_uri:s.jwks_endpoint})}let W=new r.Client({client_id:s.clientId,client_secret:s.clientSecret,redirect_uris:[s.callbackUrl],...s.client},s.jwks);return W[u.custom.clock_tolerance]=10,W}},2798:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=parseProviders;var u=s(4564);function parseProviders(t){let{url:r,providerId:s}=t,p=t.providers.map(({options:t,...s})=>{var p,h;if("oauth"===s.type){let p=normalizeOAuthOptions(s),E=normalizeOAuthOptions(t,!0),W=null!==(h=null==E?void 0:E.id)&&void 0!==h?h:s.id;return(0,u.merge)(p,{...E,signinUrl:`${r}/signin/${W}`,callbackUrl:`${r}/callback/${W}`})}let E=null!==(p=null==t?void 0:t.id)&&void 0!==p?p:s.id;return(0,u.merge)(s,{...t,signinUrl:`${r}/signin/${E}`,callbackUrl:`${r}/callback/${E}`})});return{providers:p,provider:p.find(({id:t})=>t===s)}}function normalizeOAuthOptions(t,r=!1){var s,u,p,h,E;if(!t)return;let W=Object.entries(t).reduce((t,[r,s])=>{if(["authorization","token","userinfo"].includes(r)&&"string"==typeof s){var u;let p=new URL(s);t[r]={url:`${p.origin}${p.pathname}`,params:Object.fromEntries(null!==(u=p.searchParams)&&void 0!==u?u:[])}}else t[r]=s;return t},{});return r||null!==(s=W.version)&&void 0!==s&&s.startsWith("1.")||(W.idToken=!!(null!==(u=null!==(p=W.idToken)&&void 0!==p?p:null===(h=W.wellKnown)||void 0===h?void 0:h.includes("openid-configuration"))&&void 0!==u?u:null===(E=W.authorization)||void 0===E||null===(E=E.params)||void 0===E||null===(E=E.scope)||void 0===E?void 0:E.includes("openid")),W.checks||(W.checks=["state"])),W}},5353:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createSecret=createSecret,r.fromDate=fromDate,r.hashToken=hashToken;var u=s(6113);function fromDate(t,r=Date.now()){return new Date(r+1e3*t)}function hashToken(t,r){var s;let{provider:p,secret:h}=r;return(0,u.createHash)("sha256").update(`${t}${null!==(s=p.secret)&&void 0!==s?s:h}`).digest("hex")}function createSecret(t){var r;let{authOptions:s,url:p}=t;return null!==(r=s.secret)&&void 0!==r?r:(0,u.createHash)("sha256").update(JSON.stringify({...p,...s})).digest("hex")}},6662:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=ErrorPage;var u=s(6600);function ErrorPage(t){var r;let{url:s,error:p="default",theme:h}=t,E=`${s}/signin`,W={default:{status:200,heading:"Error",message:(0,u.h)("p",null,(0,u.h)("a",{className:"site",href:null==s?void 0:s.origin},null==s?void 0:s.host))},configuration:{status:500,heading:"Server error",message:(0,u.h)("div",null,(0,u.h)("p",null,"There is a problem with the server configuration."),(0,u.h)("p",null,"Check the server logs for more information."))},accessdenied:{status:403,heading:"Access Denied",message:(0,u.h)("div",null,(0,u.h)("p",null,"You do not have permission to sign in."),(0,u.h)("p",null,(0,u.h)("a",{className:"button",href:E},"Sign in")))},verification:{status:403,heading:"Unable to sign in",message:(0,u.h)("div",null,(0,u.h)("p",null,"The sign in link is no longer valid."),(0,u.h)("p",null,"It may have been used already or it may have expired.")),signin:(0,u.h)("a",{className:"button",href:E},"Sign in")}},{status:J,heading:R,message:K,signin:U}=null!==(r=W[p.toLowerCase()])&&void 0!==r?r:W.default;return{status:J,html:(0,u.h)("div",{className:"error"},(null==h?void 0:h.brandColor)&&(0,u.h)("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${null==h?void 0:h.brandColor}
        }
      `}}),(0,u.h)("div",{className:"card"},(null==h?void 0:h.logo)&&(0,u.h)("img",{src:h.logo,alt:"Logo",className:"logo"}),(0,u.h)("h1",null,R),(0,u.h)("div",{className:"message"},K),U))}}},9280:(t,r,s)=>{"use strict";var u=s(2236);Object.defineProperty(r,"__esModule",{value:!0}),r.default=renderPage;var p=u(s(5139)),h=u(s(816)),E=u(s(2930)),W=u(s(7882)),J=u(s(6662)),R=u(s(953));function renderPage(t){let{url:r,theme:s,query:u,cookies:K}=t;function send({html:t,title:r,status:u}){var h;return{cookies:K,status:u,headers:[{key:"Content-Type",value:"text/html"}],body:`<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><style>${(0,R.default)()}</style><title>${r}</title></head><body class="__next-auth-theme-${null!==(h=null==s?void 0:s.colorScheme)&&void 0!==h?h:"auto"}"><div class="page">${(0,p.default)(t)}</div></body></html>`}}return{signin:r=>send({html:(0,h.default)({csrfToken:t.csrfToken,providers:t.providers,callbackUrl:t.callbackUrl,theme:s,...u,...r}),title:"Sign In"}),signout:u=>send({html:(0,E.default)({csrfToken:t.csrfToken,url:r,theme:s,...u}),title:"Sign Out"}),verifyRequest:t=>send({html:(0,W.default)({url:r,theme:s,...t}),title:"Verify Request"}),error:t=>send({...(0,J.default)({url:r,theme:s,...t}),title:"Error"})}}},816:(t,r,s)=>{"use strict";var u=s(2236);Object.defineProperty(r,"__esModule",{value:!0}),r.default=SigninPage;var p=s(6600),h=u(s(8907));function hexToRgba(t,r=1){if(!t)return;3===(t=t.replace(/^#/,"")).length&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]);let s=parseInt(t,16);r=Math.min(Math.max(r,0),1);let u=`rgba(${s>>16&255}, ${s>>8&255}, ${255&s}, ${r})`;return u}function SigninPage(t){var r;let{csrfToken:s,providers:u,callbackUrl:E,theme:W,email:J,error:R}=t,K=u.filter(t=>"oauth"===t.type||"email"===t.type||"credentials"===t.type&&!!t.credentials);"undefined"!=typeof document&&W.buttonText&&document.documentElement.style.setProperty("--button-text-color",W.buttonText),"undefined"!=typeof document&&W.brandColor&&document.documentElement.style.setProperty("--brand-color",W.brandColor);let U={Signin:"Try signing in with a different account.",OAuthSignin:"Try signing in with a different account.",OAuthCallback:"Try signing in with a different account.",OAuthCreateAccount:"Try signing in with a different account.",EmailCreateAccount:"Try signing in with a different account.",Callback:"Try signing in with a different account.",OAuthAccountNotLinked:"To confirm your identity, sign in with the same account you used originally.",EmailSignin:"The e-mail could not be sent.",CredentialsSignin:"Sign in failed. Check the details you provided are correct.",SessionRequired:"Please sign in to access this page.",default:"Unable to sign in."},D=R&&(null!==(r=U[R])&&void 0!==r?r:U.default),G="https://authjs.dev/img/providers";return(0,p.h)("div",{className:"signin"},W.brandColor&&(0,p.h)("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${W.brandColor}
        }
      `}}),W.buttonText&&(0,p.h)("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --button-text-color: ${W.buttonText}
        }
      `}}),(0,p.h)("div",{className:"card"},W.logo&&(0,p.h)("img",{src:W.logo,alt:"Logo",className:"logo"}),D&&(0,p.h)("div",{className:"error"},(0,p.h)("p",null,D)),K.map((t,r)=>{let u,W,R,U,D,Y;if("oauth"===t.type){var X;({bg:u="",text:W="",logo:R="",bgDark:D=u,textDark:Y=W,logoDark:U=""}=null!==(X=t.style)&&void 0!==X?X:{}),R=R.startsWith("/")?`${G}${R}`:R,(U=U.startsWith("/")?`${G}${U}`:U||R)||(U=R)}return(0,p.h)("div",{key:t.id,className:"provider"},"oauth"===t.type&&(0,p.h)("form",{action:t.signinUrl,method:"POST"},(0,p.h)("input",{type:"hidden",name:"csrfToken",value:s}),E&&(0,p.h)("input",{type:"hidden",name:"callbackUrl",value:E}),(0,p.h)("button",{type:"submit",className:"button",style:{"--provider-bg":u,"--provider-dark-bg":D,"--provider-color":W,"--provider-dark-color":Y,"--provider-bg-hover":hexToRgba(u,.8),"--provider-dark-bg-hover":hexToRgba(D,.8)}},R&&(0,p.h)("img",{loading:"lazy",height:24,width:24,id:"provider-logo",src:`${R.startsWith("/")?G:""}${R}`}),U&&(0,p.h)("img",{loading:"lazy",height:24,width:24,id:"provider-logo-dark",src:`${R.startsWith("/")?G:""}${U}`}),(0,p.h)("span",null,"Sign in with ",t.name))),("email"===t.type||"credentials"===t.type)&&r>0&&"email"!==K[r-1].type&&"credentials"!==K[r-1].type&&(0,p.h)("hr",null),"email"===t.type&&(0,p.h)("form",{action:t.signinUrl,method:"POST"},(0,p.h)("input",{type:"hidden",name:"csrfToken",value:s}),(0,p.h)("label",{className:"section-header",htmlFor:`input-email-for-${t.id}-provider`},"Email"),(0,p.h)("input",{id:`input-email-for-${t.id}-provider`,autoFocus:!0,type:"email",name:"email",value:J,placeholder:"email@example.com",required:!0}),(0,p.h)("button",{id:"submitButton",type:"submit"},"Sign in with ",t.name)),"credentials"===t.type&&(0,p.h)("form",{action:t.callbackUrl,method:"POST"},(0,p.h)("input",{type:"hidden",name:"csrfToken",value:s}),Object.keys(t.credentials).map(r=>{var s,u,E;return(0,p.h)("div",{key:`input-group-${t.id}`},(0,p.h)("label",{className:"section-header",htmlFor:`input-${r}-for-${t.id}-provider`},null!==(s=t.credentials[r].label)&&void 0!==s?s:r),(0,p.h)("input",(0,h.default)({name:r,id:`input-${r}-for-${t.id}-provider`,type:null!==(u=t.credentials[r].type)&&void 0!==u?u:"text",placeholder:null!==(E=t.credentials[r].placeholder)&&void 0!==E?E:""},t.credentials[r])))}),(0,p.h)("button",{type:"submit"},"Sign in with ",t.name)),("email"===t.type||"credentials"===t.type)&&r+1<K.length&&(0,p.h)("hr",null))})))}},2930:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=SignoutPage;var u=s(6600);function SignoutPage(t){let{url:r,csrfToken:s,theme:p}=t;return(0,u.h)("div",{className:"signout"},p.brandColor&&(0,u.h)("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${p.brandColor}
        }
      `}}),p.buttonText&&(0,u.h)("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --button-text-color: ${p.buttonText}
        }
      `}}),(0,u.h)("div",{className:"card"},p.logo&&(0,u.h)("img",{src:p.logo,alt:"Logo",className:"logo"}),(0,u.h)("h1",null,"Signout"),(0,u.h)("p",null,"Are you sure you want to sign out?"),(0,u.h)("form",{action:`${r}/signout`,method:"POST"},(0,u.h)("input",{type:"hidden",name:"csrfToken",value:s}),(0,u.h)("button",{id:"submitButton",type:"submit"},"Sign out"))))}},7882:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=VerifyRequestPage;var u=s(6600);function VerifyRequestPage(t){let{url:r,theme:s}=t;return(0,u.h)("div",{className:"verify-request"},s.brandColor&&(0,u.h)("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${s.brandColor}
        }
      `}}),(0,u.h)("div",{className:"card"},s.logo&&(0,u.h)("img",{src:s.logo,alt:"Logo",className:"logo"}),(0,u.h)("h1",null,"Check your email"),(0,u.h)("p",null,"A sign in link has been sent to your email address."),(0,u.h)("p",null,(0,u.h)("a",{className:"site",href:r.origin},r.host))))}},3960:(t,r,s)=>{"use strict";var u=s(2236);Object.defineProperty(r,"__esModule",{value:!0}),r.default=callback;var p=u(s(5045)),h=u(s(8682)),E=s(5353),W=u(s(4685));async function callback(t){var r,s,u,J,R,K;let{options:U,query:D,body:G,method:Y,headers:X,sessionStore:Z}=t,{provider:Q,adapter:ee,url:et,callbackUrl:er,pages:en,jwt:ei,events:eo,callbacks:ea,session:{strategy:es,maxAge:el},logger:ec}=U,eu=[],ed="jwt"===es;if("oauth"===Q.type)try{let{profile:u,account:E,OAuthProfile:W,cookies:J}=await (0,p.default)({query:D,body:G,method:Y,options:U,cookies:t.cookies});J.length&&eu.push(...J);try{if(ec.debug("OAUTH_CALLBACK_RESPONSE",{profile:u,account:E,OAuthProfile:W}),!u||!E||!W)return{redirect:`${et}/signin`,cookies:eu};let t=u;if(ee){let{getUserByAccount:r}=ee,s=await r({providerAccountId:E.providerAccountId,provider:Q.id});s&&(t=s)}try{let r=await ea.signIn({user:t,account:E,profile:W});if(!r)return{redirect:`${et}/error?error=AccessDenied`,cookies:eu};if("string"==typeof r)return{redirect:r,cookies:eu}}catch(t){return{redirect:`${et}/error?error=${encodeURIComponent(t.message)}`,cookies:eu}}let{user:p,session:J,isNewUser:R}=await (0,h.default)({sessionToken:Z.value,profile:u,account:E,options:U});if(ed){let t={name:p.name,email:p.email,picture:p.image,sub:null===(s=p.id)||void 0===s?void 0:s.toString()},r=await ea.jwt({token:t,user:p,account:E,profile:W,isNewUser:R,trigger:R?"signUp":"signIn"}),u=await ei.encode({...ei,token:r}),h=new Date;h.setTime(h.getTime()+1e3*el);let J=Z.chunk(u,{expires:h});eu.push(...J)}else eu.push({name:U.cookies.sessionToken.name,value:J.sessionToken,options:{...U.cookies.sessionToken.options,expires:J.expires}});if(await (null===(r=eo.signIn)||void 0===r?void 0:r.call(eo,{user:p,account:E,profile:u,isNewUser:R})),R&&en.newUser)return{redirect:`${en.newUser}${en.newUser.includes("?")?"&":"?"}callbackUrl=${encodeURIComponent(er)}`,cookies:eu};return{redirect:er,cookies:eu}}catch(t){if("AccountNotLinkedError"===t.name)return{redirect:`${et}/error?error=OAuthAccountNotLinked`,cookies:eu};if("CreateUserError"===t.name)return{redirect:`${et}/error?error=OAuthCreateAccount`,cookies:eu};return ec.error("OAUTH_CALLBACK_HANDLER_ERROR",t),{redirect:`${et}/error?error=Callback`,cookies:eu}}}catch(t){if("OAuthCallbackError"===t.name)return ec.error("OAUTH_CALLBACK_ERROR",{error:t,providerId:Q.id}),{redirect:`${et}/error?error=OAuthCallback`,cookies:eu};return ec.error("OAUTH_CALLBACK_ERROR",t),{redirect:`${et}/error?error=Callback`,cookies:eu}}else if("email"===Q.type)try{let t=null==D?void 0:D.token,r=null==D?void 0:D.email;if(!t)return{redirect:`${et}/error?error=configuration`,cookies:eu};let s=await ee.useVerificationToken({identifier:r,token:(0,E.hashToken)(t,U)}),p=!s||s.expires.valueOf()<Date.now()||r&&s.identifier!==r;if(p)return{redirect:`${et}/error?error=Verification`,cookies:eu};let R=await (0,W.default)({email:s.identifier,adapter:ee}),K={providerAccountId:R.email,type:"email",provider:Q.id};try{let t=await ea.signIn({user:R,account:K});if(!t)return{redirect:`${et}/error?error=AccessDenied`,cookies:eu};if("string"==typeof t)return{redirect:t,cookies:eu}}catch(t){return{redirect:`${et}/error?error=${encodeURIComponent(t.message)}`,cookies:eu}}let{user:G,session:Y,isNewUser:X}=await (0,h.default)({sessionToken:Z.value,profile:R,account:K,options:U});if(ed){let t={name:G.name,email:G.email,picture:G.image,sub:null===(J=G.id)||void 0===J?void 0:J.toString()},r=await ea.jwt({token:t,user:G,account:K,isNewUser:X,trigger:X?"signUp":"signIn"}),s=await ei.encode({...ei,token:r}),u=new Date;u.setTime(u.getTime()+1e3*el);let p=Z.chunk(s,{expires:u});eu.push(...p)}else eu.push({name:U.cookies.sessionToken.name,value:Y.sessionToken,options:{...U.cookies.sessionToken.options,expires:Y.expires}});if(await (null===(u=eo.signIn)||void 0===u?void 0:u.call(eo,{user:G,account:K,isNewUser:X})),X&&en.newUser)return{redirect:`${en.newUser}${en.newUser.includes("?")?"&":"?"}callbackUrl=${encodeURIComponent(er)}`,cookies:eu};return{redirect:er,cookies:eu}}catch(t){if("CreateUserError"===t.name)return{redirect:`${et}/error?error=EmailCreateAccount`,cookies:eu};return ec.error("CALLBACK_EMAIL_ERROR",t),{redirect:`${et}/error?error=Callback`,cookies:eu}}else if("credentials"===Q.type&&"POST"===Y){let t;try{if(!(t=await Q.authorize(G,{query:D,body:G,headers:X,method:Y})))return{status:401,redirect:`${et}/error?${new URLSearchParams({error:"CredentialsSignin",provider:Q.id})}`,cookies:eu}}catch(t){return{status:401,redirect:`${et}/error?error=${encodeURIComponent(t.message)}`,cookies:eu}}let r={providerAccountId:t.id,type:"credentials",provider:Q.id};try{let s=await ea.signIn({user:t,account:r,credentials:G});if(!s)return{status:403,redirect:`${et}/error?error=AccessDenied`,cookies:eu};if("string"==typeof s)return{redirect:s,cookies:eu}}catch(t){return{redirect:`${et}/error?error=${encodeURIComponent(t.message)}`,cookies:eu}}let s={name:t.name,email:t.email,picture:t.image,sub:null===(R=t.id)||void 0===R?void 0:R.toString()},u=await ea.jwt({token:s,user:t,account:r,isNewUser:!1,trigger:"signIn"}),p=await ei.encode({...ei,token:u}),h=new Date;h.setTime(h.getTime()+1e3*el);let E=Z.chunk(p,{expires:h});return eu.push(...E),await (null===(K=eo.signIn)||void 0===K?void 0:K.call(eo,{user:t,account:r})),{redirect:er,cookies:eu}}return{status:500,body:`Error: Callback for provider type ${Q.type} not supported`,cookies:eu}}},3541:(t,r,s)=>{"use strict";var u=s(2236);Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"callback",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(r,"providers",{enumerable:!0,get:function(){return J.default}}),Object.defineProperty(r,"session",{enumerable:!0,get:function(){return W.default}}),Object.defineProperty(r,"signin",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(r,"signout",{enumerable:!0,get:function(){return E.default}});var p=u(s(3960)),h=u(s(2551)),E=u(s(9839)),W=u(s(6160)),J=u(s(2764))},2764:(t,r)=>{"use strict";function providers(t){return{headers:[{key:"Content-Type",value:"application/json"}],body:t.reduce((t,{id:r,name:s,type:u,signinUrl:p,callbackUrl:h})=>(t[r]={id:r,name:s,type:u,signinUrl:p,callbackUrl:h},t),{})}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=providers},6160:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=session;var u=s(5353);async function session(t){var r,s,p,h,E,W;let{options:J,sessionStore:R,newSession:K,isUpdate:U}=t,{adapter:D,jwt:G,events:Y,callbacks:X,logger:Z,session:{strategy:Q,maxAge:ee}}=J,et={body:{},headers:[{key:"Content-Type",value:"application/json"}],cookies:[]},er=R.value;if(!er)return et;if("jwt"===Q)try{let t=await G.decode({...G,token:er});if(!t)throw Error("JWT invalid");let p=await X.jwt({token:t,...U&&{trigger:"update"},session:K}),h=(0,u.fromDate)(ee),E=await X.session({session:{user:{name:null==t?void 0:t.name,email:null==t?void 0:t.email,image:null==t?void 0:t.picture},expires:h.toISOString()},token:p});et.body=E;let W=await G.encode({...G,token:p,maxAge:J.session.maxAge}),D=R.chunk(W,{expires:h});null===(r=et.cookies)||void 0===r||r.push(...D),await (null===(s=Y.session)||void 0===s?void 0:s.call(Y,{session:E,token:p}))}catch(t){Z.error("JWT_SESSION_ERROR",t),null===(p=et.cookies)||void 0===p||p.push(...R.clean())}else try{let{getSessionAndUser:t,deleteSession:r,updateSession:s}=D,p=await t(er);if(p&&p.session.expires.valueOf()<Date.now()&&(await r(er),p=null),p){let{user:t,session:r}=p,W=J.session.updateAge,R=r.expires.valueOf()-1e3*ee+1e3*W,D=(0,u.fromDate)(ee);R<=Date.now()&&await s({sessionToken:er,expires:D});let G=await X.session({session:{user:{name:t.name,email:t.email,image:t.image},expires:r.expires.toISOString()},user:t,newSession:K,...U?{trigger:"update"}:{}});et.body=G,null===(h=et.cookies)||void 0===h||h.push({name:J.cookies.sessionToken.name,value:er,options:{...J.cookies.sessionToken.options,expires:D}}),await (null===(E=Y.session)||void 0===E?void 0:E.call(Y,{session:G}))}else er&&(null===(W=et.cookies)||void 0===W||W.push(...R.clean()))}catch(t){Z.error("SESSION_ERROR",t)}return et}},2551:(t,r,s)=>{"use strict";var u=s(2236);Object.defineProperty(r,"__esModule",{value:!0}),r.default=signin;var p=u(s(5501)),h=u(s(889)),E=u(s(4685));async function signin(t){let{options:r,query:s,body:u}=t,{url:W,callbacks:J,logger:R,provider:K}=r;if(!K.type)return{status:500,text:`Error: Type not specified for ${K.name}`};if("oauth"===K.type)try{let t=await (0,p.default)({options:r,query:s});return t}catch(t){return R.error("SIGNIN_OAUTH_ERROR",{error:t,providerId:K.id}),{redirect:`${W}/error?error=OAuthSignin`}}else if("email"===K.type){var U;let t=null==u?void 0:u.email;if(!t)return{redirect:`${W}/error?error=EmailSignin`};let s=null!==(U=K.normalizeIdentifier)&&void 0!==U?U:t=>{let[r,s]=t.toLowerCase().trim().split("@");return s=s.split(",")[0],`${r}@${s}`};try{t=s(null==u?void 0:u.email)}catch(t){return R.error("SIGNIN_EMAIL_ERROR",{error:t,providerId:K.id}),{redirect:`${W}/error?error=EmailSignin`}}let p=await (0,E.default)({email:t,adapter:r.adapter}),D={providerAccountId:t,userId:t,type:"email",provider:K.id};try{let t=await J.signIn({user:p,account:D,email:{verificationRequest:!0}});if(!t)return{redirect:`${W}/error?error=AccessDenied`};if("string"==typeof t)return{redirect:t}}catch(t){return{redirect:`${W}/error?${new URLSearchParams({error:t})}`}}try{let s=await (0,h.default)(t,r);return{redirect:s}}catch(t){return R.error("SIGNIN_EMAIL_ERROR",{error:t,providerId:K.id}),{redirect:`${W}/error?error=EmailSignin`}}}return{redirect:`${W}/signin`}}},9839:(t,r)=>{"use strict";async function signout(t){var r,s;let{options:u,sessionStore:p}=t,{adapter:h,events:E,jwt:W,callbackUrl:J,logger:R,session:K}=u,U=null==p?void 0:p.value;if(!U)return{redirect:J};if("jwt"===K.strategy)try{let t=await W.decode({...W,token:U});await (null===(r=E.signOut)||void 0===r?void 0:r.call(E,{token:t}))}catch(t){R.error("SIGNOUT_ERROR",t)}else try{let t=await h.deleteSession(U);await (null===(s=E.signOut)||void 0===s?void 0:s.call(E,{session:t}))}catch(t){R.error("SIGNOUT_ERROR",t)}let D=p.clean();return{redirect:J,cookies:D}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=signout},953:t=>{"use strict";t.exports=function(){return':root{--border-width:1px;--border-radius:0.5rem;--color-error:#c94b4b;--color-info:#157efb;--color-info-hover:#0f6ddb;--color-info-text:#fff}.__next-auth-theme-auto,.__next-auth-theme-light{--color-background:#ececec;--color-background-hover:hsla(0,0%,93%,.8);--color-background-card:#fff;--color-text:#000;--color-primary:#444;--color-control-border:#bbb;--color-button-active-background:#f9f9f9;--color-button-active-border:#aaa;--color-separator:#ccc}.__next-auth-theme-dark{--color-background:#161b22;--color-background-hover:rgba(22,27,34,.8);--color-background-card:#0d1117;--color-text:#fff;--color-primary:#ccc;--color-control-border:#555;--color-button-active-background:#060606;--color-button-active-border:#666;--color-separator:#444}@media (prefers-color-scheme:dark){.__next-auth-theme-auto{--color-background:#161b22;--color-background-hover:rgba(22,27,34,.8);--color-background-card:#0d1117;--color-text:#fff;--color-primary:#ccc;--color-control-border:#555;--color-button-active-background:#060606;--color-button-active-border:#666;--color-separator:#444}a.button,button{background-color:var(--provider-dark-bg,var(--color-background));color:var(--provider-dark-color,var(--color-primary))}a.button:hover,button:hover{background-color:var(--provider-dark-bg-hover,var(--color-background-hover))!important}#provider-logo{display:none!important}#provider-logo-dark{display:block!important;width:25px}}html{box-sizing:border-box}*,:after,:before{box-sizing:inherit;margin:0;padding:0}body{background-color:var(--color-background);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;margin:0;padding:0}h1{font-weight:400}h1,p{color:var(--color-text);margin-bottom:1.5rem;padding:0 1rem}form{margin:0;padding:0}label{font-weight:500;margin-bottom:.25rem;text-align:left}input[type],label{color:var(--color-text);display:block}input[type]{background:var(--color-background-card);border:var(--border-width) solid var(--color-control-border);border-radius:var(--border-radius);box-sizing:border-box;font-size:1rem;padding:.5rem 1rem;width:100%}input[type]:focus{box-shadow:none}p{font-size:1.1rem;line-height:2rem}a.button{line-height:1rem;text-decoration:none}a.button:link,a.button:visited{background-color:var(--color-background);color:var(--color-primary)}button span{flex-grow:1}a.button,button{align-items:center;background-color:var(--provider-bg);border-color:rgba(0,0,0,.1);border-radius:var(--border-radius);color:var(--provider-color,var(--color-primary));display:flex;font-size:1.1rem;font-weight:500;justify-content:center;min-height:62px;padding:.75rem 1rem;position:relative;transition:all .1s ease-in-out}a.button:hover,button:hover{background-color:var(--provider-bg-hover,var(--color-background-hover));cursor:pointer}a.button:active,button:active{cursor:pointer}a.button #provider-logo,button #provider-logo{display:block;width:25px}a.button #provider-logo-dark,button #provider-logo-dark{display:none}#submitButton{background-color:var(--brand-color,var(--color-info));color:var(--button-text-color,var(--color-info-text));width:100%}#submitButton:hover{background-color:var(--button-hover-bg,var(--color-info-hover))!important}a.site{color:var(--color-primary);font-size:1rem;line-height:2rem;text-decoration:none}a.site:hover{text-decoration:underline}.page{box-sizing:border-box;display:grid;height:100%;margin:0;padding:0;place-items:center;position:absolute;width:100%}.page>div{text-align:center}.error a.button{margin-top:.5rem;padding-left:2rem;padding-right:2rem}.error .message{margin-bottom:1.5rem}.signin input[type=text]{display:block;margin-left:auto;margin-right:auto}.signin hr{border:0;border-top:1px solid var(--color-separator);display:block;margin:2rem auto 1rem;overflow:visible}.signin hr:before{background:var(--color-background-card);color:#888;content:"or";padding:0 .4rem;position:relative;top:-.7rem}.signin .error{background:#f5f5f5;background:var(--color-error);border-radius:.3rem;font-weight:500}.signin .error p{color:var(--color-info-text);font-size:.9rem;line-height:1.2rem;padding:.5rem 1rem;text-align:left}.signin form,.signin>div{display:block}.signin form input[type],.signin>div input[type]{margin-bottom:.5rem}.signin form button,.signin>div button{width:100%}.signin .provider+.provider{margin-top:1rem}.logo{display:inline-block;margin:1.25rem 0;max-height:70px;max-width:150px}.card{background-color:var(--color-background-card);border-radius:2rem;padding:1.25rem 2rem}.card .header{color:var(--color-primary)}.section-header{color:var(--color-text)}@media screen and (min-width:450px){.card{margin:2rem 0;width:368px}}@media screen and (max-width:450px){.card{margin:1rem 0;width:343px}}'}},4046:(t,r,s)=>{"use strict";var u=s(2236);Object.defineProperty(r,"__esModule",{value:!0});var p={encode:!0,decode:!0,getToken:!0};r.decode=decode,r.encode=encode,r.getToken=getToken;var h=s(8541),E=u(s(2629)),W=s(9968),J=s(371),R=s(4972);Object.keys(R).forEach(function(t){!("default"===t||"__esModule"===t||Object.prototype.hasOwnProperty.call(p,t))&&(t in r&&r[t]===R[t]||Object.defineProperty(r,t,{enumerable:!0,get:function(){return R[t]}}))});let now=()=>Date.now()/1e3|0;async function encode(t){let{token:r={},secret:s,maxAge:u=2592e3,salt:p=""}=t,E=await getDerivedEncryptionKey(s,p);return await new h.EncryptJWT(r).setProtectedHeader({alg:"dir",enc:"A256GCM"}).setIssuedAt().setExpirationTime(now()+u).setJti((0,W.v4)()).encrypt(E)}async function decode(t){let{token:r,secret:s,salt:u=""}=t;if(!r)return null;let p=await getDerivedEncryptionKey(s,u),{payload:E}=await (0,h.jwtDecrypt)(r,p,{clockTolerance:15});return E}async function getToken(t){var r,s,u,p;let{req:h,secureCookie:E=null!==(r=null===(s=process.env.NEXTAUTH_URL)||void 0===s?void 0:s.startsWith("https://"))&&void 0!==r?r:!!process.env.VERCEL,cookieName:W=E?"__Secure-next-auth.session-token":"next-auth.session-token",raw:R,decode:K=decode,logger:U=console,secret:D=null!==(u=process.env.NEXTAUTH_SECRET)&&void 0!==u?u:process.env.AUTH_SECRET}=t;if(!h)throw Error("Must pass `req` to JWT getToken()");let G=new J.SessionStore({name:W,options:{secure:E}},{cookies:h.cookies,headers:h.headers},U),Y=G.value,X=h.headers instanceof Headers?h.headers.get("authorization"):null===(p=h.headers)||void 0===p?void 0:p.authorization;if(!Y&&(null==X?void 0:X.split(" ")[0])==="Bearer"){let t=X.split(" ")[1];Y=decodeURIComponent(t)}if(!Y)return null;if(R)return Y;try{return await K({token:Y,secret:D})}catch(t){return null}}async function getDerivedEncryptionKey(t,r){return await (0,E.default)("sha256",t,r,`NextAuth.js Generated Encryption Key${r?` (${r})`:""}`,32)}},4972:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},5231:(t,r,s)=>{"use strict";r.Z1=getServerSession;var u=s(7367),p=s(9885);async function getServerSession(...t){var r,h,E;let W,J,R;let K=0===t.length||1===t.length;if(K){R=Object.assign({},t[0],{providers:[]});let{headers:r,cookies:u}=s(532);W={headers:Object.fromEntries(await r()),cookies:Object.fromEntries((await u()).getAll().map(t=>[t.name,t.value]))},J={getHeader(){},setCookie(){},setHeader(){}}}else W=t[0],J=t[1],R=Object.assign({},t[2],{providers:[]});null!==(h=(r=R).secret)&&void 0!==h||(r.secret=null!==(E=process.env.NEXTAUTH_SECRET)&&void 0!==E?E:process.env.AUTH_SECRET);let U=await (0,u.AuthHandler)({options:R,req:{action:"session",method:"GET",cookies:W.cookies,headers:W.headers}}),{body:D,cookies:G,status:Y=200}=U;if(null==G||G.forEach(t=>(0,p.setCookie)(J,t)),D&&"string"!=typeof D&&Object.keys(D).length){if(200===Y)return K&&delete D.expires,D;throw Error(D.message)}return null}},9885:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getBody=getBody,r.setCookie=setCookie,r.toResponse=toResponse;var u=s(3464);function setCookie(t,r){var s;let p=null!==(s=t.getHeader("Set-Cookie"))&&void 0!==s?s:[];Array.isArray(p)||(p=[p]);let{name:h,value:E,options:W}=r,J=(0,u.serialize)(h,E,W);p.push(J),t.setHeader("Set-Cookie",p)}async function getBody(t){if(!("body"in t)||!t.body||"POST"!==t.method)return;let r=t.headers.get("content-type");if(null!=r&&r.includes("application/json"))return await t.json();if(null!=r&&r.includes("application/x-www-form-urlencoded")){let r=new URLSearchParams(await t.text());return Object.fromEntries(r)}}function toResponse(t){var r,s,p;let h=new Headers(null===(r=t.headers)||void 0===r?void 0:r.reduce((t,{key:r,value:s})=>(t[r]=s,t),{}));null===(s=t.cookies)||void 0===s||s.forEach(t=>{let{name:r,value:s,options:p}=t,E=(0,u.serialize)(r,s,p);h.has("Set-Cookie")?h.append("Set-Cookie",E):h.set("Set-Cookie",E)});let E=t.body;"application/json"===h.get("content-type")?E=JSON.stringify(t.body):"application/x-www-form-urlencoded"===h.get("content-type")&&(E=new URLSearchParams(t.body).toString());let W=t.redirect?302:null!==(p=t.status)&&void 0!==p?p:200,J=new Response(E,{headers:h,status:W});return t.redirect&&J.headers.set("Location",t.redirect),J}},2119:(t,r)=>{"use strict";function detectOrigin(t,r){var s;return(null!==(s=process.env.VERCEL)&&void 0!==s?s:process.env.AUTH_TRUST_HOST)?`${"http"===r?"http":"https"}://${t}`:process.env.NEXTAUTH_URL}Object.defineProperty(r,"__esModule",{value:!0}),r.detectOrigin=detectOrigin},8562:(t,r,s)=>{"use strict";var u=s(2236);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,r.proxyLogger=proxyLogger,r.setLogger=setLogger,u(s(4364)),u(s(7709)),u(s(7524));var p=s(9215);function formatError(t){if(t instanceof Error&&!(t instanceof p.UnknownError))return{message:t.message,stack:t.stack,name:t.name};if(hasErrorProperty(t)){var r;t.error=formatError(t.error),t.message=null!==(r=t.message)&&void 0!==r?r:t.error.message}return t}function hasErrorProperty(t){return!!(null!=t&&t.error)}var h={error:function(t,r){r=formatError(r),console.error("[next-auth][error][".concat(t,"]"),"\nhttps://next-auth.js.org/errors#".concat(t.toLowerCase()),r.message,r)},warn:function(t){console.warn("[next-auth][warn][".concat(t,"]"),"\nhttps://next-auth.js.org/warnings#".concat(t.toLowerCase()))},debug:function(t,r){console.log("[next-auth][debug][".concat(t,"]"),r)}};function setLogger(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;r||(h.debug=function(){}),t.error&&(h.error=t.error),t.warn&&(h.warn=t.warn),t.debug&&(h.debug=t.debug)}function proxyLogger(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;arguments.length>1&&arguments[1];try{return t}catch(t){return h}}r.default=h},4564:(t,r)=>{"use strict";function isObject(t){return t&&"object"==typeof t&&!Array.isArray(t)}function merge(t,...r){if(!r.length)return t;let s=r.shift();if(isObject(t)&&isObject(s))for(let r in s)isObject(s[r])?(t[r]||Object.assign(t,{[r]:{}}),merge(t[r],s[r])):Object.assign(t,{[r]:s[r]});return merge(t,...r)}Object.defineProperty(r,"__esModule",{value:!0}),r.merge=merge},5431:(t,r)=>{"use strict";function parseUrl(t){var r;let s=new URL("http://localhost:3000/api/auth");t&&!t.startsWith("http")&&(t=`https://${t}`);let u=new URL(null!==(r=t)&&void 0!==r?r:s),p=("/"===u.pathname?s.pathname:u.pathname).replace(/\/$/,""),h=`${u.origin}${p}`;return{origin:u.origin,host:u.host,path:p,base:h,toString:()=>h}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=parseUrl},6927:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"DraftMode",{enumerable:!0,get:function(){return DraftMode}});let u=s(7124);let DraftMode=class DraftMode{get isEnabled(){return this._provider.isEnabled}enable(){if(!(0,u.staticGenerationBailout)("draftMode().enable()"))return this._provider.enable()}disable(){if(!(0,u.staticGenerationBailout)("draftMode().disable()"))return this._provider.disable()}constructor(t){this._provider=t}};("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},9084:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(t,r){for(var s in r)Object.defineProperty(t,s,{enumerable:!0,get:r[s]})}(r,{headers:function(){return headers},cookies:function(){return cookies},draftMode:function(){return draftMode}});let u=s(9638),p=s(3416),h=s(2605),E=s(4580),W=s(2934),J=s(7124),R=s(6927);function headers(){if((0,J.staticGenerationBailout)("headers",{link:"https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering"}))return p.HeadersAdapter.seal(new Headers({}));let t=E.requestAsyncStorage.getStore();if(!t)throw Error("Invariant: headers() expects to have requestAsyncStorage, none available.");return t.headers}function cookies(){if((0,J.staticGenerationBailout)("cookies",{link:"https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering"}))return u.RequestCookiesAdapter.seal(new h.RequestCookies(new Headers({})));let t=E.requestAsyncStorage.getStore();if(!t)throw Error("Invariant: cookies() expects to have requestAsyncStorage, none available.");let r=W.actionAsyncStorage.getStore();return r&&(r.isAction||r.isAppRoute)?t.mutableCookies:t.cookies}function draftMode(){let t=E.requestAsyncStorage.getStore();if(!t)throw Error("Invariant: draftMode() expects to have requestAsyncStorage, none available.");return new R.DraftMode(t.draftMode)}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},6284:t=>{"use strict";var r=Object.defineProperty,s=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};function stringifyCookie(t){var r;let s=["path"in t&&t.path&&`Path=${t.path}`,"expires"in t&&(t.expires||0===t.expires)&&`Expires=${("number"==typeof t.expires?new Date(t.expires):t.expires).toUTCString()}`,"maxAge"in t&&"number"==typeof t.maxAge&&`Max-Age=${t.maxAge}`,"domain"in t&&t.domain&&`Domain=${t.domain}`,"secure"in t&&t.secure&&"Secure","httpOnly"in t&&t.httpOnly&&"HttpOnly","sameSite"in t&&t.sameSite&&`SameSite=${t.sameSite}`,"priority"in t&&t.priority&&`Priority=${t.priority}`].filter(Boolean);return`${t.name}=${encodeURIComponent(null!=(r=t.value)?r:"")}; ${s.join("; ")}`}function parseCookie(t){let r=new Map;for(let s of t.split(/; */)){if(!s)continue;let t=s.indexOf("=");if(-1===t){r.set(s,"true");continue}let[u,p]=[s.slice(0,t),s.slice(t+1)];try{r.set(u,decodeURIComponent(null!=p?p:"true"))}catch{}}return r}function parseSetCookie(t){if(!t)return;let[[r,s],...u]=parseCookie(t),{domain:p,expires:h,httponly:E,maxage:W,path:J,samesite:R,secure:K,priority:U}=Object.fromEntries(u.map(([t,r])=>[t.toLowerCase(),r])),D={name:r,value:decodeURIComponent(s),domain:p,...h&&{expires:new Date(h)},...E&&{httpOnly:!0},..."string"==typeof W&&{maxAge:Number(W)},path:J,...R&&{sameSite:parseSameSite(R)},...K&&{secure:!0},...U&&{priority:parsePriority(U)}};return compact(D)}function compact(t){let r={};for(let s in t)t[s]&&(r[s]=t[s]);return r}((t,s)=>{for(var u in s)r(t,u,{get:s[u],enumerable:!0})})(h,{RequestCookies:()=>J,ResponseCookies:()=>R,parseCookie:()=>parseCookie,parseSetCookie:()=>parseSetCookie,stringifyCookie:()=>stringifyCookie}),t.exports=((t,h,E,W)=>{if(h&&"object"==typeof h||"function"==typeof h)for(let E of u(h))p.call(t,E)||void 0===E||r(t,E,{get:()=>h[E],enumerable:!(W=s(h,E))||W.enumerable});return t})(r({},"__esModule",{value:!0}),h);var E=["strict","lax","none"];function parseSameSite(t){return t=t.toLowerCase(),E.includes(t)?t:void 0}var W=["low","medium","high"];function parsePriority(t){return t=t.toLowerCase(),W.includes(t)?t:void 0}function splitCookiesString(t){if(!t)return[];var r,s,u,p,h,E=[],W=0;function skipWhitespace(){for(;W<t.length&&/\s/.test(t.charAt(W));)W+=1;return W<t.length}function notSpecialChar(){return"="!==(s=t.charAt(W))&&";"!==s&&","!==s}for(;W<t.length;){for(r=W,h=!1;skipWhitespace();)if(","===(s=t.charAt(W))){for(u=W,W+=1,skipWhitespace(),p=W;W<t.length&&notSpecialChar();)W+=1;W<t.length&&"="===t.charAt(W)?(h=!0,W=p,E.push(t.substring(r,u)),r=W):W=u+1}else W+=1;(!h||W>=t.length)&&E.push(t.substring(r,t.length))}return E}var J=class{constructor(t){this._parsed=new Map,this._headers=t;let r=t.get("cookie");if(r){let t=parseCookie(r);for(let[r,s]of t)this._parsed.set(r,{name:r,value:s})}}[Symbol.iterator](){return this._parsed[Symbol.iterator]()}get size(){return this._parsed.size}get(...t){let r="string"==typeof t[0]?t[0]:t[0].name;return this._parsed.get(r)}getAll(...t){var r;let s=Array.from(this._parsed);if(!t.length)return s.map(([t,r])=>r);let u="string"==typeof t[0]?t[0]:null==(r=t[0])?void 0:r.name;return s.filter(([t])=>t===u).map(([t,r])=>r)}has(t){return this._parsed.has(t)}set(...t){let[r,s]=1===t.length?[t[0].name,t[0].value]:t,u=this._parsed;return u.set(r,{name:r,value:s}),this._headers.set("cookie",Array.from(u).map(([t,r])=>stringifyCookie(r)).join("; ")),this}delete(t){let r=this._parsed,s=Array.isArray(t)?t.map(t=>r.delete(t)):r.delete(t);return this._headers.set("cookie",Array.from(r).map(([t,r])=>stringifyCookie(r)).join("; ")),s}clear(){return this.delete(Array.from(this._parsed.keys())),this}[Symbol.for("edge-runtime.inspect.custom")](){return`RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(t=>`${t.name}=${encodeURIComponent(t.value)}`).join("; ")}},R=class{constructor(t){var r,s,u;this._parsed=new Map,this._headers=t;let p=null!=(u=null!=(s=null==(r=t.getSetCookie)?void 0:r.call(t))?s:t.get("set-cookie"))?u:[],h=Array.isArray(p)?p:splitCookiesString(p);for(let t of h){let r=parseSetCookie(t);r&&this._parsed.set(r.name,r)}}get(...t){let r="string"==typeof t[0]?t[0]:t[0].name;return this._parsed.get(r)}getAll(...t){var r;let s=Array.from(this._parsed.values());if(!t.length)return s;let u="string"==typeof t[0]?t[0]:null==(r=t[0])?void 0:r.name;return s.filter(t=>t.name===u)}has(t){return this._parsed.has(t)}set(...t){let[r,s,u]=1===t.length?[t[0].name,t[0].value,t[0]]:t,p=this._parsed;return p.set(r,normalizeCookie({name:r,value:s,...u})),replace(p,this._headers),this}delete(...t){let[r,s,u]="string"==typeof t[0]?[t[0]]:[t[0].name,t[0].path,t[0].domain];return this.set({name:r,path:s,domain:u,value:"",expires:new Date(0)})}[Symbol.for("edge-runtime.inspect.custom")](){return`ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(stringifyCookie).join("; ")}};function replace(t,r){for(let[,s]of(r.delete("set-cookie"),t)){let t=stringifyCookie(s);r.append("set-cookie",t)}}function normalizeCookie(t={name:"",value:""}){return"number"==typeof t.expires&&(t.expires=new Date(t.expires)),t.maxAge&&(t.expires=new Date(Date.now()+1e3*t.maxAge)),(null===t.path||void 0===t.path)&&(t.path="/"),t}},5789:(t,r,s)=>{"use strict";t.exports=s(517)},914:(t,r,s)=>{"use strict";Object.defineProperty(r,"Z",{enumerable:!0,get:function(){return u.NextResponse}});let u=s(6843)},4475:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"NextURL",{enumerable:!0,get:function(){return NextURL}});let u=s(2737),p=s(6249),h=s(6758),E=s(8227),W=/(?!^https?:\/\/)(127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}|\[::1\]|localhost)/;function parseURL(t,r){return new URL(String(t).replace(W,"localhost"),r&&String(r).replace(W,"localhost"))}let J=Symbol("NextURLInternal");let NextURL=class NextURL{constructor(t,r,s){let u,p;"object"==typeof r&&"pathname"in r||"string"==typeof r?(u=r,p=s||{}):p=s||r||{},this[J]={url:parseURL(t,u??p.base),options:p,basePath:""},this.analyze()}analyze(){var t,r,s,p,W;let R=(0,E.getNextPathnameInfo)(this[J].url.pathname,{nextConfig:this[J].options.nextConfig,parseData:!0,i18nProvider:this[J].options.i18nProvider}),K=(0,h.getHostname)(this[J].url,this[J].options.headers);this[J].domainLocale=this[J].options.i18nProvider?this[J].options.i18nProvider.detectDomainLocale(K):(0,u.detectDomainLocale)(null==(r=this[J].options.nextConfig)?void 0:null==(t=r.i18n)?void 0:t.domains,K);let U=(null==(s=this[J].domainLocale)?void 0:s.defaultLocale)||(null==(W=this[J].options.nextConfig)?void 0:null==(p=W.i18n)?void 0:p.defaultLocale);this[J].url.pathname=R.pathname,this[J].defaultLocale=U,this[J].basePath=R.basePath??"",this[J].buildId=R.buildId,this[J].locale=R.locale??U,this[J].trailingSlash=R.trailingSlash}formatPathname(){return(0,p.formatNextPathnameInfo)({basePath:this[J].basePath,buildId:this[J].buildId,defaultLocale:this[J].options.forceLocale?void 0:this[J].defaultLocale,locale:this[J].locale,pathname:this[J].url.pathname,trailingSlash:this[J].trailingSlash})}formatSearch(){return this[J].url.search}get buildId(){return this[J].buildId}set buildId(t){this[J].buildId=t}get locale(){return this[J].locale??""}set locale(t){var r,s;if(!this[J].locale||!(null==(s=this[J].options.nextConfig)?void 0:null==(r=s.i18n)?void 0:r.locales.includes(t)))throw TypeError(`The NextURL configuration includes no locale "${t}"`);this[J].locale=t}get defaultLocale(){return this[J].defaultLocale}get domainLocale(){return this[J].domainLocale}get searchParams(){return this[J].url.searchParams}get host(){return this[J].url.host}set host(t){this[J].url.host=t}get hostname(){return this[J].url.hostname}set hostname(t){this[J].url.hostname=t}get port(){return this[J].url.port}set port(t){this[J].url.port=t}get protocol(){return this[J].url.protocol}set protocol(t){this[J].url.protocol=t}get href(){let t=this.formatPathname(),r=this.formatSearch();return`${this.protocol}//${this.host}${t}${r}${this.hash}`}set href(t){this[J].url=parseURL(t),this.analyze()}get origin(){return this[J].url.origin}get pathname(){return this[J].url.pathname}set pathname(t){this[J].url.pathname=t}get hash(){return this[J].url.hash}set hash(t){this[J].url.hash=t}get search(){return this[J].url.search}set search(t){this[J].url.search=t}get password(){return this[J].url.password}set password(t){this[J].url.password=t}get username(){return this[J].url.username}set username(t){this[J].url.username=t}get basePath(){return this[J].basePath}set basePath(t){this[J].basePath=t.startsWith("/")?t:`/${t}`}toString(){return this.href}toJSON(){return this.href}[Symbol.for("edge-runtime.inspect.custom")](){return{href:this.href,origin:this.origin,protocol:this.protocol,username:this.username,password:this.password,host:this.host,hostname:this.hostname,port:this.port,pathname:this.pathname,search:this.search,searchParams:this.searchParams,hash:this.hash}}clone(){return new NextURL(String(this),this[J].options)}}},3416:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(t,r){for(var s in r)Object.defineProperty(t,s,{enumerable:!0,get:r[s]})}(r,{ReadonlyHeadersError:function(){return ReadonlyHeadersError},HeadersAdapter:function(){return HeadersAdapter}});let u=s(3304);let ReadonlyHeadersError=class ReadonlyHeadersError extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new ReadonlyHeadersError}};let HeadersAdapter=class HeadersAdapter extends Headers{constructor(t){super(),this.headers=new Proxy(t,{get(r,s,p){if("symbol"==typeof s)return u.ReflectAdapter.get(r,s,p);let h=s.toLowerCase(),E=Object.keys(t).find(t=>t.toLowerCase()===h);if(void 0!==E)return u.ReflectAdapter.get(r,E,p)},set(r,s,p,h){if("symbol"==typeof s)return u.ReflectAdapter.set(r,s,p,h);let E=s.toLowerCase(),W=Object.keys(t).find(t=>t.toLowerCase()===E);return u.ReflectAdapter.set(r,W??s,p,h)},has(r,s){if("symbol"==typeof s)return u.ReflectAdapter.has(r,s);let p=s.toLowerCase(),h=Object.keys(t).find(t=>t.toLowerCase()===p);return void 0!==h&&u.ReflectAdapter.has(r,h)},deleteProperty(r,s){if("symbol"==typeof s)return u.ReflectAdapter.deleteProperty(r,s);let p=s.toLowerCase(),h=Object.keys(t).find(t=>t.toLowerCase()===p);return void 0===h||u.ReflectAdapter.deleteProperty(r,h)}})}static seal(t){return new Proxy(t,{get(t,r,s){switch(r){case"append":case"delete":case"set":return ReadonlyHeadersError.callable;default:return u.ReflectAdapter.get(t,r,s)}}})}merge(t){return Array.isArray(t)?t.join(", "):t}static from(t){return t instanceof Headers?t:new HeadersAdapter(t)}append(t,r){let s=this.headers[t];"string"==typeof s?this.headers[t]=[s,r]:Array.isArray(s)?s.push(r):this.headers[t]=r}delete(t){delete this.headers[t]}get(t){let r=this.headers[t];return void 0!==r?this.merge(r):null}has(t){return void 0!==this.headers[t]}set(t,r){this.headers[t]=r}forEach(t,r){for(let[s,u]of this.entries())t.call(r,u,s,this)}*entries(){for(let t of Object.keys(this.headers)){let r=t.toLowerCase(),s=this.get(r);yield[r,s]}}*keys(){for(let t of Object.keys(this.headers)){let r=t.toLowerCase();yield r}}*values(){for(let t of Object.keys(this.headers)){let r=this.get(t);yield r}}[Symbol.iterator](){return this.entries()}}},3304:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"ReflectAdapter",{enumerable:!0,get:function(){return ReflectAdapter}});let ReflectAdapter=class ReflectAdapter{static get(t,r,s){let u=Reflect.get(t,r,s);return"function"==typeof u?u.bind(t):u}static set(t,r,s,u){return Reflect.set(t,r,s,u)}static has(t,r){return Reflect.has(t,r)}static deleteProperty(t,r){return Reflect.deleteProperty(t,r)}}},9638:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(t,r){for(var s in r)Object.defineProperty(t,s,{enumerable:!0,get:r[s]})}(r,{ReadonlyRequestCookiesError:function(){return ReadonlyRequestCookiesError},RequestCookiesAdapter:function(){return RequestCookiesAdapter},getModifiedCookieValues:function(){return getModifiedCookieValues},appendMutableCookies:function(){return appendMutableCookies},MutableRequestCookiesAdapter:function(){return MutableRequestCookiesAdapter}});let u=s(2605),p=s(3304);let ReadonlyRequestCookiesError=class ReadonlyRequestCookiesError extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#cookiessetname-value-options")}static callable(){throw new ReadonlyRequestCookiesError}};let RequestCookiesAdapter=class RequestCookiesAdapter{static seal(t){return new Proxy(t,{get(t,r,s){switch(r){case"clear":case"delete":case"set":return ReadonlyRequestCookiesError.callable;default:return p.ReflectAdapter.get(t,r,s)}}})}};let h=Symbol.for("next.mutated.cookies");function getModifiedCookieValues(t){let r=t[h];return r&&Array.isArray(r)&&0!==r.length?r:[]}function appendMutableCookies(t,r){let s=getModifiedCookieValues(r);if(0===s.length)return!1;let p=new u.ResponseCookies(t),h=p.getAll();for(let t of s)p.set(t);for(let t of h)p.set(t);return!0}let MutableRequestCookiesAdapter=class MutableRequestCookiesAdapter{static wrap(t,r){let s=new u.ResponseCookies(new Headers);for(let r of t.getAll())s.set(r);let E=[],W=new Set,updateResponseCookies=()=>{var t;let p=null==fetch.__nextGetStaticStore?void 0:null==(t=fetch.__nextGetStaticStore.call(fetch))?void 0:t.getStore();p&&(p.pathWasRevalidated=!0);let h=s.getAll();if(E=h.filter(t=>W.has(t.name)),r){let t=[];for(let r of E){let s=new u.ResponseCookies(new Headers);s.set(r),t.push(s.toString())}r(t)}};return new Proxy(s,{get(t,r,s){switch(r){case h:return E;case"delete":return function(...r){W.add("string"==typeof r[0]?r[0]:r[0].name);try{t.delete(...r)}finally{updateResponseCookies()}};case"set":return function(...r){W.add("string"==typeof r[0]?r[0]:r[0].name);try{return t.set(...r)}finally{updateResponseCookies()}};default:return p.ReflectAdapter.get(t,r,s)}}})}}},2605:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(t,r){for(var s in r)Object.defineProperty(t,s,{enumerable:!0,get:r[s]})}(r,{RequestCookies:function(){return u.RequestCookies},ResponseCookies:function(){return u.ResponseCookies}});let u=s(6284)},6843:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"NextResponse",{enumerable:!0,get:function(){return NextResponse}});let u=s(4475),p=s(7561),h=s(2605),E=Symbol("internal response"),W=new Set([301,302,303,307,308]);function handleMiddlewareField(t,r){var s;if(null==t?void 0:null==(s=t.request)?void 0:s.headers){if(!(t.request.headers instanceof Headers))throw Error("request.headers must be an instance of Headers");let s=[];for(let[u,p]of t.request.headers)r.set("x-middleware-request-"+u,p),s.push(u);r.set("x-middleware-override-headers",s.join(","))}}let NextResponse=class NextResponse extends Response{constructor(t,r={}){super(t,r),this[E]={cookies:new h.ResponseCookies(this.headers),url:r.url?new u.NextURL(r.url,{headers:(0,p.toNodeOutgoingHttpHeaders)(this.headers),nextConfig:r.nextConfig}):void 0}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,url:this.url,body:this.body,bodyUsed:this.bodyUsed,headers:Object.fromEntries(this.headers),ok:this.ok,redirected:this.redirected,status:this.status,statusText:this.statusText,type:this.type}}get cookies(){return this[E].cookies}static json(t,r){let s=Response.json(t,r);return new NextResponse(s.body,s)}static redirect(t,r){let s="number"==typeof r?r:(null==r?void 0:r.status)??307;if(!W.has(s))throw RangeError('Failed to execute "redirect" on "response": Invalid status code');let u="object"==typeof r?r:{},h=new Headers(null==u?void 0:u.headers);return h.set("Location",(0,p.validateURL)(t)),new NextResponse(null,{...u,headers:h,status:s})}static rewrite(t,r){let s=new Headers(null==r?void 0:r.headers);return s.set("x-middleware-rewrite",(0,p.validateURL)(t)),handleMiddlewareField(r,s),new NextResponse(null,{...r,headers:s})}static next(t){let r=new Headers(null==t?void 0:t.headers);return r.set("x-middleware-next","1"),handleMiddlewareField(t,r),new NextResponse(null,{...t,headers:r})}}},7561:(t,r)=>{"use strict";function fromNodeOutgoingHttpHeaders(t){let r=new Headers;for(let[s,u]of Object.entries(t)){let t=Array.isArray(u)?u:[u];for(let u of t)void 0!==u&&("number"==typeof u&&(u=u.toString()),r.append(s,u))}return r}function splitCookiesString(t){var r,s,u,p,h,E=[],W=0;function skipWhitespace(){for(;W<t.length&&/\s/.test(t.charAt(W));)W+=1;return W<t.length}function notSpecialChar(){return"="!==(s=t.charAt(W))&&";"!==s&&","!==s}for(;W<t.length;){for(r=W,h=!1;skipWhitespace();)if(","===(s=t.charAt(W))){for(u=W,W+=1,skipWhitespace(),p=W;W<t.length&&notSpecialChar();)W+=1;W<t.length&&"="===t.charAt(W)?(h=!0,W=p,E.push(t.substring(r,u)),r=W):W=u+1}else W+=1;(!h||W>=t.length)&&E.push(t.substring(r,t.length))}return E}function toNodeOutgoingHttpHeaders(t){let r={},s=[];if(t)for(let[u,p]of t.entries())"set-cookie"===u.toLowerCase()?(s.push(...splitCookiesString(p)),r[u]=1===s.length?s[0]:s):r[u]=p;return r}function validateURL(t){try{return String(new URL(String(t)))}catch(r){throw Error(`URL is malformed "${String(t)}". Please use only absolute URLs - https://nextjs.org/docs/messages/middleware-relative-urls`,{cause:r})}}Object.defineProperty(r,"__esModule",{value:!0}),function(t,r){for(var s in r)Object.defineProperty(t,s,{enumerable:!0,get:r[s]})}(r,{fromNodeOutgoingHttpHeaders:function(){return fromNodeOutgoingHttpHeaders},splitCookiesString:function(){return splitCookiesString},toNodeOutgoingHttpHeaders:function(){return toNodeOutgoingHttpHeaders},validateURL:function(){return validateURL}})},6758:(t,r)=>{"use strict";function getHostname(t,r){let s;if((null==r?void 0:r.host)&&!Array.isArray(r.host))s=r.host.toString().split(":",1)[0];else{if(!t.hostname)return;s=t.hostname}return s.toLowerCase()}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"getHostname",{enumerable:!0,get:function(){return getHostname}})},2737:(t,r)=>{"use strict";function detectDomainLocale(t,r,s){if(t)for(let h of(s&&(s=s.toLowerCase()),t)){var u,p;let t=null==(u=h.domain)?void 0:u.split(":",1)[0].toLowerCase();if(r===t||s===h.defaultLocale.toLowerCase()||(null==(p=h.locales)?void 0:p.some(t=>t.toLowerCase()===s)))return h}}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"detectDomainLocale",{enumerable:!0,get:function(){return detectDomainLocale}})},667:(t,r)=>{"use strict";function normalizeLocalePath(t,r){let s;let u=t.split("/");return(r||[]).some(r=>!!u[1]&&u[1].toLowerCase()===r.toLowerCase()&&(s=r,u.splice(1,1),t=u.join("/")||"/",!0)),{pathname:t,detectedLocale:s}}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"normalizeLocalePath",{enumerable:!0,get:function(){return normalizeLocalePath}})},6880:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"addLocale",{enumerable:!0,get:function(){return addLocale}});let u=s(311),p=s(5268);function addLocale(t,r,s,h){if(!r||r===s)return t;let E=t.toLowerCase();return!h&&((0,p.pathHasPrefix)(E,"/api")||(0,p.pathHasPrefix)(E,"/"+r.toLowerCase()))?t:(0,u.addPathPrefix)(t,"/"+r)}},311:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"addPathPrefix",{enumerable:!0,get:function(){return addPathPrefix}});let u=s(2303);function addPathPrefix(t,r){if(!t.startsWith("/")||!r)return t;let{pathname:s,query:p,hash:h}=(0,u.parsePath)(t);return""+r+s+p+h}},1388:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"addPathSuffix",{enumerable:!0,get:function(){return addPathSuffix}});let u=s(2303);function addPathSuffix(t,r){if(!t.startsWith("/")||!r)return t;let{pathname:s,query:p,hash:h}=(0,u.parsePath)(t);return""+s+r+p+h}},6249:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"formatNextPathnameInfo",{enumerable:!0,get:function(){return formatNextPathnameInfo}});let u=s(1857),p=s(311),h=s(1388),E=s(6880);function formatNextPathnameInfo(t){let r=(0,E.addLocale)(t.pathname,t.locale,t.buildId?void 0:t.defaultLocale,t.ignorePrefix);return(t.buildId||!t.trailingSlash)&&(r=(0,u.removeTrailingSlash)(r)),t.buildId&&(r=(0,h.addPathSuffix)((0,p.addPathPrefix)(r,"/_next/data/"+t.buildId),"/"===t.pathname?"index.json":".json")),r=(0,p.addPathPrefix)(r,t.basePath),!t.buildId&&t.trailingSlash?r.endsWith("/")?r:(0,h.addPathSuffix)(r,"/"):(0,u.removeTrailingSlash)(r)}},8227:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"getNextPathnameInfo",{enumerable:!0,get:function(){return getNextPathnameInfo}});let u=s(667),p=s(3700),h=s(5268);function getNextPathnameInfo(t,r){var s,E;let{basePath:W,i18n:J,trailingSlash:R}=null!=(s=r.nextConfig)?s:{},K={pathname:t,trailingSlash:"/"!==t?t.endsWith("/"):R};W&&(0,h.pathHasPrefix)(K.pathname,W)&&(K.pathname=(0,p.removePathPrefix)(K.pathname,W),K.basePath=W);let U=K.pathname;if(K.pathname.startsWith("/_next/data/")&&K.pathname.endsWith(".json")){let t=K.pathname.replace(/^\/_next\/data\//,"").replace(/\.json$/,"").split("/"),s=t[0];K.buildId=s,U="index"!==t[1]?"/"+t.slice(1).join("/"):"/",!0===r.parseData&&(K.pathname=U)}if(J){let t=r.i18nProvider?r.i18nProvider.analyze(K.pathname):(0,u.normalizeLocalePath)(K.pathname,J.locales);K.locale=t.detectedLocale,K.pathname=null!=(E=t.pathname)?E:K.pathname,!t.detectedLocale&&K.buildId&&(t=r.i18nProvider?r.i18nProvider.analyze(U):(0,u.normalizeLocalePath)(U,J.locales)).detectedLocale&&(K.locale=t.detectedLocale)}return K}},2303:(t,r)=>{"use strict";function parsePath(t){let r=t.indexOf("#"),s=t.indexOf("?"),u=s>-1&&(r<0||s<r);return u||r>-1?{pathname:t.substring(0,u?s:r),query:u?t.substring(s,r>-1?r:void 0):"",hash:r>-1?t.slice(r):""}:{pathname:t,query:"",hash:""}}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"parsePath",{enumerable:!0,get:function(){return parsePath}})},5268:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"pathHasPrefix",{enumerable:!0,get:function(){return pathHasPrefix}});let u=s(2303);function pathHasPrefix(t,r){if("string"!=typeof t)return!1;let{pathname:s}=(0,u.parsePath)(t);return s===r||s.startsWith(r+"/")}},3700:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"removePathPrefix",{enumerable:!0,get:function(){return removePathPrefix}});let u=s(5268);function removePathPrefix(t,r){if(!(0,u.pathHasPrefix)(t,r))return t;let s=t.slice(r.length);return s.startsWith("/")?s:"/"+s}},1857:(t,r)=>{"use strict";function removeTrailingSlash(t){return t.replace(/\/$/,"")||"/"}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"removeTrailingSlash",{enumerable:!0,get:function(){return removeTrailingSlash}})},532:(t,r,s)=>{"use strict";t.exports=s(9084)},5256:(t,r,s)=>{r.OAuth=s(6508).OAuth,r.OAuthEcho=s(6508).OAuthEcho,r.OAuth2=s(3377).OAuth2},2906:t=>{"use strict";t.exports.isAnEarlyCloseHost=function(t){return t&&t.match(".*google(apis)?.com$")}},6508:(t,r,s)=>{var u=s(6113),p=s(2224),h=s(3685),E=s(5687),W=s(7310),J=s(3477),R=s(2906);r.OAuth=function(t,r,s,u,p,h,E,W,J){if(this._isEcho=!1,this._requestUrl=t,this._accessUrl=r,this._consumerKey=s,this._consumerSecret=this._encodeData(u),"RSA-SHA1"==E&&(this._privateKey=u),this._version=p,void 0===h?this._authorize_callback="oob":this._authorize_callback=h,"PLAINTEXT"!=E&&"HMAC-SHA1"!=E&&"RSA-SHA1"!=E)throw Error("Un-supported signature method: "+E);this._signatureMethod=E,this._nonceSize=W||32,this._headers=J||{Accept:"*/*",Connection:"close","User-Agent":"Node authentication"},this._clientOptions=this._defaultClientOptions={requestTokenHttpMethod:"POST",accessTokenHttpMethod:"POST",followRedirects:!0},this._oauthParameterSeperator=","},r.OAuthEcho=function(t,r,s,u,p,h,E,W){if(this._isEcho=!0,this._realm=t,this._verifyCredentials=r,this._consumerKey=s,this._consumerSecret=this._encodeData(u),"RSA-SHA1"==h&&(this._privateKey=u),this._version=p,"PLAINTEXT"!=h&&"HMAC-SHA1"!=h&&"RSA-SHA1"!=h)throw Error("Un-supported signature method: "+h);this._signatureMethod=h,this._nonceSize=E||32,this._headers=W||{Accept:"*/*",Connection:"close","User-Agent":"Node authentication"},this._oauthParameterSeperator=","},r.OAuthEcho.prototype=r.OAuth.prototype,r.OAuth.prototype._getTimestamp=function(){return Math.floor(new Date().getTime()/1e3)},r.OAuth.prototype._encodeData=function(t){return null==t||""==t?"":encodeURIComponent(t).replace(/\!/g,"%21").replace(/\'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")},r.OAuth.prototype._decodeData=function(t){return null!=t&&(t=t.replace(/\+/g," ")),decodeURIComponent(t)},r.OAuth.prototype._getSignature=function(t,r,s,u){var p=this._createSignatureBase(t,r,s);return this._createSignature(p,u)},r.OAuth.prototype._normalizeUrl=function(t){var r=W.parse(t,!0),s="";return r.port&&("http:"==r.protocol&&"80"!=r.port||"https:"==r.protocol&&"443"!=r.port)&&(s=":"+r.port),r.pathname&&""!=r.pathname||(r.pathname="/"),r.protocol+"//"+r.hostname+s+r.pathname},r.OAuth.prototype._isParameterNameAnOAuthParameter=function(t){var r=t.match("^oauth_");return!!r&&"oauth_"===r[0]},r.OAuth.prototype._buildAuthorizationHeaders=function(t){var r="OAuth ";this._isEcho&&(r+='realm="'+this._realm+'",');for(var s=0;s<t.length;s++)this._isParameterNameAnOAuthParameter(t[s][0])&&(r+=""+this._encodeData(t[s][0])+'="'+this._encodeData(t[s][1])+'"'+this._oauthParameterSeperator);return r.substring(0,r.length-this._oauthParameterSeperator.length)},r.OAuth.prototype._makeArrayOfArgumentsHash=function(t){var r=[];for(var s in t)if(t.hasOwnProperty(s)){var u=t[s];if(Array.isArray(u))for(var p=0;p<u.length;p++)r[r.length]=[s,u[p]];else r[r.length]=[s,u]}return r},r.OAuth.prototype._sortRequestParams=function(t){return t.sort(function(t,r){return t[0]==r[0]?t[1]<r[1]?-1:1:t[0]<r[0]?-1:1}),t},r.OAuth.prototype._normaliseRequestParams=function(t){for(var r=this._makeArrayOfArgumentsHash(t),s=0;s<r.length;s++)r[s][0]=this._encodeData(r[s][0]),r[s][1]=this._encodeData(r[s][1]);r=this._sortRequestParams(r);for(var t="",s=0;s<r.length;s++)t+=r[s][0]+"="+r[s][1],s<r.length-1&&(t+="&");return t},r.OAuth.prototype._createSignatureBase=function(t,r,s){return r=this._encodeData(this._normalizeUrl(r)),s=this._encodeData(s),t.toUpperCase()+"&"+r+"&"+s},r.OAuth.prototype._createSignature=function(t,r){if(void 0===r)var r="";else r=this._encodeData(r);var s=this._consumerSecret+"&"+r,h="";return"PLAINTEXT"==this._signatureMethod?h=s:"RSA-SHA1"==this._signatureMethod?(s=this._privateKey||"",h=u.createSign("RSA-SHA1").update(t).sign(s,"base64")):h=u.Hmac?u.createHmac("sha1",s).update(t).digest("base64"):p.HMACSHA1(s,t),h},r.OAuth.prototype.NONCE_CHARS=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","0","1","2","3","4","5","6","7","8","9"],r.OAuth.prototype._getNonce=function(t){for(var r,s=[],u=this.NONCE_CHARS,p=u.length,h=0;h<t;h++)r=Math.floor(Math.random()*p),s[h]=u[r];return s.join("")},r.OAuth.prototype._createClient=function(t,r,s,u,p,W){return(W?E:h).request({host:r,port:t,path:u,method:s,headers:p})},r.OAuth.prototype._prepareParameters=function(t,r,s,u,p){var h={oauth_timestamp:this._getTimestamp(),oauth_nonce:this._getNonce(this._nonceSize),oauth_version:this._version,oauth_signature_method:this._signatureMethod,oauth_consumer_key:this._consumerKey};if(t&&(h.oauth_token=t),this._isEcho)K=this._getSignature("GET",this._verifyCredentials,this._normaliseRequestParams(h),r);else{if(p)for(var E in p)p.hasOwnProperty(E)&&(h[E]=p[E]);var R=W.parse(u,!1);if(R.query){var K,U,D=J.parse(R.query);for(var E in D){var G=D[E];if("object"==typeof G)for(U in G)h[E+"["+U+"]"]=G[U];else h[E]=G}}K=this._getSignature(s,u,this._normaliseRequestParams(h),r)}var Y=this._sortRequestParams(this._makeArrayOfArgumentsHash(h));return Y[Y.length]=["oauth_signature",K],Y},r.OAuth.prototype._performSecureRequest=function(t,r,s,u,p,h,E,K){var U,D,G=this._prepareParameters(t,r,s,u,p);E||(E="application/x-www-form-urlencoded");var Y=W.parse(u,!1);"http:"!=Y.protocol||Y.port||(Y.port=80),"https:"!=Y.protocol||Y.port||(Y.port=443);var X={},Z=this._buildAuthorizationHeaders(G);for(var Q in this._isEcho?X["X-Verify-Credentials-Authorization"]=Z:X.Authorization=Z,X.Host=Y.host,this._headers)this._headers.hasOwnProperty(Q)&&(X[Q]=this._headers[Q]);for(var Q in p)this._isParameterNameAnOAuthParameter(Q)&&delete p[Q];("POST"==s||"PUT"==s)&&null==h&&null!=p&&(h=J.stringify(p).replace(/\!/g,"%21").replace(/\'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")),h?Buffer.isBuffer(h)?X["Content-length"]=h.length:X["Content-length"]=Buffer.byteLength(h):X["Content-length"]=0,X["Content-Type"]=E,Y.pathname&&""!=Y.pathname||(Y.pathname="/"),U=Y.query?Y.pathname+"?"+Y.query:Y.pathname,D="https:"==Y.protocol?this._createClient(Y.port,Y.hostname,s,U,X,!0):this._createClient(Y.port,Y.hostname,s,U,X);var ee=this._clientOptions;if(!K)return("POST"==s||"PUT"==s)&&null!=h&&""!=h&&D.write(h),D;var et="",er=this,en=R.isAnEarlyCloseHost(Y.hostname),ei=!1,passBackControl=function(u){ei||(ei=!0,u.statusCode>=200&&u.statusCode<=299?K(null,et,u):(301==u.statusCode||302==u.statusCode)&&ee.followRedirects&&u.headers&&u.headers.location?er._performSecureRequest(t,r,s,u.headers.location,p,h,E,K):K({statusCode:u.statusCode,data:et},et,u))};D.on("response",function(t){t.setEncoding("utf8"),t.on("data",function(t){et+=t}),t.on("end",function(){passBackControl(t)}),t.on("close",function(){en&&passBackControl(t)})}),D.on("error",function(t){ei||(ei=!0,K(t))}),("POST"==s||"PUT"==s)&&null!=h&&""!=h&&D.write(h),D.end()},r.OAuth.prototype.setClientOptions=function(t){var r,s={},u=Object.prototype.hasOwnProperty;for(r in this._defaultClientOptions)u.call(t,r)?s[r]=t[r]:s[r]=this._defaultClientOptions[r];this._clientOptions=s},r.OAuth.prototype.getOAuthAccessToken=function(t,r,s,u){var p={};"function"==typeof s?u=s:p.oauth_verifier=s,this._performSecureRequest(t,r,this._clientOptions.accessTokenHttpMethod,this._accessUrl,p,null,null,function(t,r,s){if(t)u(t);else{var p=J.parse(r),h=p.oauth_token;delete p.oauth_token;var E=p.oauth_token_secret;delete p.oauth_token_secret,u(null,h,E,p)}})},r.OAuth.prototype.getProtectedResource=function(t,r,s,u,p){this._performSecureRequest(s,u,r,t,null,"",null,p)},r.OAuth.prototype.delete=function(t,r,s,u){return this._performSecureRequest(r,s,"DELETE",t,null,"",null,u)},r.OAuth.prototype.get=function(t,r,s,u){return this._performSecureRequest(r,s,"GET",t,null,"",null,u)},r.OAuth.prototype._putOrPost=function(t,r,s,u,p,h,E){var W=null;return"function"==typeof h&&(E=h,h=null),"string"==typeof p||Buffer.isBuffer(p)||(h="application/x-www-form-urlencoded",W=p,p=null),this._performSecureRequest(s,u,t,r,W,p,h,E)},r.OAuth.prototype.put=function(t,r,s,u,p,h){return this._putOrPost("PUT",t,r,s,u,p,h)},r.OAuth.prototype.post=function(t,r,s,u,p,h){return this._putOrPost("POST",t,r,s,u,p,h)},r.OAuth.prototype.getOAuthRequestToken=function(t,r){"function"==typeof t&&(r=t,t={}),this._authorize_callback&&(t.oauth_callback=this._authorize_callback),this._performSecureRequest(null,null,this._clientOptions.requestTokenHttpMethod,this._requestUrl,t,null,null,function(t,s,u){if(t)r(t);else{var p=J.parse(s),h=p.oauth_token,E=p.oauth_token_secret;delete p.oauth_token,delete p.oauth_token_secret,r(null,h,E,p)}})},r.OAuth.prototype.signUrl=function(t,r,s,u){if(void 0===u)var u="GET";for(var p=this._prepareParameters(r,s,u,t,{}),h=W.parse(t,!1),E="",J=0;J<p.length;J++)E+=p[J][0]+"="+this._encodeData(p[J][1])+"&";return E=E.substring(0,E.length-1),h.protocol+"//"+h.host+h.pathname+"?"+E},r.OAuth.prototype.authHeader=function(t,r,s,u){if(void 0===u)var u="GET";var p=this._prepareParameters(r,s,u,t,{});return this._buildAuthorizationHeaders(p)}},3377:(t,r,s)=>{var u=s(3477),p=(s(6113),s(5687)),h=s(3685),E=s(7310),W=s(2906);r.OAuth2=function(t,r,s,u,p,h){this._clientId=t,this._clientSecret=r,this._baseSite=s,this._authorizeUrl=u||"/oauth/authorize",this._accessTokenUrl=p||"/oauth/access_token",this._accessTokenName="access_token",this._authMethod="Bearer",this._customHeaders=h||{},this._useAuthorizationHeaderForGET=!1,this._agent=void 0},r.OAuth2.prototype.setAgent=function(t){this._agent=t},r.OAuth2.prototype.setAccessTokenName=function(t){this._accessTokenName=t},r.OAuth2.prototype.setAuthMethod=function(t){this._authMethod=t},r.OAuth2.prototype.useAuthorizationHeaderforGET=function(t){this._useAuthorizationHeaderForGET=t},r.OAuth2.prototype._getAccessTokenUrl=function(){return this._baseSite+this._accessTokenUrl},r.OAuth2.prototype.buildAuthHeader=function(t){return this._authMethod+" "+t},r.OAuth2.prototype._chooseHttpLibrary=function(t){var r=p;return"https:"!=t.protocol&&(r=h),r},r.OAuth2.prototype._request=function(t,r,s,p,h,W){var J=E.parse(r,!0);"https:"!=J.protocol||J.port||(J.port=443);var R=this._chooseHttpLibrary(J),K={};for(var U in this._customHeaders)K[U]=this._customHeaders[U];if(s)for(var U in s)K[U]=s[U];K.Host=J.host,K["User-Agent"]||(K["User-Agent"]="Node-oauth"),p?Buffer.isBuffer(p)?K["Content-Length"]=p.length:K["Content-Length"]=Buffer.byteLength(p):K["Content-length"]=0,!h||"Authorization"in K||(J.query||(J.query={}),J.query[this._accessTokenName]=h);var D=u.stringify(J.query);D&&(D="?"+D);var G={host:J.hostname,port:J.port,path:J.pathname+D,method:t,headers:K};this._executeRequest(R,G,p,W)},r.OAuth2.prototype._executeRequest=function(t,r,s,u){var p=W.isAnEarlyCloseHost(r.host),h=!1;function passBackControl(t,r){h||(h=!0,t.statusCode>=200&&t.statusCode<=299||301==t.statusCode||302==t.statusCode?u(null,r,t):u({statusCode:t.statusCode,data:r}))}var E="";this._agent&&(r.agent=this._agent);var J=t.request(r);J.on("response",function(t){t.on("data",function(t){E+=t}),t.on("close",function(r){p&&passBackControl(t,E)}),t.addListener("end",function(){passBackControl(t,E)})}),J.on("error",function(t){h=!0,u(t)}),("POST"==r.method||"PUT"==r.method)&&s&&J.write(s),J.end()},r.OAuth2.prototype.getAuthorizeUrl=function(t){var t=t||{};return t.client_id=this._clientId,this._baseSite+this._authorizeUrl+"?"+u.stringify(t)},r.OAuth2.prototype.getOAuthAccessToken=function(t,r,s){var r=r||{};r.client_id=this._clientId,r.client_secret=this._clientSecret;var p="refresh_token"===r.grant_type?"refresh_token":"code";r[p]=t;var h=u.stringify(r);this._request("POST",this._getAccessTokenUrl(),{"Content-Type":"application/x-www-form-urlencoded"},h,null,function(t,r,p){if(t)s(t);else{try{h=JSON.parse(r)}catch(t){h=u.parse(r)}var h,E=h.access_token,W=h.refresh_token;delete h.refresh_token,s(null,E,W,h)}})},r.OAuth2.prototype.getProtectedResource=function(t,r,s){this._request("GET",t,{},"",r,s)},r.OAuth2.prototype.get=function(t,r,s){if(this._useAuthorizationHeaderForGET){var u={Authorization:this.buildAuthHeader(r)};r=null}else u={};this._request("GET",t,u,"",r,s)}},2224:(t,r)=>{function b64_hmac_sha1(t,r){return rstr2b64(rstr_hmac_sha1(str2rstr_utf8(t),str2rstr_utf8(r)))}function rstr_hmac_sha1(t,r){var s=rstr2binb(t);s.length>16&&(s=binb_sha1(s,8*t.length));for(var u=Array(16),p=Array(16),h=0;h<16;h++)u[h]=909522486^s[h],p[h]=1549556828^s[h];var E=binb_sha1(u.concat(rstr2binb(r)),512+8*r.length);return binb2rstr(binb_sha1(p.concat(E),672))}function rstr2b64(t){for(var r="",s=t.length,u=0;u<s;u+=3)for(var p=t.charCodeAt(u)<<16|(u+1<s?t.charCodeAt(u+1)<<8:0)|(u+2<s?t.charCodeAt(u+2):0),h=0;h<4;h++)8*u+6*h>8*t.length?r+="=":r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(p>>>6*(3-h)&63);return r}function str2rstr_utf8(t){for(var r,s,u="",p=-1;++p<t.length;)r=t.charCodeAt(p),s=p+1<t.length?t.charCodeAt(p+1):0,55296<=r&&r<=56319&&56320<=s&&s<=57343&&(r=65536+((1023&r)<<10)+(1023&s),p++),r<=127?u+=String.fromCharCode(r):r<=2047?u+=String.fromCharCode(192|r>>>6&31,128|63&r):r<=65535?u+=String.fromCharCode(224|r>>>12&15,128|r>>>6&63,128|63&r):r<=2097151&&(u+=String.fromCharCode(240|r>>>18&7,128|r>>>12&63,128|r>>>6&63,128|63&r));return u}function rstr2binb(t){for(var r=Array(t.length>>2),s=0;s<r.length;s++)r[s]=0;for(var s=0;s<8*t.length;s+=8)r[s>>5]|=(255&t.charCodeAt(s/8))<<24-s%32;return r}function binb2rstr(t){for(var r="",s=0;s<32*t.length;s+=8)r+=String.fromCharCode(t[s>>5]>>>24-s%32&255);return r}function binb_sha1(t,r){t[r>>5]|=128<<24-r%32,t[(r+64>>9<<4)+15]=r;for(var s=Array(80),u=1732584193,p=-271733879,h=-1732584194,E=271733878,W=-1009589776,J=0;J<t.length;J+=16){for(var R=u,K=p,U=h,D=E,G=W,Y=0;Y<80;Y++){Y<16?s[Y]=t[J+Y]:s[Y]=bit_rol(s[Y-3]^s[Y-8]^s[Y-14]^s[Y-16],1);var X=safe_add(safe_add(bit_rol(u,5),sha1_ft(Y,p,h,E)),safe_add(safe_add(W,s[Y]),sha1_kt(Y)));W=E,E=h,h=bit_rol(p,30),p=u,u=X}u=safe_add(u,R),p=safe_add(p,K),h=safe_add(h,U),E=safe_add(E,D),W=safe_add(W,G)}return[u,p,h,E,W]}function sha1_ft(t,r,s,u){return t<20?r&s|~r&u:t<40?r^s^u:t<60?r&s|r&u|s&u:r^s^u}function sha1_kt(t){return t<20?1518500249:t<40?1859775393:t<60?-1894007588:-899497514}function safe_add(t,r){var s=(65535&t)+(65535&r);return(t>>16)+(r>>16)+(s>>16)<<16|65535&s}function bit_rol(t,r){return t<<r|t>>>32-r}r.HMACSHA1=function(t,r){return b64_hmac_sha1(t,r)}},7147:(t,r,s)=>{"use strict";let u;let{strict:p}=s(9491),{createHash:h}=s(6113),{format:E}=s(3837),W=s(5567);if(Buffer.isEncoding("base64url"))u=t=>t.toString("base64url");else{let fromBase64=t=>t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_");u=t=>fromBase64(t.toString("base64"))}function getHash(t,r){switch(t){case"HS256":case"RS256":case"PS256":case"ES256":case"ES256K":return h("sha256");case"HS384":case"RS384":case"PS384":case"ES384":return h("sha384");case"HS512":case"RS512":case"PS512":case"ES512":case"Ed25519":return h("sha512");case"Ed448":if(!W)throw TypeError("Ed448 *_hash calculation is not supported in your Node.js runtime version");return h("shake256",{outputLength:114});case"EdDSA":switch(r){case"Ed25519":return h("sha512");case"Ed448":if(!W)throw TypeError("Ed448 *_hash calculation is not supported in your Node.js runtime version");return h("shake256",{outputLength:114});default:throw TypeError("unrecognized or invalid EdDSA curve provided")}default:throw TypeError("unrecognized or invalid JWS algorithm provided")}}function generate(t,r,s){let p=getHash(r,s).update(t).digest();return u(p.slice(0,p.length/2))}function validate(t,r,s,u,h){let W,J;if("string"!=typeof t.claim||!t.claim)throw TypeError("names.claim must be a non-empty string");if("string"!=typeof t.source||!t.source)throw TypeError("names.source must be a non-empty string");p("string"==typeof r&&r,`${t.claim} must be a non-empty string`),p("string"==typeof s&&s,`${t.source} must be a non-empty string`);try{W=generate(s,u,h)}catch(r){J=E("%s could not be validated (%s)",t.claim,r.message)}J=J||E("%s mismatch, expected %s, got: %s",t.claim,W,r),p.equal(W,r,J)}t.exports={validate,generate}},5567:(t,r,s)=>{"use strict";let u=s(6113),[p,h]=process.version.substring(1).split(".").map(t=>parseInt(t,10)),E=(p>12||12===p&&h>=8)&&u.getHashes().includes("shake256");t.exports=E},5913:(t,r,s)=>{"use strict";let u;let{inspect:p}=s(3837),h=s(3685),E=s(6113),{strict:W}=s(9491),J=s(3477),R=s(7310),{URL:K,URLSearchParams:U}=s(7310),D=s(8541),G=s(7147),Y=s(7884),X=s(4592),Z=s(9752),Q=s(2956),ee=s(8752),{assertSigningAlgValuesSupport:et,assertIssuerConfiguration:er}=s(1946),en=s(8821),ei=s(3288),eo=s(7298),ea=s(3308),{OPError:es,RPError:el}=s(4105),ec=s(2221),{random:eu}=s(2827),ed=s(6745),{CLOCK_TOLERANCE:ep}=s(1513),{keystores:eh}=s(276),ef=s(5713),ey=s(4054),{authenticatedPost:eg,resolveResponseType:e_,resolveRedirectUri:em}=s(9092),{queryKeyStore:ev}=s(7773),ew=s(5274),[eb,ek]=process.version.slice(1).split(".").map(t=>parseInt(t,10)),eS=eb>=17||16===eb&&ek>=9,eE=Symbol(),eA=Symbol(),eP=Symbol();function pickCb(t){return en(t,"access_token","code","error_description","error_uri","error","expires_in","id_token","iss","response","session_state","state","token_type")}function authorizationHeaderValue(t,r="Bearer"){return`${r} ${t}`}function getSearchParams(t){let r=R.parse(t);return r.search?J.parse(r.search.substring(1)):{}}function verifyPresence(t,r,s){if(void 0===t[s])throw new el({message:`missing required JWT property ${s}`,jwt:r})}function authorizationParams(t){let r={client_id:this.client_id,scope:"openid",response_type:e_.call(this),redirect_uri:em.call(this),...t};return Object.entries(r).forEach(([t,s])=>{null==s?delete r[t]:"claims"===t&&"object"==typeof s?r[t]=JSON.stringify(s):"resource"===t&&Array.isArray(s)?r[t]=s:"string"!=typeof s&&(r[t]=String(s))}),r}function getKeystore(t){if(!ei(t)||!Array.isArray(t.keys)||t.keys.some(t=>!ei(t)||!("kty"in t)))throw TypeError("jwks must be a JSON Web Key Set formatted object");return ef.fromJWKS(t,{onlyPrivate:!0})}function checkBasicSupport(t,r){try{let s=t.issuer.token_endpoint_auth_methods_supported;!s.includes(r.token_endpoint_auth_method)&&s.includes("client_secret_post")&&(r.token_endpoint_auth_method="client_secret_post")}catch(t){}}function handleCommonMistakes(t,r,s){if(r.token_endpoint_auth_method||checkBasicSupport(t,s),r.redirect_uri){if(r.redirect_uris)throw TypeError("provide a redirect_uri or redirect_uris, not both");s.redirect_uris=[r.redirect_uri],delete s.redirect_uri}if(r.response_type){if(r.response_types)throw TypeError("provide a response_type or response_types, not both");s.response_types=[r.response_type],delete s.response_type}}function getDefaultsForEndpoint(t,r,s){if(!r[`${t}_endpoint`])return;let u=s.token_endpoint_auth_method,p=s.token_endpoint_auth_signing_alg,h=`${t}_endpoint_auth_method`,E=`${t}_endpoint_auth_signing_alg`;void 0===s[h]&&void 0===s[E]&&(void 0!==u&&(s[h]=u),void 0!==p&&(s[E]=p))}let BaseClient=class BaseClient{#e;#t;#r;#n;constructor(t,r,s={},u,p){if(this.#e=new Map,this.#t=t,this.#r=r,"string"!=typeof s.client_id||!s.client_id)throw TypeError("client_id is required");let h={grant_types:["authorization_code"],id_token_signed_response_alg:"RS256",authorization_signed_response_alg:"RS256",response_types:["code"],token_endpoint_auth_method:"client_secret_basic",...this.fapi1()?{grant_types:["authorization_code","implicit"],id_token_signed_response_alg:"PS256",authorization_signed_response_alg:"PS256",response_types:["code id_token"],tls_client_certificate_bound_access_tokens:!0,token_endpoint_auth_method:void 0}:void 0,...this.fapi2()?{id_token_signed_response_alg:"PS256",authorization_signed_response_alg:"PS256",token_endpoint_auth_method:void 0}:void 0,...s};if(this.fapi())switch(h.token_endpoint_auth_method){case"self_signed_tls_client_auth":case"tls_client_auth":break;case"private_key_jwt":if(!u)throw TypeError("jwks is required");break;case void 0:throw TypeError("token_endpoint_auth_method is required");default:throw TypeError("invalid or unsupported token_endpoint_auth_method")}if(this.fapi2()&&(h.tls_client_certificate_bound_access_tokens&&h.dpop_bound_access_tokens||!h.tls_client_certificate_bound_access_tokens&&!h.dpop_bound_access_tokens))throw TypeError("either tls_client_certificate_bound_access_tokens or dpop_bound_access_tokens must be set to true");if(handleCommonMistakes(this,s,h),et("token",this.issuer,h),["introspection","revocation"].forEach(t=>{getDefaultsForEndpoint(t,this.issuer,h),et(t,this.issuer,h)}),Object.entries(h).forEach(([t,r])=>{this.#e.set(t,r),this[t]||Object.defineProperty(this,t,{get(){return this.#e.get(t)},enumerable:!0})}),void 0!==u){let t=getKeystore.call(this,u);eh.set(this,t)}null!=p&&p.additionalAuthorizedParties&&(this.#n=ey(p.additionalAuthorizedParties)),this[ep]=0}authorizationUrl(t={}){if(!ei(t))throw TypeError("params must be a plain object");er(this.issuer,"authorization_endpoint");let r=new K(this.issuer.authorization_endpoint);for(let[s,u]of Object.entries(authorizationParams.call(this,t)))if(Array.isArray(u))for(let t of(r.searchParams.delete(s),u))r.searchParams.append(s,t);else r.searchParams.set(s,u);return r.href.replace(/\+/g,"%20")}authorizationPost(t={}){if(!ei(t))throw TypeError("params must be a plain object");let r=authorizationParams.call(this,t),s=Object.keys(r).map(t=>`<input type="hidden" name="${t}" value="${r[t]}"/>`).join("\n");return`<!DOCTYPE html>
<head>
<title>Requesting Authorization</title>
</head>
<body onload="javascript:document.forms[0].submit()">
<form method="post" action="${this.issuer.authorization_endpoint}">
  ${s}
</form>
</body>
</html>`}endSessionUrl(t={}){let r;er(this.issuer,"end_session_endpoint");let{0:s,length:u}=this.post_logout_redirect_uris||[],{post_logout_redirect_uri:p=1===u?s:void 0}=t;if({id_token_hint:r,...t}=t,r instanceof ea){if(!r.id_token)throw TypeError("id_token not present in TokenSet");r=r.id_token}let h=R.parse(this.issuer.end_session_endpoint),E=Q(getSearchParams(this.issuer.end_session_endpoint),t,{post_logout_redirect_uri:p,client_id:this.client_id},{id_token_hint:r});return Object.entries(E).forEach(([t,r])=>{null==r&&delete E[t]}),h.search=null,h.query=E,R.format(h)}callbackParams(t){let r=t instanceof h.IncomingMessage||t&&t.method&&t.url,s="string"==typeof t;if(!s&&!r)throw TypeError("#callbackParams only accepts string urls, http.IncomingMessage or a lookalike");if(!r)return pickCb(getSearchParams(t));switch(t.method){case"GET":return pickCb(getSearchParams(t.url));case"POST":if(void 0===t.body)throw TypeError("incoming message body missing, include a body parser prior to this method call");switch(typeof t.body){case"object":case"string":if(Buffer.isBuffer(t.body))return pickCb(J.parse(t.body.toString("utf-8")));if("string"==typeof t.body)return pickCb(J.parse(t.body));return pickCb(t.body);default:throw TypeError("invalid IncomingMessage body object")}default:throw TypeError("invalid IncomingMessage method")}}async callback(t,r,s={},{exchangeBody:u,clientAssertionPayload:p,DPoP:h}={}){let E=pickCb(r);if(!s.jarm||"response"in r){if("response"in r){let t=await this.decryptJARM(E.response);E=await this.validateJARM(t)}}else throw new el({message:"expected a JARM response",checks:s,params:E});if(this.default_max_age&&!s.max_age&&(s.max_age=this.default_max_age),E.state&&!s.state)throw TypeError("checks.state argument is missing");if(!E.state&&s.state)throw new el({message:"state missing from the response",checks:s,params:E});if(s.state!==E.state)throw new el({printf:["state mismatch, expected %s, got: %s",s.state,E.state],checks:s,params:E});if("iss"in E){if(er(this.issuer,"issuer"),E.iss!==this.issuer.issuer)throw new el({printf:["iss mismatch, expected %s, got: %s",this.issuer.issuer,E.iss],params:E})}else if(this.issuer.authorization_response_iss_parameter_supported&&!("id_token"in E)&&!("response"in r))throw new el({message:"iss missing from the response",params:E});if(E.error)throw new es(E);let W={code:["code"],id_token:["id_token"],token:["access_token","token_type"]};if(s.response_type){for(let t of s.response_type.split(" "))if("none"===t){if(E.code||E.id_token||E.access_token)throw new el({message:'unexpected params encountered for "none" response',checks:s,params:E})}else for(let r of W[t])if(!E[r])throw new el({message:`${r} missing from response`,checks:s,params:E})}if(E.id_token){let t=new ea(E);if(await this.decryptIdToken(t),await this.validateIdToken(t,s.nonce,"authorization",s.max_age,s.state),!E.code)return t}if(E.code){let r=await this.grant({...u,grant_type:"authorization_code",code:E.code,redirect_uri:t,code_verifier:s.code_verifier},{clientAssertionPayload:p,DPoP:h});return await this.decryptIdToken(r),await this.validateIdToken(r,s.nonce,"token",s.max_age),E.session_state&&(r.session_state=E.session_state),r}return new ea(E)}async oauthCallback(t,r,s={},{exchangeBody:u,clientAssertionPayload:p,DPoP:h}={}){let E=pickCb(r);if(!s.jarm||"response"in r){if("response"in r){let t=await this.decryptJARM(E.response);E=await this.validateJARM(t)}}else throw new el({message:"expected a JARM response",checks:s,params:E});if(E.state&&!s.state)throw TypeError("checks.state argument is missing");if(!E.state&&s.state)throw new el({message:"state missing from the response",checks:s,params:E});if(s.state!==E.state)throw new el({printf:["state mismatch, expected %s, got: %s",s.state,E.state],checks:s,params:E});if("iss"in E){if(er(this.issuer,"issuer"),E.iss!==this.issuer.issuer)throw new el({printf:["iss mismatch, expected %s, got: %s",this.issuer.issuer,E.iss],params:E})}else if(this.issuer.authorization_response_iss_parameter_supported&&!("id_token"in E)&&!("response"in r))throw new el({message:"iss missing from the response",params:E});if(E.error)throw new es(E);if("string"==typeof E.id_token&&E.id_token.length)throw new el({message:"id_token detected in the response, you must use client.callback() instead of client.oauthCallback()",params:E});delete E.id_token;let W={code:["code"],token:["access_token","token_type"]};if(s.response_type)for(let t of s.response_type.split(" ")){if("none"===t&&(E.code||E.id_token||E.access_token))throw new el({message:'unexpected params encountered for "none" response',checks:s,params:E});if(W[t]){for(let r of W[t])if(!E[r])throw new el({message:`${r} missing from response`,checks:s,params:E})}}if(E.code){let r=await this.grant({...u,grant_type:"authorization_code",code:E.code,redirect_uri:t,code_verifier:s.code_verifier},{clientAssertionPayload:p,DPoP:h});if("string"==typeof r.id_token&&r.id_token.length)throw new el({message:"id_token detected in the response, you must use client.callback() instead of client.oauthCallback()",params:E});return delete r.id_token,r}return new ea(E)}async decryptIdToken(t){if(!this.id_token_encrypted_response_alg)return t;let r=t;if(r instanceof ea){if(!r.id_token)throw TypeError("id_token not present in TokenSet");r=r.id_token}let s=this.id_token_encrypted_response_alg,u=this.id_token_encrypted_response_enc,p=await this.decryptJWE(r,s,u);return t instanceof ea?(t.id_token=p,t):p}async validateJWTUserinfo(t){let r=this.userinfo_signed_response_alg;return this.validateJWT(t,r,[])}async decryptJARM(t){if(!this.authorization_encrypted_response_alg)return t;let r=this.authorization_encrypted_response_alg,s=this.authorization_encrypted_response_enc;return this.decryptJWE(t,r,s)}async decryptJWTUserinfo(t){if(!this.userinfo_encrypted_response_alg)return t;let r=this.userinfo_encrypted_response_alg,s=this.userinfo_encrypted_response_enc;return this.decryptJWE(t,r,s)}async decryptJWE(t,r,s="A128CBC-HS256"){let u;let p=JSON.parse(Z.decode(t.split(".")[0]));if(p.alg!==r)throw new el({printf:["unexpected JWE alg received, expected %s, got: %s",r,p.alg],jwt:t});if(p.enc!==s)throw new el({printf:["unexpected JWE enc received, expected %s, got: %s",s,p.enc],jwt:t});let getPlaintext=t=>new TextDecoder().decode(t.plaintext);if(r.match(/^(?:RSA|ECDH)/)){let r=await eh.get(this),s=D.decodeProtectedHeader(t);for(let p of r.all({...s,use:"enc"}))if(u=await D.compactDecrypt(t,await p.keyObject(s.alg)).then(getPlaintext,()=>{}))break}else u=await D.compactDecrypt(t,this.secretForAlg("dir"===r?s:r)).then(getPlaintext,()=>{});if(!u)throw new el({message:"failed to decrypt JWE",jwt:t});return u}async validateIdToken(t,r,s,u,p){let h=t,E=this.id_token_signed_response_alg,W=h instanceof ea;if(W){if(!h.id_token)throw TypeError("id_token not present in TokenSet");h=h.id_token}h=String(h);let J=ec(),{protected:R,payload:K,key:U}=await this.validateJWT(h,E);if("number"==typeof u||u!==eP&&this.require_auth_time){if(!K.auth_time)throw new el({message:"missing required JWT property auth_time",jwt:h});if("number"!=typeof K.auth_time)throw new el({message:"JWT auth_time claim must be a JSON numeric value",jwt:h})}if("number"==typeof u&&K.auth_time+u<J-this[ep])throw new el({printf:["too much time has elapsed since the last End-User authentication, max_age %i, auth_time: %i, now %i",u,K.auth_time,J-this[ep]],now:J,tolerance:this[ep],auth_time:K.auth_time,jwt:h});if(r!==eA&&(K.nonce||void 0!==r)&&K.nonce!==r)throw new el({printf:["nonce mismatch, expected %s, got: %s",r,K.nonce],jwt:h});if("authorization"===s){if(!K.at_hash&&t.access_token)throw new el({message:"missing required property at_hash",jwt:h});if(!K.c_hash&&t.code)throw new el({message:"missing required property c_hash",jwt:h});if(this.fapi1()&&!K.s_hash&&(t.state||p))throw new el({message:"missing required property s_hash",jwt:h});if(K.s_hash){if(!p)throw TypeError('cannot verify s_hash, "checks.state" property not provided');try{G.validate({claim:"s_hash",source:"state"},K.s_hash,p,R.alg,U.jwk&&U.jwk.crv)}catch(t){throw new el({message:t.message,jwt:h})}}}if(this.fapi()&&K.iat<J-3600)throw new el({printf:["JWT issued too far in the past, now %i, iat %i",J,K.iat],now:J,tolerance:this[ep],iat:K.iat,jwt:h});if(t.access_token&&void 0!==K.at_hash)try{G.validate({claim:"at_hash",source:"access_token"},K.at_hash,t.access_token,R.alg,U.jwk&&U.jwk.crv)}catch(t){throw new el({message:t.message,jwt:h})}if(t.code&&void 0!==K.c_hash)try{G.validate({claim:"c_hash",source:"code"},K.c_hash,t.code,R.alg,U.jwk&&U.jwk.crv)}catch(t){throw new el({message:t.message,jwt:h})}return t}async validateJWT(t,r,s=["iss","sub","aud","exp","iat"]){let u,p,h;let E="https://self-issued.me"===this.issuer.issuer,J=ec();try{({header:u,payload:p}=X(t,{complete:!0}))}catch(r){throw new el({printf:["failed to decode JWT (%s: %s)",r.name,r.message],jwt:t})}if(u.alg!==r)throw new el({printf:["unexpected JWT alg received, expected %s, got: %s",r,u.alg],jwt:t});if(E&&(s=[...s,"sub_jwk"]),s.forEach(verifyPresence.bind(void 0,p,t)),void 0!==p.iss){let r=this.issuer.issuer;if(this.#r&&(r=this.issuer.issuer.replace("{tenantid}",p.tid)),p.iss!==r)throw new el({printf:["unexpected iss value, expected %s, got: %s",r,p.iss],jwt:t})}if(void 0!==p.iat&&"number"!=typeof p.iat)throw new el({message:"JWT iat claim must be a JSON numeric value",jwt:t});if(void 0!==p.nbf){if("number"!=typeof p.nbf)throw new el({message:"JWT nbf claim must be a JSON numeric value",jwt:t});if(p.nbf>J+this[ep])throw new el({printf:["JWT not active yet, now %i, nbf %i",J+this[ep],p.nbf],now:J,tolerance:this[ep],nbf:p.nbf,jwt:t})}if(void 0!==p.exp){if("number"!=typeof p.exp)throw new el({message:"JWT exp claim must be a JSON numeric value",jwt:t});if(J-this[ep]>=p.exp)throw new el({printf:["JWT expired, now %i, exp %i",J-this[ep],p.exp],now:J,tolerance:this[ep],exp:p.exp,jwt:t})}if(void 0!==p.aud){if(Array.isArray(p.aud)){if(p.aud.length>1&&!p.azp)throw new el({message:"missing required JWT property azp",jwt:t});if(!p.aud.includes(this.client_id))throw new el({printf:["aud is missing the client_id, expected %s to be included in %j",this.client_id,p.aud],jwt:t})}else if(p.aud!==this.client_id)throw new el({printf:["aud mismatch, expected %s, got: %s",this.client_id,p.aud],jwt:t})}if(void 0!==p.azp){let r=this.#n;if(!(r="string"==typeof r?[this.client_id,r]:Array.isArray(r)?[this.client_id,...r]:[this.client_id]).includes(p.azp))throw new el({printf:["azp mismatch, got: %s",p.azp],jwt:t})}if(E){try{W(ei(p.sub_jwk));let t=await D.importJWK(p.sub_jwk,u.alg);W.equal(t.type,"public"),h=[{keyObject:()=>t}]}catch(r){throw new el({message:"failed to use sub_jwk claim as an asymmetric JSON Web Key",jwt:t})}if(await D.calculateJwkThumbprint(p.sub_jwk)!==p.sub)throw new el({message:"failed to match the subject with sub_jwk",jwt:t})}else u.alg.startsWith("HS")?h=[this.secretForAlg(u.alg)]:"none"!==u.alg&&(h=await ev.call(this.issuer,{...u,use:"sig"}));if(!h&&"none"===u.alg)return{protected:u,payload:p};for(let r of h){let s=await D.compactVerify(t,r instanceof Uint8Array?r:await r.keyObject(u.alg)).catch(()=>{});if(s)return{payload:p,protected:s.protectedHeader,key:r}}throw new el({message:"failed to validate JWT signature",jwt:t})}async refresh(t,{exchangeBody:r,clientAssertionPayload:s,DPoP:u}={}){let p=t;if(p instanceof ea){if(!p.refresh_token)throw TypeError("refresh_token not present in TokenSet");p=p.refresh_token}let h=await this.grant({...r,grant_type:"refresh_token",refresh_token:String(p)},{clientAssertionPayload:s,DPoP:u});if(h.id_token&&(await this.decryptIdToken(h),await this.validateIdToken(h,eA,"token",eP),t instanceof ea&&t.id_token)){let r=t.claims().sub,s=h.claims().sub;if(s!==r)throw new el({printf:["sub mismatch, expected %s, got: %s",r,s],jwt:h.id_token})}return h}async requestResource(t,r,{method:s,headers:u,body:p,DPoP:h,tokenType:E=h?"DPoP":r instanceof ea?r.token_type:"Bearer"}={},W){if(r instanceof ea){if(!r.access_token)throw TypeError("access_token not present in TokenSet");r=r.access_token}if(r){if("string"!=typeof r)throw TypeError("invalid access token provided")}else throw TypeError("no access token provided");let J={headers:{Authorization:authorizationHeaderValue(r,E),...u},body:p},R=!!this.tls_client_certificate_bound_access_tokens,K=await ed.call(this,{...J,responseType:"buffer",method:s,url:t},{accessToken:r,mTLS:R,DPoP:h}),U=K.headers["www-authenticate"];return W!==eE&&U&&U.toLowerCase().startsWith("dpop ")&&"use_dpop_nonce"===ee(U).error?this.requestResource(t,r,{method:s,headers:u,body:p,DPoP:h,tokenType:E}):K}async userinfo(t,{method:r="GET",via:s="header",tokenType:u,params:p,DPoP:h}={}){let E;er(this.issuer,"userinfo_endpoint");let J={tokenType:u,method:String(r).toUpperCase(),DPoP:h};if("GET"!==J.method&&"POST"!==J.method)throw TypeError("#userinfo() method can only be POST or a GET");if("body"===s&&"POST"!==J.method)throw TypeError("can only send body on POST");let R=!!(this.userinfo_signed_response_alg||this.userinfo_encrypted_response_alg);R?J.headers={Accept:"application/jwt"}:J.headers={Accept:"application/json"};let D=!!this.tls_client_certificate_bound_access_tokens;D&&this.issuer.mtls_endpoint_aliases&&(E=this.issuer.mtls_endpoint_aliases.userinfo_endpoint),E=new K(E||this.issuer.userinfo_endpoint),"body"===s&&(J.headers.Authorization=void 0,J.headers["Content-Type"]="application/x-www-form-urlencoded",J.body=new U,J.body.append("access_token",t instanceof ea?t.access_token:t)),p&&("GET"===J.method?Object.entries(p).forEach(([t,r])=>{E.searchParams.append(t,r)}):J.body?Object.entries(p).forEach(([t,r])=>{J.body.append(t,r)}):(J.body=new U,J.headers["Content-Type"]="application/x-www-form-urlencoded",Object.entries(p).forEach(([t,r])=>{J.body.append(t,r)}))),J.body&&(J.body=J.body.toString());let G=await this.requestResource(E,t,J),Y=eo(G,{bearer:!0});if(R){if(!/^application\/jwt/.test(G.headers["content-type"]))throw new el({message:"expected application/jwt response from the userinfo_endpoint",response:G});let t=G.body.toString(),r=await this.decryptJWTUserinfo(t);if(this.userinfo_signed_response_alg)({payload:Y}=await this.validateJWTUserinfo(r));else try{Y=JSON.parse(r),W(ei(Y))}catch(t){throw new el({message:"failed to parse userinfo JWE payload as JSON",jwt:r})}}else try{Y=JSON.parse(G.body)}catch(t){throw Object.defineProperty(t,"response",{value:G}),t}if(t instanceof ea&&t.id_token){let r=t.claims().sub;if(Y.sub!==r)throw new el({printf:["userinfo sub mismatch, expected %s, got: %s",r,Y.sub],body:Y,jwt:t.id_token})}return Y}encryptionSecret(t){let r=t<=256?"sha256":t<=384?"sha384":t<=512&&"sha512";if(!r)throw Error("unsupported symmetric encryption key derivation");return E.createHash(r).update(this.client_secret).digest().slice(0,t/8)}secretForAlg(t){if(!this.client_secret)throw TypeError("client_secret is required");return/^A(\d{3})(?:GCM)?KW$/.test(t)?this.encryptionSecret(parseInt(RegExp.$1,10)):/^A(\d{3})(?:GCM|CBC-HS(\d{3}))$/.test(t)?this.encryptionSecret(parseInt(RegExp.$2||RegExp.$1,10)):new TextEncoder().encode(this.client_secret)}async grant(t,{clientAssertionPayload:r,DPoP:s}={},u){let p;er(this.issuer,"token_endpoint");let h=await eg.call(this,"token",{form:t,responseType:"json"},{clientAssertionPayload:r,DPoP:s});try{p=eo(h)}catch(p){if(u!==eE&&p instanceof es&&"use_dpop_nonce"===p.error)return this.grant(t,{clientAssertionPayload:r,DPoP:s},eE);throw p}return new ea(p)}async deviceAuthorization(t={},{exchangeBody:r,clientAssertionPayload:s,DPoP:u}={}){er(this.issuer,"device_authorization_endpoint"),er(this.issuer,"token_endpoint");let p=authorizationParams.call(this,{client_id:this.client_id,redirect_uri:null,response_type:null,...t}),h=await eg.call(this,"device_authorization",{responseType:"json",form:p},{clientAssertionPayload:s,endpointAuthMethod:"token"}),E=eo(h);return new ew({client:this,exchangeBody:r,clientAssertionPayload:s,response:E,maxAge:t.max_age,DPoP:u})}async revoke(t,r,{revokeBody:s,clientAssertionPayload:u}={}){if(er(this.issuer,"revocation_endpoint"),void 0!==r&&"string"!=typeof r)throw TypeError("hint must be a string");let p={...s,token:t};r&&(p.token_type_hint=r);let h=await eg.call(this,"revocation",{form:p},{clientAssertionPayload:u});eo(h,{body:!1})}async introspect(t,r,{introspectBody:s,clientAssertionPayload:u}={}){if(er(this.issuer,"introspection_endpoint"),void 0!==r&&"string"!=typeof r)throw TypeError("hint must be a string");let p={...s,token:t};r&&(p.token_type_hint=r);let h=await eg.call(this,"introspection",{form:p,responseType:"json"},{clientAssertionPayload:u}),E=eo(h);return E}static async register(t,r={}){let{initialAccessToken:s,jwks:u,...p}=r;if(er(this.issuer,"registration_endpoint"),void 0!==u&&!(t.jwks||t.jwks_uri)){let r=await getKeystore.call(this,u);t.jwks=r.toJWKS()}let h=await ed.call(this,{headers:{Accept:"application/json",...s?{Authorization:authorizationHeaderValue(s)}:void 0},responseType:"json",json:t,url:this.issuer.registration_endpoint,method:"POST"}),E=eo(h,{statusCode:201,bearer:!0});return new this(E,u,p)}get metadata(){return ey(Object.fromEntries(this.#e.entries()))}static async fromUri(t,r,s,u){let p=await ed.call(this,{method:"GET",url:t,responseType:"json",headers:{Authorization:authorizationHeaderValue(r),Accept:"application/json"}}),h=eo(p,{bearer:!0});return new this(h,s,u)}async requestObject(t={},{sign:r=this.request_object_signing_alg||"none",encrypt:{alg:s=this.request_object_encryption_alg,enc:u=this.request_object_encryption_enc||"A128CBC-HS256"}={}}={}){let p,h;if(!ei(t))throw TypeError("requestObject must be a plain object");let E=ec(),W={alg:r,typ:"oauth-authz-req+jwt"},J=JSON.stringify(Q({},t,{iss:this.client_id,aud:this.issuer.issuer,client_id:this.client_id,jti:eu(),iat:E,exp:E+300,...this.fapi()?{nbf:E}:void 0}));if("none"===r)p=[Z.encode(JSON.stringify(W)),Z.encode(J),""].join(".");else{let t=r.startsWith("HS");if(t)h=this.secretForAlg(r);else{let t=await eh.get(this);if(!t)throw TypeError(`no keystore present for client, cannot sign using alg ${r}`);if(!(h=t.get({alg:r,use:"sig"})))throw TypeError(`no key to sign with found for alg ${r}`)}p=await new D.CompactSign(new TextEncoder().encode(J)).setProtectedHeader({...W,kid:t?void 0:h.jwk.kid}).sign(t?h:await h.keyObject(r))}if(!s)return p;let R={alg:s,enc:u,cty:"oauth-authz-req+jwt"};return R.alg.match(/^(RSA|ECDH)/)?[h]=await ev.call(this.issuer,{alg:R.alg,use:"enc"},{allowMulti:!0}):h=this.secretForAlg("dir"===R.alg?R.enc:R.alg),new D.CompactEncrypt(new TextEncoder().encode(p)).setProtectedHeader({...R,kid:h instanceof Uint8Array?void 0:h.jwk.kid}).encrypt(h instanceof Uint8Array?h:await h.keyObject(R.alg))}async pushedAuthorizationRequest(t={},{clientAssertionPayload:r}={}){er(this.issuer,"pushed_authorization_request_endpoint");let s={..."request"in t?t:authorizationParams.call(this,t),client_id:this.client_id},u=await eg.call(this,"pushed_authorization_request",{responseType:"json",form:s},{clientAssertionPayload:r,endpointAuthMethod:"token"}),p=eo(u,{statusCode:201});if(!("expires_in"in p))throw new el({message:"expected expires_in in Pushed Authorization Successful Response",response:u});if("number"!=typeof p.expires_in)throw new el({message:"invalid expires_in value in Pushed Authorization Successful Response",response:u});if(!("request_uri"in p))throw new el({message:"expected request_uri in Pushed Authorization Successful Response",response:u});if("string"!=typeof p.request_uri)throw new el({message:"invalid request_uri value in Pushed Authorization Successful Response",response:u});return p}get issuer(){return this.#t}[p.custom](){return`${this.constructor.name} ${p(this.metadata,{depth:1/0,colors:process.stdout.isTTY,compact:!1,sorted:!0})}`}fapi(){return this.fapi1()||this.fapi2()}fapi1(){return"FAPI1Client"===this.constructor.name}fapi2(){return"FAPI2Client"===this.constructor.name}async validateJARM(t){let r=this.authorization_signed_response_alg,{payload:s}=await this.validateJWT(t,r,["iss","exp","aud"]);return pickCb(s)}async dpopProof(t,r,s){let p;if(!ei(t))throw TypeError("payload must be a plain object");if(Y(r))p=r;else if("CryptoKey"===r[Symbol.toStringTag])p=r;else if("node:crypto"===D.cryptoRuntime)p=E.createPrivateKey(r);else throw TypeError("unrecognized crypto runtime");if("private"!==p.type)throw TypeError('"DPoP" option must be a private key');let h=u.call(this,p,r);if(!h)throw TypeError("could not determine DPoP JWS Algorithm");return new D.SignJWT({ath:s?Z.encode(E.createHash("sha256").update(s).digest()):void 0,...t}).setProtectedHeader({alg:h,typ:"dpop+jwt",jwk:await getJwk(p,r)}).setIssuedAt().setJti(eu()).sign(p)}};function determineDPoPAlgorithmFromCryptoKey(t){switch(t.algorithm.name){case"Ed25519":case"Ed448":return"EdDSA";case"ECDSA":switch(t.algorithm.namedCurve){case"P-256":return"ES256";case"P-384":return"ES384";case"P-521":return"ES512"}break;case"RSASSA-PKCS1-v1_5":return`RS${t.algorithm.hash.name.slice(4)}`;case"RSA-PSS":return`PS${t.algorithm.hash.name.slice(4)}`;default:throw TypeError("unsupported DPoP private key")}}if("node:crypto"===D.cryptoRuntime){u=function(t,r){if("CryptoKey"===r[Symbol.toStringTag])return determineDPoPAlgorithmFromCryptoKey(t);switch(t.asymmetricKeyType){case"ed25519":case"ed448":return"EdDSA";case"ec":return determineEcAlgorithm(t,r);case"rsa":case eS&&"rsa-pss":return determineRsaAlgorithm(t,r,this.issuer.dpop_signing_alg_values_supported);default:throw TypeError("unsupported DPoP private key")}};let t=/^(?:RS|PS)(?:256|384|512)$/;function determineRsaAlgorithm(r,s,u){if("object"==typeof s&&"jwk"===s.format&&s.key&&s.key.alg)return s.key.alg;if(Array.isArray(u)){let s=u.filter(RegExp.prototype.test.bind(t));return"rsa-pss"===r.asymmetricKeyType&&(s=s.filter(t=>t.startsWith("PS"))),["PS256","PS384","PS512","RS256","RS384","RS384"].find(t=>s.includes(t))}return"PS256"}let r=Buffer.from([42,134,72,206,61,3,1,7]),s=Buffer.from([43,129,4,0,34]),p=Buffer.from([43,129,4,0,35]),h=Buffer.from([43,129,4,0,10]);function determineEcAlgorithm(t,u){switch("object"==typeof u&&"object"==typeof u.key&&u.key.crv){case"P-256":return"ES256";case"secp256k1":return"ES256K";case"P-384":return"ES384";case"P-512":return"ES512"}let E=t.export({format:"der",type:"pkcs8"}),W=E[1]<128?17:18,J=E[W],R=E.slice(W+1,W+1+J);if(R.equals(r))return"ES256";if(R.equals(s))return"ES384";if(R.equals(p))return"ES512";if(R.equals(h))return"ES256K";throw TypeError("unsupported DPoP private key curve")}}else u=determineDPoPAlgorithmFromCryptoKey;let ex=new WeakMap;async function getJwk(t,r){if("node:crypto"===D.cryptoRuntime&&"object"==typeof r&&"object"==typeof r.key&&"jwk"===r.format)return en(r.key,"kty","crv","x","y","e","n");if(ex.has(r))return ex.get(r);let s=en(await D.exportJWK(t),"kty","crv","x","y","e","n");return(Y(r)||"WebCryptoAPI"===D.cryptoRuntime)&&ex.set(r,s),s}t.exports=(t,r=!1)=>class extends BaseClient{constructor(...s){super(t,r,...s)}static get issuer(){return t}},t.exports.BaseClient=BaseClient},5274:(t,r,s)=>{"use strict";let{inspect:u}=s(3837),{RPError:p,OPError:h}=s(4105),E=s(2221);let DeviceFlowHandle=class DeviceFlowHandle{#i;#o;#a;#s;#l;#c;#u;#d;#p;constructor({client:t,exchangeBody:r,clientAssertionPayload:s,response:u,maxAge:h,DPoP:W}){if(["verification_uri","user_code","device_code"].forEach(t=>{if("string"!=typeof u[t]||!u[t])throw new p(`expected ${t} string to be returned by Device Authorization Response, got %j`,u[t])}),!Number.isSafeInteger(u.expires_in))throw new p("expected expires_in number to be returned by Device Authorization Response, got %j",u.expires_in);this.#c=E()+u.expires_in,this.#o=t,this.#s=W,this.#d=h,this.#l=r,this.#a=s,this.#p=u,this.#u=1e3*u.interval||5e3}abort(){this.#i=!0}async poll({signal:t}={}){let r;if(t&&t.aborted||this.#i)throw new p("polling aborted");if(this.expired())throw new p("the device code %j has expired and the device authorization session has concluded",this.device_code);await new Promise(t=>setTimeout(t,this.#u));try{r=await this.#o.grant({...this.#l,grant_type:"urn:ietf:params:oauth:grant-type:device_code",device_code:this.device_code},{clientAssertionPayload:this.#a,DPoP:this.#s})}catch(r){switch(r instanceof h&&r.error){case"slow_down":this.#u+=5e3;case"authorization_pending":return this.poll({signal:t});default:throw r}}return"id_token"in r&&(await this.#o.decryptIdToken(r),await this.#o.validateIdToken(r,void 0,"token",this.#d)),r}get device_code(){return this.#p.device_code}get user_code(){return this.#p.user_code}get verification_uri(){return this.#p.verification_uri}get verification_uri_complete(){return this.#p.verification_uri_complete}get expires_in(){return Math.max.apply(null,[this.#c-E(),0])}expired(){return 0===this.expires_in}[u.custom](){return`${this.constructor.name} ${u(this.#p,{depth:1/0,colors:process.stdout.isTTY,compact:!1,sorted:!0})}`}};t.exports=DeviceFlowHandle},4105:(t,r,s)=>{"use strict";let{format:u}=s(3837);let OPError=class OPError extends Error{constructor({error_description:t,error:r,error_uri:s,session_state:u,state:p,scope:h},E){super(t?`${r} (${t})`:r),Object.assign(this,{error:r},t&&{error_description:t},s&&{error_uri:s},p&&{state:p},h&&{scope:h},u&&{session_state:u}),E&&Object.defineProperty(this,"response",{value:E}),this.name=this.constructor.name,Error.captureStackTrace(this,this.constructor)}};let RPError=class RPError extends Error{constructor(...t){if("string"==typeof t[0])super(u(...t));else{let{message:r,printf:s,response:p,...h}=t[0];s?super(u(...s)):super(r),Object.assign(this,h),p&&Object.defineProperty(this,"response",{value:p})}this.name=this.constructor.name,Error.captureStackTrace(this,this.constructor)}};t.exports={OPError,RPError}},1946:t=>{"use strict";function assertSigningAlgValuesSupport(t,r,s){if(!r[`${t}_endpoint`])return;let u=`${t}_endpoint_auth_method`,p=`${t}_endpoint_auth_signing_alg`,h=`${t}_endpoint_auth_signing_alg_values_supported`;if(s[u]&&s[u].endsWith("_jwt")&&!s[p]&&!r[h])throw TypeError(`${h} must be configured on the issuer if ${p} is not defined on a client`)}function assertIssuerConfiguration(t,r){if(!t[r])throw TypeError(`${r} must be configured on the issuer`)}t.exports={assertSigningAlgValuesSupport,assertIssuerConfiguration}},9752:t=>{"use strict";let r;if(Buffer.isEncoding("base64url"))r=(t,r="utf8")=>Buffer.from(t,r).toString("base64url");else{let fromBase64=t=>t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_");r=(t,r="utf8")=>fromBase64(Buffer.from(t,r).toString("base64"))}t.exports.decode=t=>Buffer.from(t,"base64"),t.exports.encode=r},9092:(t,r,s)=>{"use strict";let u=s(8541),{RPError:p}=s(4105),{assertIssuerConfiguration:h}=s(1946),{random:E}=s(2827),W=s(2221),J=s(6745),{keystores:R}=s(276),K=s(7585),formUrlEncode=t=>encodeURIComponent(t).replace(/%20/g,"+");async function clientAssertion(t,r){let s=this[`${t}_endpoint_auth_signing_alg`];if(s||h(this.issuer,`${t}_endpoint_auth_signing_alg_values_supported`),"client_secret_jwt"===this[`${t}_endpoint_auth_method`]){if(!s){let r=this.issuer[`${t}_endpoint_auth_signing_alg_values_supported`];s=Array.isArray(r)&&r.find(t=>/^HS(?:256|384|512)/.test(t))}if(!s)throw new p(`failed to determine a JWS Algorithm to use for ${this[`${t}_endpoint_auth_method`]} Client Assertion`);return new u.CompactSign(Buffer.from(JSON.stringify(r))).setProtectedHeader({alg:s}).sign(this.secretForAlg(s))}let E=await R.get(this);if(!E)throw TypeError("no client jwks provided for signing a client assertion with");if(!s){let r=this.issuer[`${t}_endpoint_auth_signing_alg_values_supported`];s=Array.isArray(r)&&r.find(t=>E.get({alg:t,use:"sig"}))}if(!s)throw new p(`failed to determine a JWS Algorithm to use for ${this[`${t}_endpoint_auth_method`]} Client Assertion`);let W=E.get({alg:s,use:"sig"});if(!W)throw new p(`no key found in client jwks to sign a client assertion with using alg ${s}`);return new u.CompactSign(Buffer.from(JSON.stringify(r))).setProtectedHeader({alg:s,kid:W.jwk&&W.jwk.kid}).sign(await W.keyObject(s))}async function authFor(t,{clientAssertionPayload:r}={}){let s=this[`${t}_endpoint_auth_method`];switch(s){case"self_signed_tls_client_auth":case"tls_client_auth":case"none":return{form:{client_id:this.client_id}};case"client_secret_post":if("string"!=typeof this.client_secret)throw TypeError("client_secret_post client authentication method requires a client_secret");return{form:{client_id:this.client_id,client_secret:this.client_secret}};case"private_key_jwt":case"client_secret_jwt":{let s=W(),u=await clientAssertion.call(this,t,{iat:s,exp:s+60,jti:E(),iss:this.client_id,sub:this.client_id,aud:this.issuer.issuer,...r});return{form:{client_id:this.client_id,client_assertion:u,client_assertion_type:"urn:ietf:params:oauth:client-assertion-type:jwt-bearer"}}}case"client_secret_basic":{if("string"!=typeof this.client_secret)throw TypeError("client_secret_basic client authentication method requires a client_secret");let t=`${formUrlEncode(this.client_id)}:${formUrlEncode(this.client_secret)}`,r=Buffer.from(t).toString("base64");return{headers:{Authorization:`Basic ${r}`}}}default:throw TypeError(`missing, or unsupported, ${t}_endpoint_auth_method`)}}function resolveResponseType(){let{length:t,0:r}=this.response_types;if(1===t)return r}function resolveRedirectUri(){let{length:t,0:r}=this.redirect_uris||[];if(1===t)return r}async function authenticatedPost(t,r,{clientAssertionPayload:s,endpointAuthMethod:u=t,DPoP:p}={}){let h;let E=await authFor.call(this,u,{clientAssertionPayload:s}),W=K(r,E),R=this[`${u}_endpoint_auth_method`].includes("tls_client_auth")||"token"===t&&this.tls_client_certificate_bound_access_tokens;if(R&&this.issuer.mtls_endpoint_aliases&&(h=this.issuer.mtls_endpoint_aliases[`${t}_endpoint`]),h=h||this.issuer[`${t}_endpoint`],"form"in W)for(let[t,r]of Object.entries(W.form))void 0===r&&delete W.form[t];return J.call(this,{...W,method:"POST",url:h,headers:{..."revocation"!==t?{Accept:"application/json"}:void 0,...W.headers}},{mTLS:R,DPoP:p})}t.exports={resolveResponseType,resolveRedirectUri,authFor,authenticatedPost}},1513:t=>{"use strict";let r=Symbol(),s=Symbol();t.exports={CLOCK_TOLERANCE:s,HTTP_OPTIONS:r}},4592:(t,r,s)=>{"use strict";let u=s(9752);t.exports=t=>{if("string"!=typeof t||!t)throw TypeError("JWT must be a string");let{0:r,1:s,2:p,length:h}=t.split(".");if(5===h)throw TypeError("encrypted JWTs cannot be decoded");if(3!==h)throw Error("JWTs must have three components");try{return{header:JSON.parse(u.decode(r)),payload:JSON.parse(u.decode(s)),signature:p}}catch(t){throw Error("JWT is malformed")}}},4054:t=>{"use strict";t.exports=globalThis.structuredClone||(t=>JSON.parse(JSON.stringify(t)))},2956:(t,r,s)=>{"use strict";let u=s(3288);function defaults(t,r,...s){for(let p of s)if(u(p))for(let[s,h]of Object.entries(p))"__proto__"!==s&&"constructor"!==s&&(void 0===r[s]&&void 0!==h&&(r[s]=h),t&&u(r[s])&&u(h)&&defaults(!0,r[s],h));return r}t.exports=defaults.bind(void 0,!1),t.exports.deep=defaults.bind(void 0,!0)},2827:(t,r,s)=>{"use strict";let{createHash:u,randomBytes:p}=s(6113),h=s(9752),random=(t=32)=>h.encode(p(t));t.exports={random,state:random,nonce:random,codeVerifier:random,codeChallenge:t=>h.encode(u("sha256").update(t).digest())}},7884:(t,r,s)=>{"use strict";let u=s(3837),p=s(6113);t.exports=u.types.isKeyObject||(t=>t&&t instanceof p.KeyObject)},3288:t=>{"use strict";t.exports=t=>!!t&&t.constructor===Object},7773:(t,r,s)=>{"use strict";let u=s(831),p=s(9290),{RPError:h}=s(4105),{assertIssuerConfiguration:E}=s(1946),W=s(5713),{keystores:J}=s(276),R=s(7298),K=s(6745),U=new WeakMap,D=new WeakMap,lrus=t=>(D.has(t)||D.set(t,new p({max:100})),D.get(t));async function getKeyStore(t=!1){E(this,"jwks_uri");let r=J.get(this),s=lrus(this);return t||!r?(U.has(this)||(s.reset(),U.set(this,(async()=>{let t=await K.call(this,{method:"GET",responseType:"json",url:this.jwks_uri,headers:{Accept:"application/json, application/jwk-set+json"}}).finally(()=>{U.delete(this)}),r=R(t),u=W.fromJWKS(r,{onlyPublic:!0});return s.set("throttle",!0,6e4),J.set(this,u),u})())),U.get(this)):r}async function queryKeyStore({kid:t,kty:r,alg:s,use:p},{allowMulti:E=!1}={}){let W=lrus(this),J={kid:t,kty:r,alg:s,use:p},R=u(J,{algorithm:"sha256",ignoreUnknown:!0,unorderedArrays:!0,unorderedSets:!0,respectType:!1}),K=W.get(R)||W.get("throttle"),U=await getKeyStore.call(this,!K),D=U.all(J);if(delete J.use,0===D.length)throw new h({printf:["no valid key found in issuer's jwks_uri for key parameters %j",J],jwks:U});if(!E&&D.length>1&&!t)throw new h({printf:["multiple matching keys found in issuer's jwks_uri for key parameters %j, kid must be provided in this case",J],jwks:U});return W.set(R,!0),D}t.exports.queryKeyStore=queryKeyStore,t.exports.keystore=getKeyStore},5713:(t,r,s)=>{"use strict";let u=s(8541),p=s(4054),h=s(3288),E=Symbol(),keyscore=(t,{alg:r,use:s})=>{let u=0;return r&&t.alg&&u++,s&&t.use&&u++,u};function getKtyFromAlg(t){switch("string"==typeof t&&t.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:return}}function getAlgorithms(t,r,s,p){if(r)return new Set([r]);switch(s){case"EC":{let r=[];if(("enc"===t||void 0===t)&&(r=r.concat(["ECDH-ES","ECDH-ES+A128KW","ECDH-ES+A192KW","ECDH-ES+A256KW"])),"sig"===t||void 0===t)switch(p){case"P-256":case"P-384":r=r.concat([`ES${p.slice(-3)}`]);break;case"P-521":r=r.concat(["ES512"]);break;case"secp256k1":"node:crypto"===u.cryptoRuntime&&(r=r.concat(["ES256K"]))}return new Set(r)}case"OKP":return new Set(["ECDH-ES","ECDH-ES+A128KW","ECDH-ES+A192KW","ECDH-ES+A256KW"]);case"RSA":{let r=[];return("enc"===t||void 0===t)&&(r=r.concat(["RSA-OAEP","RSA-OAEP-256","RSA-OAEP-384","RSA-OAEP-512"]),"node:crypto"===u.cryptoRuntime&&(r=r.concat(["RSA1_5"]))),("sig"===t||void 0===t)&&(r=r.concat(["PS256","PS384","PS512","RS256","RS384","RS512"])),new Set(r)}default:throw Error("unreachable")}}t.exports=class{#h;constructor(t,r){if(t!==E)throw Error("invalid constructor call");this.#h=r}toJWKS(){return{keys:this.map(({jwk:{d:t,p:r,q:s,dp:u,dq:p,qi:h,...E}})=>E)}}all({alg:t,kid:r,use:s}={}){if(!s||!t)throw Error();let u=getKtyFromAlg(t),p={alg:t,use:s};return this.filter(p=>{let h=!0;return void 0!==u&&p.jwk.kty!==u&&(h=!1),h&&void 0!==r&&p.jwk.kid!==r&&(h=!1),h&&void 0!==s&&void 0!==p.jwk.use&&p.jwk.use!==s&&(h=!1),h&&p.jwk.alg&&p.jwk.alg!==t?h=!1:p.algorithms.has(t)||(h=!1),h}).sort((t,r)=>keyscore(r,p)-keyscore(t,p))}get(...t){return this.all(...t)[0]}static async fromJWKS(t,{onlyPublic:r=!1,onlyPrivate:s=!1}={}){if(!h(t)||!Array.isArray(t.keys)||t.keys.some(t=>!h(t)||!("kty"in t)))throw TypeError("jwks must be a JSON Web Key Set formatted object");let W=[];for(let h of t.keys){h=p(h);let{kty:t,kid:E,crv:J}=h,{alg:R,use:K}=h;if("string"==typeof t&&t&&(void 0===K||"sig"===K||"enc"===K)&&("string"==typeof R||void 0===R)&&("string"==typeof E||void 0===E)){if("EC"===t&&"sig"===K)switch(J){case"P-256":R="ES256";break;case"P-384":R="ES384";break;case"P-521":R="ES512"}if("secp256k1"===J&&(K="sig",R="ES256K"),"OKP"===t)switch(J){case"Ed25519":case"Ed448":K="sig",R="EdDSA";break;case"X25519":case"X448":K="enc"}if(R&&!K)switch(!0){case R.startsWith("ECDH"):case R.startsWith("RSA"):K="enc"}if(s&&("oct"===h.kty||!h.d))throw Error("jwks must only contain private keys");r&&(h.d||h.k)||W.push({jwk:{...h,alg:R,use:K},async keyObject(t){if(this[t])return this[t];let r=await u.importJWK(this.jwk,t);return this[t]=r,r},get algorithms(){return Object.defineProperty(this,"algorithms",{value:getAlgorithms(this.jwk.use,this.jwk.alg,this.jwk.kty,this.jwk.crv),enumerable:!0,configurable:!1}),this.algorithms}})}}return new this(E,W)}filter(...t){return this.#h.filter(...t)}find(...t){return this.#h.find(...t)}every(...t){return this.#h.every(...t)}some(...t){return this.#h.some(...t)}map(...t){return this.#h.map(...t)}forEach(...t){return this.#h.forEach(...t)}reduce(...t){return this.#h.reduce(...t)}sort(...t){return this.#h.sort(...t)}*[Symbol.iterator](){for(let t of this.#h)yield t}}},7585:(t,r,s)=>{"use strict";let u=s(3288);function merge(t,...r){for(let s of r)if(u(s))for(let[r,p]of Object.entries(s))"__proto__"!==r&&"constructor"!==r&&(u(t[r])&&u(p)?t[r]=merge(t[r],p):void 0!==p&&(t[r]=p));return t}t.exports=merge},8821:t=>{"use strict";t.exports=function(t,...r){let s={};for(let u of r)void 0!==t[u]&&(s[u]=t[u]);return s}},7298:(t,r,s)=>{"use strict";let{STATUS_CODES:u}=s(3685),{format:p}=s(3837),{OPError:h}=s(4105),E=s(8752),throwAuthenticateErrors=t=>{let r=E(t.headers["www-authenticate"]);if(r.error)throw new h(r,t)},isStandardBodyError=t=>{let r=!1;try{let s;s="object"!=typeof t.body||Buffer.isBuffer(t.body)?JSON.parse(t.body):t.body,(r="string"==typeof s.error&&s.error.length)&&Object.defineProperty(t,"body",{value:s,configurable:!0})}catch(t){}return r};function processResponse(t,{statusCode:r=200,body:s=!0,bearer:E=!1}={}){if(t.statusCode!==r){if(E&&throwAuthenticateErrors(t),isStandardBodyError(t))throw new h(t.body,t);throw new h({error:p("expected %i %s, got: %i %s",r,u[r],t.statusCode,u[t.statusCode])},t)}if(s&&!t.body)throw new h({error:p("expected %i %s with body but no body was returned",r,u[r])},t);return t.body}t.exports=processResponse},6745:(t,r,s)=>{"use strict";let u;let p=s(9491),h=s(3477),E=s(3685),W=s(5687),{once:J}=s(2361),{URL:R}=s(7310),K=s(9290),U=s(7605),{RPError:D}=s(4105),G=s(8821),{deep:Y}=s(2956),{HTTP_OPTIONS:X}=s(1513),Z=/^[\x21\x23-\x5B\x5D-\x7E]+$/,Q=["agent","ca","cert","crl","headers","key","lookup","passphrase","pfx","timeout"],setDefaults=(t,r)=>{u=Y({},t.length?G(r,...t):r,u)};function send(t,r,s){s&&(t.removeHeader("content-type"),t.setHeader("content-type",s)),r&&(t.removeHeader("content-length"),t.setHeader("content-length",Buffer.byteLength(r)),t.write(r)),t.end()}setDefaults([],{headers:{"User-Agent":`${U.name}/${U.version} (${U.homepage})`,"Accept-Encoding":"identity"},timeout:3500});let ee=new K({max:100});t.exports=async function(t,{accessToken:r,mTLS:s=!1,DPoP:K}={}){let U,et,er,en,ei,eo,ea;try{U=new R(t.url),delete t.url,p(/^(https?:)$/.test(U.protocol))}catch(t){throw TypeError("only valid absolute URLs can be requested")}let es=this[X],el=t,ec=`${U.origin}${U.pathname}`;if(K&&"dpopProof"in this&&(el.headers=el.headers||{},el.headers.DPoP=await this.dpopProof({htu:`${U.origin}${U.pathname}`,htm:t.method||"GET",nonce:ee.get(ec)},K,r)),es&&(et=G(es.call(this,U,Y({},el,u)),...Q)),el=Y({},et,el,u),s&&!el.pfx&&!(el.key&&el.cert))throw TypeError("mutual-TLS certificate and key not set");if(el.searchParams)for(let[t,r]of Object.entries(el.searchParams))U.searchParams.delete(t),U.searchParams.set(t,r);for(let[t,r]of({form:en,responseType:er,json:ei,body:eo,...el}=el,Object.entries(el.headers||{})))void 0===r&&delete el.headers[t];let eu=("https:"===U.protocol?W.request:E.request)(U.href,el);return(async()=>{if(ei?send(eu,JSON.stringify(ei),"application/json"):en?send(eu,h.stringify(en),"application/x-www-form-urlencoded"):eo?send(eu,eo):send(eu),[ea]=await Promise.race([J(eu,"response"),J(eu,"timeout")]),!ea)throw eu.destroy(),new D(`outgoing request timed out after ${el.timeout}ms`);let t=[];for await(let r of ea)t.push(r);if(t.length)switch(er){case"json":Object.defineProperty(ea,"body",{get(){let r=Buffer.concat(t);try{r=JSON.parse(r)}catch(t){throw Object.defineProperty(t,"response",{value:ea}),t}finally{Object.defineProperty(ea,"body",{value:r,configurable:!0})}return r},configurable:!0});break;case void 0:case"buffer":Object.defineProperty(ea,"body",{get(){let r=Buffer.concat(t);return Object.defineProperty(ea,"body",{value:r,configurable:!0}),r},configurable:!0});break;default:throw TypeError("unsupported responseType request option")}return ea})().catch(t=>{throw ea&&Object.defineProperty(t,"response",{value:ea}),t}).finally(()=>{let t=ea&&ea.headers["dpop-nonce"];t&&Z.test(t)&&ee.set(ec,t)})},t.exports.setDefaults=setDefaults.bind(void 0,Q)},2221:t=>{"use strict";t.exports=()=>Math.floor(Date.now()/1e3)},276:t=>{"use strict";t.exports.keystores=new WeakMap},1260:t=>{"use strict";let r=/^\d+$/;function hasScheme(t){if(t.includes("://"))return!0;let s=t.replace(/(\/|\?)/g,"#").split("#")[0];if(s.includes(":")){let t=s.indexOf(":"),u=s.slice(t+1);if(!r.test(u))return!0}return!1}function acctSchemeAssumed(t){if(!t.includes("@"))return!1;let r=t.split("@"),s=r[r.length-1];return!(s.includes(":")||s.includes("/")||s.includes("?"))}function normalize(t){if("string"!=typeof t)throw TypeError("input must be a string");return(hasScheme(t)?t:acctSchemeAssumed(t)?`acct:${t}`:`https://${t}`).split("#")[0]}t.exports=normalize},8752:t=>{"use strict";let r=/(\w+)=("[^"]*")/g;t.exports=t=>{let s={};try{for(;null!==r.exec(t);)RegExp.$1&&RegExp.$2&&(s[RegExp.$1]=RegExp.$2.slice(1,-1))}catch(t){}return s}},5715:(t,r,s)=>{"use strict";let u=s(6568),{OPError:p,RPError:h}=s(4105),E=s(721),W=s(3308),{CLOCK_TOLERANCE:J,HTTP_OPTIONS:R}=s(1513),K=s(2827),{setDefaults:U}=s(6745);t.exports={Issuer:u,Strategy:E,TokenSet:W,errors:{OPError:p,RPError:h},custom:{setHttpOptionsDefaults:U,http_options:R,clock_tolerance:J},generators:K}},6568:(t,r,s)=>{"use strict";let{inspect:u}=s(3837),p=s(7310),{RPError:h}=s(4105),E=s(5913),W=s(4353),J=s(7298),R=s(1260),K=s(6745),U=s(4054),{keystore:D}=s(7773),G=["https://login.microsoftonline.com/common/.well-known/openid-configuration","https://login.microsoftonline.com/common/v2.0/.well-known/openid-configuration","https://login.microsoftonline.com/organizations/v2.0/.well-known/openid-configuration","https://login.microsoftonline.com/consumers/v2.0/.well-known/openid-configuration"],Y=Symbol(),X={claim_types_supported:["normal"],claims_parameter_supported:!1,grant_types_supported:["authorization_code","implicit"],request_parameter_supported:!1,request_uri_parameter_supported:!0,require_request_uri_registration:!1,response_modes_supported:["query","fragment"],token_endpoint_auth_methods_supported:["client_secret_basic"]};let Issuer=class Issuer{#e;constructor(t={}){let r=t[Y];delete t[Y],["introspection","revocation"].forEach(r=>{t[`${r}_endpoint`]&&void 0===t[`${r}_endpoint_auth_methods_supported`]&&void 0===t[`${r}_endpoint_auth_signing_alg_values_supported`]&&(t.token_endpoint_auth_methods_supported&&(t[`${r}_endpoint_auth_methods_supported`]=t.token_endpoint_auth_methods_supported),t.token_endpoint_auth_signing_alg_values_supported&&(t[`${r}_endpoint_auth_signing_alg_values_supported`]=t.token_endpoint_auth_signing_alg_values_supported))}),this.#e=new Map,Object.entries(t).forEach(([t,r])=>{this.#e.set(t,r),this[t]||Object.defineProperty(this,t,{get(){return this.#e.get(t)},enumerable:!0})}),W.set(this.issuer,this);let s=E(this,r);Object.defineProperties(this,{Client:{value:s,enumerable:!0},FAPI1Client:{value:class extends s{},enumerable:!0},FAPI2Client:{value:class extends s{},enumerable:!0}})}get metadata(){return U(Object.fromEntries(this.#e.entries()))}static async webfinger(t){let r=R(t),{host:s}=p.parse(r),u=`https://${s}/.well-known/webfinger`,E=await K.call(this,{method:"GET",url:u,responseType:"json",searchParams:{resource:r,rel:"http://openid.net/specs/connect/1.0/issuer"},headers:{Accept:"application/json"}}),U=J(E),D=Array.isArray(U.links)&&U.links.find(t=>"object"==typeof t&&"http://openid.net/specs/connect/1.0/issuer"===t.rel&&t.href);if(!D)throw new h({message:"no issuer found in webfinger response",body:U});if("string"!=typeof D.href||!D.href.startsWith("https://"))throw new h({printf:["invalid issuer location %s",D.href],body:U});let G=D.href;if(W.has(G))return W.get(G);let Y=await this.discover(G);if(Y.issuer!==G)throw W.del(Y.issuer),new h("discovered issuer mismatch, expected %s, got: %s",G,Y.issuer);return Y}static async discover(t){let r=resolveWellKnownUri(t),s=await K.call(this,{method:"GET",responseType:"json",url:r,headers:{Accept:"application/json"}}),u=J(s);return new Issuer({...X,...u,[Y]:!!G.find(t=>r.startsWith(t))})}async reloadJwksUri(){await D.call(this,!0)}[u.custom](){return`${this.constructor.name} ${u(this.metadata,{depth:1/0,colors:process.stdout.isTTY,compact:!1,sorted:!0})}`}};function resolveWellKnownUri(t){let r=p.parse(t);if(r.pathname.includes("/.well-known/"))return t;{let t;return t=r.pathname.endsWith("/")?`${r.pathname}.well-known/openid-configuration`:`${r.pathname}/.well-known/openid-configuration`,p.format({...r,pathname:t})}}t.exports=Issuer},4353:(t,r,s)=>{"use strict";let u=s(9290);t.exports=new u({max:100})},721:(t,r,s)=>{"use strict";let u=s(7310),{format:p}=s(3837),h=s(4054),{RPError:E,OPError:W}=s(4105),{BaseClient:J}=s(5913),{random:R,codeChallenge:K}=s(2827),U=s(8821),{resolveResponseType:D,resolveRedirectUri:G}=s(9092);function verified(t,r,s={}){t?this.error(t):r?this.success(r,s):this.fail(s)}function OpenIDConnectStrategy({client:t,params:r={},passReqToCallback:s=!1,sessionKey:p,usePKCE:E=!0,extras:W={}}={},R){if(!(t instanceof J))throw TypeError("client must be an instance of openid-client Client");if("function"!=typeof R)throw TypeError("verify callback must be a function");if(!t.issuer||!t.issuer.issuer)throw TypeError("client must have an issuer with an identifier");if(this._client=t,this._issuer=t.issuer,this._verify=R,this._passReqToCallback=s,this._usePKCE=E,this._key=p||`oidc:${u.parse(this._issuer.issuer).hostname}`,this._params=h(r),delete this._params.state,delete this._params.nonce,this._extras=h(W),this._params.response_type||(this._params.response_type=D.call(t)),this._params.redirect_uri||(this._params.redirect_uri=G.call(t)),this._params.scope||(this._params.scope="openid"),!0===this._usePKCE){let t=!!Array.isArray(this._issuer.code_challenge_methods_supported)&&this._issuer.code_challenge_methods_supported;if(t&&t.includes("S256"))this._usePKCE="S256";else if(t&&t.includes("plain"))this._usePKCE="plain";else if(t)throw TypeError("neither code_challenge_method supported by the client is supported by the issuer");else this._usePKCE="S256"}else if("string"==typeof this._usePKCE&&!["plain","S256"].includes(this._usePKCE))throw TypeError(`${this._usePKCE} is not valid/implemented PKCE code_challenge_method`);this.name=u.parse(t.issuer.issuer).hostname}OpenIDConnectStrategy.prototype.authenticate=function(t,r){(async()=>{let s=this._client;if(!t.session)throw TypeError("authentication requires session support");let u=s.callbackParams(t),h=this._key,{0:W,length:J}=Object.keys(u);if(0===J||1===J&&"iss"===W){let u={state:R(),...this._params,...r};if(!u.nonce&&u.response_type.includes("id_token")&&(u.nonce=R()),t.session[h]=U(u,"nonce","state","max_age","response_type"),this._usePKCE&&u.response_type.includes("code")){let r=R();switch(t.session[h].code_verifier=r,this._usePKCE){case"S256":u.code_challenge=K(r),u.code_challenge_method="S256";break;case"plain":u.code_challenge=r}}this.redirect(s.authorizationUrl(u));return}let D=t.session[h];if(0===Object.keys(D||{}).length)throw Error(p('did not find expected authorization request details in session, req.session["%s"] is %j',h,D));let{state:G,nonce:Y,max_age:X,code_verifier:Z,response_type:Q}=D;try{delete t.session[h]}catch(t){}let ee={redirect_uri:this._params.redirect_uri,...r},et=await s.callback(ee.redirect_uri,u,{state:G,nonce:Y,max_age:X,code_verifier:Z,response_type:Q},this._extras),er=this._passReqToCallback,en=this._verify.length>(er?3:2)&&s.issuer.userinfo_endpoint,ei=[et,verified.bind(this)];if(en){if(!et.access_token)throw new E({message:"expected access_token to be returned when asking for userinfo in verify callback",tokenset:et});let t=await s.userinfo(et);ei.splice(1,0,t)}er&&ei.unshift(t),this._verify(...ei)})().catch(t=>{t instanceof W&&"server_error"!==t.error&&!t.error.startsWith("invalid")||t instanceof E?this.fail(t):this.error(t)})},t.exports=OpenIDConnectStrategy},3308:(t,r,s)=>{"use strict";let u=s(9752),p=s(2221);let TokenSet=class TokenSet{constructor(t){Object.assign(this,t);let{constructor:r,...s}=Object.getOwnPropertyDescriptors(this.constructor.prototype);Object.defineProperties(this,s)}set expires_in(t){this.expires_at=p()+Number(t)}get expires_in(){return Math.max.apply(null,[this.expires_at-p(),0])}expired(){return 0===this.expires_in}claims(){if(!this.id_token)throw TypeError("id_token not present in TokenSet");return JSON.parse(u.decode(this.id_token.split(".")[1]))}};t.exports=TokenSet},9290:(t,r,s)=>{"use strict";let u=s(2315),p=Symbol("max"),h=Symbol("length"),E=Symbol("lengthCalculator"),W=Symbol("allowStale"),J=Symbol("maxAge"),R=Symbol("dispose"),K=Symbol("noDisposeOnSet"),U=Symbol("lruList"),D=Symbol("cache"),G=Symbol("updateAgeOnGet"),naiveLength=()=>1;let LRUCache=class LRUCache{constructor(t){if("number"==typeof t&&(t={max:t}),t||(t={}),t.max&&("number"!=typeof t.max||t.max<0))throw TypeError("max must be a non-negative number");this[p]=t.max||1/0;let r=t.length||naiveLength;if(this[E]="function"!=typeof r?naiveLength:r,this[W]=t.stale||!1,t.maxAge&&"number"!=typeof t.maxAge)throw TypeError("maxAge must be a number");this[J]=t.maxAge||0,this[R]=t.dispose,this[K]=t.noDisposeOnSet||!1,this[G]=t.updateAgeOnGet||!1,this.reset()}set max(t){if("number"!=typeof t||t<0)throw TypeError("max must be a non-negative number");this[p]=t||1/0,trim(this)}get max(){return this[p]}set allowStale(t){this[W]=!!t}get allowStale(){return this[W]}set maxAge(t){if("number"!=typeof t)throw TypeError("maxAge must be a non-negative number");this[J]=t,trim(this)}get maxAge(){return this[J]}set lengthCalculator(t){"function"!=typeof t&&(t=naiveLength),t!==this[E]&&(this[E]=t,this[h]=0,this[U].forEach(t=>{t.length=this[E](t.value,t.key),this[h]+=t.length})),trim(this)}get lengthCalculator(){return this[E]}get length(){return this[h]}get itemCount(){return this[U].length}rforEach(t,r){r=r||this;for(let s=this[U].tail;null!==s;){let u=s.prev;forEachStep(this,t,s,r),s=u}}forEach(t,r){r=r||this;for(let s=this[U].head;null!==s;){let u=s.next;forEachStep(this,t,s,r),s=u}}keys(){return this[U].toArray().map(t=>t.key)}values(){return this[U].toArray().map(t=>t.value)}reset(){this[R]&&this[U]&&this[U].length&&this[U].forEach(t=>this[R](t.key,t.value)),this[D]=new Map,this[U]=new u,this[h]=0}dump(){return this[U].map(t=>!isStale(this,t)&&{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[U]}set(t,r,s){if((s=s||this[J])&&"number"!=typeof s)throw TypeError("maxAge must be a number");let u=s?Date.now():0,W=this[E](r,t);if(this[D].has(t)){if(W>this[p])return del(this,this[D].get(t)),!1;let E=this[D].get(t),J=E.value;return this[R]&&!this[K]&&this[R](t,J.value),J.now=u,J.maxAge=s,J.value=r,this[h]+=W-J.length,J.length=W,this.get(t),trim(this),!0}let G=new Entry(t,r,W,u,s);return G.length>this[p]?(this[R]&&this[R](t,r),!1):(this[h]+=G.length,this[U].unshift(G),this[D].set(t,this[U].head),trim(this),!0)}has(t){if(!this[D].has(t))return!1;let r=this[D].get(t).value;return!isStale(this,r)}get(t){return get(this,t,!0)}peek(t){return get(this,t,!1)}pop(){let t=this[U].tail;return t?(del(this,t),t.value):null}del(t){del(this,this[D].get(t))}load(t){this.reset();let r=Date.now();for(let s=t.length-1;s>=0;s--){let u=t[s],p=u.e||0;if(0===p)this.set(u.k,u.v);else{let t=p-r;t>0&&this.set(u.k,u.v,t)}}}prune(){this[D].forEach((t,r)=>get(this,r,!1))}};let get=(t,r,s)=>{let u=t[D].get(r);if(u){let r=u.value;if(isStale(t,r)){if(del(t,u),!t[W])return}else s&&(t[G]&&(u.value.now=Date.now()),t[U].unshiftNode(u));return r.value}},isStale=(t,r)=>{if(!r||!r.maxAge&&!t[J])return!1;let s=Date.now()-r.now;return r.maxAge?s>r.maxAge:t[J]&&s>t[J]},trim=t=>{if(t[h]>t[p])for(let r=t[U].tail;t[h]>t[p]&&null!==r;){let s=r.prev;del(t,r),r=s}},del=(t,r)=>{if(r){let s=r.value;t[R]&&t[R](s.key,s.value),t[h]-=s.length,t[D].delete(s.key),t[U].removeNode(r)}};let Entry=class Entry{constructor(t,r,s,u,p){this.key=t,this.value=r,this.length=s,this.now=u,this.maxAge=p||0}};let forEachStep=(t,r,s,u)=>{let p=s.value;isStale(t,p)&&(del(t,s),t[W]||(p=void 0)),p&&r.call(u,p.value,p.key,t)};t.exports=LRUCache},831:(t,r,s)=>{"use strict";var u=s(6113);function objectHash(t,r){return r=applyDefaults(t,r),hash(t,r)}(r=t.exports=objectHash).sha1=function(t){return objectHash(t)},r.keys=function(t){return objectHash(t,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},r.MD5=function(t){return objectHash(t,{algorithm:"md5",encoding:"hex"})},r.keysMD5=function(t){return objectHash(t,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var p=u.getHashes?u.getHashes().slice():["sha1","md5"];p.push("passthrough");var h=["buffer","hex","binary","base64"];function applyDefaults(t,r){r=r||{};var s={};if(s.algorithm=r.algorithm||"sha1",s.encoding=r.encoding||"hex",s.excludeValues=!!r.excludeValues,s.algorithm=s.algorithm.toLowerCase(),s.encoding=s.encoding.toLowerCase(),s.ignoreUnknown=!0===r.ignoreUnknown,s.respectType=!1!==r.respectType,s.respectFunctionNames=!1!==r.respectFunctionNames,s.respectFunctionProperties=!1!==r.respectFunctionProperties,s.unorderedArrays=!0===r.unorderedArrays,s.unorderedSets=!1!==r.unorderedSets,s.unorderedObjects=!1!==r.unorderedObjects,s.replacer=r.replacer||void 0,s.excludeKeys=r.excludeKeys||void 0,void 0===t)throw Error("Object argument required.");for(var u=0;u<p.length;++u)p[u].toLowerCase()===s.algorithm.toLowerCase()&&(s.algorithm=p[u]);if(-1===p.indexOf(s.algorithm))throw Error('Algorithm "'+s.algorithm+'"  not supported. supported values: '+p.join(", "));if(-1===h.indexOf(s.encoding)&&"passthrough"!==s.algorithm)throw Error('Encoding "'+s.encoding+'"  not supported. supported values: '+h.join(", "));return s}function isNativeFunction(t){return"function"==typeof t&&null!=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(t))}function hash(t,r){if(void 0===(s="passthrough"!==r.algorithm?u.createHash(r.algorithm):new PassThrough).write&&(s.write=s.update,s.end=s.update),typeHasher(r,s).dispatch(t),s.update||s.end(""),s.digest)return s.digest("buffer"===r.encoding?void 0:r.encoding);var s,p=s.read();return"buffer"===r.encoding?p:p.toString(r.encoding)}function typeHasher(t,r,s){s=s||[];var write=function(t){return r.update?r.update(t,"utf8"):r.write(t,"utf8")};return{dispatch:function(r){t.replacer&&(r=t.replacer(r));var s=typeof r;return null===r&&(s="null"),this["_"+s](r)},_object:function(r){var u=Object.prototype.toString.call(r),p=/\[object (.*)\]/i.exec(u);p=(p=p?p[1]:"unknown:["+u+"]").toLowerCase();var h=null;if((h=s.indexOf(r))>=0)return this.dispatch("[CIRCULAR:"+h+"]");if(s.push(r),"undefined"!=typeof Buffer&&Buffer.isBuffer&&Buffer.isBuffer(r))return write("buffer:"),write(r);if("object"!==p&&"function"!==p&&"asyncfunction"!==p){if(this["_"+p])this["_"+p](r);else if(t.ignoreUnknown)return write("["+p+"]");else throw Error('Unknown object type "'+p+'"')}else{var E=Object.keys(r);t.unorderedObjects&&(E=E.sort()),!1===t.respectType||isNativeFunction(r)||E.splice(0,0,"prototype","__proto__","constructor"),t.excludeKeys&&(E=E.filter(function(r){return!t.excludeKeys(r)})),write("object:"+E.length+":");var W=this;return E.forEach(function(s){W.dispatch(s),write(":"),t.excludeValues||W.dispatch(r[s]),write(",")})}},_array:function(r,u){u=void 0!==u?u:!1!==t.unorderedArrays;var p=this;if(write("array:"+r.length+":"),!u||r.length<=1)return r.forEach(function(t){return p.dispatch(t)});var h=[],E=r.map(function(r){var u=new PassThrough,p=s.slice();return typeHasher(t,u,p).dispatch(r),h=h.concat(p.slice(s.length)),u.read().toString()});return s=s.concat(h),E.sort(),this._array(E,!1)},_date:function(t){return write("date:"+t.toJSON())},_symbol:function(t){return write("symbol:"+t.toString())},_error:function(t){return write("error:"+t.toString())},_boolean:function(t){return write("bool:"+t.toString())},_string:function(t){write("string:"+t.length+":"),write(t.toString())},_function:function(r){write("fn:"),isNativeFunction(r)?this.dispatch("[native]"):this.dispatch(r.toString()),!1!==t.respectFunctionNames&&this.dispatch("function-name:"+String(r.name)),t.respectFunctionProperties&&this._object(r)},_number:function(t){return write("number:"+t.toString())},_xml:function(t){return write("xml:"+t.toString())},_null:function(){return write("Null")},_undefined:function(){return write("Undefined")},_regexp:function(t){return write("regex:"+t.toString())},_uint8array:function(t){return write("uint8array:"),this.dispatch(Array.prototype.slice.call(t))},_uint8clampedarray:function(t){return write("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(t))},_int8array:function(t){return write("uint8array:"),this.dispatch(Array.prototype.slice.call(t))},_uint16array:function(t){return write("uint16array:"),this.dispatch(Array.prototype.slice.call(t))},_int16array:function(t){return write("uint16array:"),this.dispatch(Array.prototype.slice.call(t))},_uint32array:function(t){return write("uint32array:"),this.dispatch(Array.prototype.slice.call(t))},_int32array:function(t){return write("uint32array:"),this.dispatch(Array.prototype.slice.call(t))},_float32array:function(t){return write("float32array:"),this.dispatch(Array.prototype.slice.call(t))},_float64array:function(t){return write("float64array:"),this.dispatch(Array.prototype.slice.call(t))},_arraybuffer:function(t){return write("arraybuffer:"),this.dispatch(new Uint8Array(t))},_url:function(t){return write("url:"+t.toString(),"utf8")},_map:function(r){write("map:");var s=Array.from(r);return this._array(s,!1!==t.unorderedSets)},_set:function(r){write("set:");var s=Array.from(r);return this._array(s,!1!==t.unorderedSets)},_file:function(t){return write("file:"),this.dispatch([t.name,t.size,t.type,t.lastModfied])},_blob:function(){if(t.ignoreUnknown)return write("[blob]");throw Error('Hashing Blob objects is currently not supported\n(see https://github.com/puleos/object-hash/issues/26)\nUse "options.replacer" or "options.ignoreUnknown"\n')},_domwindow:function(){return write("domwindow")},_bigint:function(t){return write("bigint:"+t.toString())},_process:function(){return write("process")},_timer:function(){return write("timer")},_pipe:function(){return write("pipe")},_tcp:function(){return write("tcp")},_udp:function(){return write("udp")},_tty:function(){return write("tty")},_statwatcher:function(){return write("statwatcher")},_securecontext:function(){return write("securecontext")},_connection:function(){return write("connection")},_zlib:function(){return write("zlib")},_context:function(){return write("context")},_nodescript:function(){return write("nodescript")},_httpparser:function(){return write("httpparser")},_dataview:function(){return write("dataview")},_signal:function(){return write("signal")},_fsevent:function(){return write("fsevent")},_tlswrap:function(){return write("tlswrap")}}}function PassThrough(){return{buf:"",write:function(t){this.buf+=t},end:function(t){this.buf+=t},read:function(){return this.buf}}}r.writeToStream=function(t,r,s){return void 0===s&&(s=r,r={}),typeHasher(r=applyDefaults(t,r),s).dispatch(t)}},4912:function(t,r,s){(function(t,r){var s=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i,u=/^(area|base|br|col|embed|hr|img|input|link|meta|param|source|track|wbr)$/,p=/[\s\n\\/='"\0<>]/,h=/^xlink:?./,E=/["&<]/;function a(t){if(!1===E.test(t+=""))return t;for(var r=0,s=0,u="",p="";s<t.length;s++){switch(t.charCodeAt(s)){case 34:p="&quot;";break;case 38:p="&amp;";break;case 60:p="&lt;";break;default:continue}s!==r&&(u+=t.slice(r,s)),u+=p,r=s+1}return s!==r&&(u+=t.slice(r,s)),u}var l=function(t,r){return String(t).replace(/(\n+)/g,"$1"+(r||"	"))},f=function(t,r,s){return String(t).length>(r||40)||!s&&-1!==String(t).indexOf("\n")||-1!==String(t).indexOf("<")},W={},J=/([A-Z])/g;function c(t){var r="";for(var u in t){var p=t[u];null!=p&&""!==p&&(r&&(r+=" "),r+="-"==u[0]?u:W[u]||(W[u]=u.replace(J,"-$1").toLowerCase()),r="number"==typeof p&&!1===s.test(u)?r+": "+p+"px;":r+": "+p+";")}return r||void 0}function _(t,r){return Array.isArray(r)?r.reduce(_,t):null!=r&&!1!==r&&t.push(r),t}function d(){this.__d=!0}function v(t,r){return{__v:t,context:r,props:t.props,setState:d,forceUpdate:d,__d:!0,__h:[]}}function g(t,r){var s=t.contextType,u=s&&r[s.__c];return null!=s?u?u.props.value:s.__:r}var R=[];function y(t,s,E,W,J,K){if(null==t||"boolean"==typeof t)return"";if("object"!=typeof t)return"function"==typeof t?"":a(t);var U=E.pretty,D=U&&"string"==typeof U?U:"	";if(Array.isArray(t)){for(var G="",Y=0;Y<t.length;Y++)U&&Y>0&&(G+="\n"),G+=y(t[Y],s,E,W,J,K);return G}if(void 0!==t.constructor)return"";var X,Z=t.type,Q=t.props,ee=!1;if("function"==typeof Z){if(ee=!0,!E.shallow||!W&&!1!==E.renderRootComponent){if(Z===r.Fragment){var et=[];return _(et,t.props.children),y(et,s,E,!1!==E.shallowHighOrder,J,K)}var er,en=t.__c=v(t,s);r.options.__b&&r.options.__b(t);var ei=r.options.__r;if(Z.prototype&&"function"==typeof Z.prototype.render){var eo=g(Z,s);(en=t.__c=new Z(Q,eo)).__v=t,en._dirty=en.__d=!0,en.props=Q,null==en.state&&(en.state={}),null==en._nextState&&null==en.__s&&(en._nextState=en.__s=en.state),en.context=eo,Z.getDerivedStateFromProps?en.state=Object.assign({},en.state,Z.getDerivedStateFromProps(en.props,en.state)):en.componentWillMount&&(en.componentWillMount(),en.state=en._nextState!==en.state?en._nextState:en.__s!==en.state?en.__s:en.state),ei&&ei(t),er=en.render(en.props,en.state,en.context)}else for(var ea=g(Z,s),es=0;en.__d&&es++<25;)en.__d=!1,ei&&ei(t),er=Z.call(t.__c,Q,ea);return en.getChildContext&&(s=Object.assign({},s,en.getChildContext())),r.options.diffed&&r.options.diffed(t),y(er,s,E,!1!==E.shallowHighOrder,J,K)}Z=(X=Z).displayName||X!==Function&&X.name||function(t){var r=(Function.prototype.toString.call(t).match(/^\s*function\s+([^( ]+)/)||"")[1];if(!r){for(var s=-1,u=R.length;u--;)if(R[u]===t){s=u;break}s<0&&(s=R.push(t)-1),r="UnnamedComponent"+s}return r}(X)}var el,ec,eu="<"+Z;if(Q){var ed=Object.keys(Q);E&&!0===E.sortAttributes&&ed.sort();for(var ep=0;ep<ed.length;ep++){var eh=ed[ep],ef=Q[eh];if("children"!==eh){if(!p.test(eh)&&(E&&E.allAttributes||"key"!==eh&&"ref"!==eh&&"__self"!==eh&&"__source"!==eh)){if("defaultValue"===eh)eh="value";else if("defaultChecked"===eh)eh="checked";else if("defaultSelected"===eh)eh="selected";else if("className"===eh){if(void 0!==Q.class)continue;eh="class"}else J&&h.test(eh)&&(eh=eh.toLowerCase().replace(/^xlink:?/,"xlink:"));if("htmlFor"===eh){if(Q.for)continue;eh="for"}"style"===eh&&ef&&"object"==typeof ef&&(ef=c(ef)),"a"===eh[0]&&"r"===eh[1]&&"boolean"==typeof ef&&(ef=String(ef));var ey=E.attributeHook&&E.attributeHook(eh,ef,s,E,ee);if(ey||""===ey)eu+=ey;else if("dangerouslySetInnerHTML"===eh)ec=ef&&ef.__html;else if("textarea"===Z&&"value"===eh)el=ef;else if((ef||0===ef||""===ef)&&"function"!=typeof ef){if(!(!0!==ef&&""!==ef||(ef=eh,E&&E.xml))){eu=eu+" "+eh;continue}if("value"===eh){if("select"===Z){K=ef;continue}"option"===Z&&K==ef&&void 0===Q.selected&&(eu+=" selected")}eu=eu+" "+eh+'="'+a(ef)+'"'}}}else el=ef}}if(U){var eg=eu.replace(/\n\s*/," ");eg===eu||~eg.indexOf("\n")?U&&~eu.indexOf("\n")&&(eu+="\n"):eu=eg}if(eu+=">",p.test(Z))throw Error(Z+" is not a valid HTML tag name in "+eu);var e_,em=u.test(Z)||E.voidElements&&E.voidElements.test(Z),ev=[];if(ec)U&&f(ec)&&(ec="\n"+D+l(ec,D)),eu+=ec;else if(null!=el&&_(e_=[],el).length){for(var ew=U&&~eu.indexOf("\n"),eb=!1,ek=0;ek<e_.length;ek++){var eS=e_[ek];if(null!=eS&&!1!==eS){var eE=y(eS,s,E,!0,"svg"===Z||"foreignObject"!==Z&&J,K);if(U&&!ew&&f(eE)&&(ew=!0),eE){if(U){var eA=eE.length>0&&"<"!=eE[0];eb&&eA?ev[ev.length-1]+=eE:ev.push(eE),eb=eA}else ev.push(eE)}}}if(U&&ew)for(var eP=ev.length;eP--;)ev[eP]="\n"+D+l(ev[eP],D)}if(ev.length||ec)eu+=ev.join("");else if(E&&E.xml)return eu.substring(0,eu.length-1)+" />";return!em||e_||ec?(U&&~eu.indexOf("\n")&&(eu+="\n"),eu=eu+"</"+Z+">"):eu=eu.replace(/>$/," />"),eu}var K={shallow:!0};k.render=k;var b=function(t,r){return k(t,r,K)},U=[];function k(t,s,u){s=s||{};var p=r.options.__s;r.options.__s=!0;var h,E=r.h(r.Fragment,null);return E.__k=[t],h=u&&(u.pretty||u.voidElements||u.sortAttributes||u.shallow||u.allAttributes||u.xml||u.attributeHook)?y(t,s,u):F(t,s,!1,void 0,E),r.options.__c&&r.options.__c(t,U),r.options.__s=p,U.length=0,h}function S(t){return null==t||"boolean"==typeof t?null:"string"==typeof t||"number"==typeof t||"bigint"==typeof t?r.h(null,null,t):t}function w(t,r){return"className"===t?"class":"htmlFor"===t?"for":"defaultValue"===t?"value":"defaultChecked"===t?"checked":"defaultSelected"===t?"selected":r&&h.test(t)?t.toLowerCase().replace(/^xlink:?/,"xlink:"):t}function C(t,r){return"style"===t&&null!=r&&"object"==typeof r?c(r):"a"===t[0]&&"r"===t[1]&&"boolean"==typeof r?String(r):r}var D=Array.isArray,G=Object.assign;function F(t,s,h,E,W){if(null==t||!0===t||!1===t||""===t)return"";if("object"!=typeof t)return"function"==typeof t?"":a(t);if(D(t)){var J="";W.__k=t;for(var R=0;R<t.length;R++)J+=F(t[R],s,h,E,W),t[R]=S(t[R]);return J}if(void 0!==t.constructor)return"";t.__=W,r.options.__b&&r.options.__b(t);var K=t.type,U=t.props;if("function"==typeof K){if(K===r.Fragment)et=U.children;else{et=K.prototype&&"function"==typeof K.prototype.render?(Y=s,Z=g(X=t.type,Y),Q=new X(t.props,Z),t.__c=Q,Q.__v=t,Q.__d=!0,Q.props=t.props,null==Q.state&&(Q.state={}),null==Q.__s&&(Q.__s=Q.state),Q.context=Z,X.getDerivedStateFromProps?Q.state=G({},Q.state,X.getDerivedStateFromProps(Q.props,Q.state)):Q.componentWillMount&&(Q.componentWillMount(),Q.state=Q.__s!==Q.state?Q.__s:Q.state),(ee=r.options.__r)&&ee(t),Q.render(Q.props,Q.state,Q.context)):function(t,s){var u,p=v(t,s),h=g(t.type,s);t.__c=p;for(var E=r.options.__r,W=0;p.__d&&W++<25;)p.__d=!1,E&&E(t),u=t.type.call(p,t.props,h);return u}(t,s);var Y,X,Z,Q,ee,et,er=t.__c;er.getChildContext&&(s=G({},s,er.getChildContext()))}var en=F(et=null!=et&&et.type===r.Fragment&&null==et.key?et.props.children:et,s,h,E,t);return r.options.diffed&&r.options.diffed(t),t.__=void 0,r.options.unmount&&r.options.unmount(t),en}var ei,eo,ea="<";if(ea+=K,U)for(var es in ei=U.children,U){var el=U[es];if(!("key"===es||"ref"===es||"__self"===es||"__source"===es||"children"===es||"className"===es&&"class"in U||"htmlFor"===es&&"for"in U||p.test(es))){if(el=C(es=w(es,h),el),"dangerouslySetInnerHTML"===es)eo=el&&el.__html;else if("textarea"===K&&"value"===es)ei=el;else if((el||0===el||""===el)&&"function"!=typeof el){if(!0===el||""===el){el=es,ea=ea+" "+es;continue}if("value"===es){if("select"===K){E=el;continue}"option"!==K||E!=el||"selected"in U||(ea+=" selected")}ea=ea+" "+es+'="'+a(el)+'"'}}}var ec=ea;if(ea+=">",p.test(K))throw Error(K+" is not a valid HTML tag name in "+ea);var eu="",ed=!1;if(eo)eu+=eo,ed=!0;else if("string"==typeof ei)eu+=a(ei),ed=!0;else if(D(ei)){t.__k=ei;for(var ep=0;ep<ei.length;ep++){var eh=ei[ep];if(ei[ep]=S(eh),null!=eh&&!1!==eh){var ef=F(eh,s,"svg"===K||"foreignObject"!==K&&h,E,t);ef&&(eu+=ef,ed=!0)}}}else if(null!=ei&&!1!==ei&&!0!==ei){t.__k=[S(ei)];var ey=F(ei,s,"svg"===K||"foreignObject"!==K&&h,E,t);ey&&(eu+=ey,ed=!0)}if(r.options.diffed&&r.options.diffed(t),t.__=void 0,r.options.unmount&&r.options.unmount(t),ed)ea+=eu;else if(u.test(K))return ec+" />";return ea+"</"+K+">"}k.shallowRender=b,t.default=k,t.render=k,t.renderToStaticMarkup=k,t.renderToString=k,t.shallowRender=b})(r,s(6600))},5139:(t,r,s)=>{"use strict";t.exports=s(4912).default},6600:(t,r)=>{var s,u,p,h,E,W,J,R,K,U,D,G,Y={},X=[],Z=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Q=Array.isArray;function d(t,r){for(var s in r)t[s]=r[s];return t}function g(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function _(t,r,u){var p,h,E,W={};for(E in r)"key"==E?p=r[E]:"ref"==E?h=r[E]:W[E]=r[E];if(arguments.length>2&&(W.children=arguments.length>3?s.call(arguments,2):u),"function"==typeof t&&null!=t.defaultProps)for(E in t.defaultProps)void 0===W[E]&&(W[E]=t.defaultProps[E]);return x(t,W,p,h,null)}function x(t,r,s,h,E){var W={type:t,props:r,key:s,ref:h,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==E?++p:E,__i:-1,__u:0};return null==E&&null!=u.vnode&&u.vnode(W),W}function m(t){return t.children}function b(t,r){this.props=t,this.context=r}function k(t,r){if(null==r)return t.__?k(t.__,t.__i+1):null;for(var s;r<t.__k.length;r++)if(null!=(s=t.__k[r])&&null!=s.__e)return s.__e;return"function"==typeof t.type?k(t):null}function S(t){var r,s;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,r=0;r<t.__k.length;r++)if(null!=(s=t.__k[r])&&null!=s.__e){t.__e=t.__c.base=s.__e;break}return S(t)}}function M(t){(!t.__d&&(t.__d=!0)&&h.push(t)&&!$.__r++||E!=u.debounceRendering)&&((E=u.debounceRendering)||W)($)}function $(){for(var t,r,s,p,E,W,R=1;h.length;)h.length>R&&h.sort(J),t=h.shift(),R=h.length,t.__d&&(r=void 0,p=(s=t.__v).__e,E=[],W=[],t.__P&&((r=d({},s)).__v=s.__v+1,u.vnode&&u.vnode(r),j(t.__P,r,s,t.__n,t.__P.namespaceURI,32&s.__u?[p]:null,E,null==p?k(s):p,!!(32&s.__u),W),r.__v=s.__v,r.__.__k[r.__i]=r,F(E,r,W),r.__e!=p&&S(r)));$.__r=0}function C(t,r,s,u,p,h,E,W,J,R,K){var U,D,G,Z,Q,ee,et=u&&u.__k||X,er=r.length;for(J=I(s,r,et,J,er),U=0;U<er;U++)null!=(G=s.__k[U])&&(D=-1==G.__i?Y:et[G.__i]||Y,G.__i=U,ee=j(t,G,D,p,h,E,W,J,R,K),Z=G.__e,G.ref&&D.ref!=G.ref&&(D.ref&&N(D.ref,null,G),K.push(G.ref,G.__c||Z,G)),null==Q&&null!=Z&&(Q=Z),4&G.__u||D.__k===G.__k?J=P(G,J,t):"function"==typeof G.type&&void 0!==ee?J=ee:Z&&(J=Z.nextSibling),G.__u&=-7);return s.__e=Q,J}function I(t,r,s,u,p){var h,E,W,J,R,K=s.length,U=K,D=0;for(t.__k=Array(p),h=0;h<p;h++)null!=(E=r[h])&&"boolean"!=typeof E&&"function"!=typeof E?(J=h+D,(E=t.__k[h]="string"==typeof E||"number"==typeof E||"bigint"==typeof E||E.constructor==String?x(null,E,null,null,null):Q(E)?x(m,{children:E},null,null,null):null==E.constructor&&E.__b>0?x(E.type,E.props,E.key,E.ref?E.ref:null,E.__v):E).__=t,E.__b=t.__b+1,W=null,-1!=(R=E.__i=A(E,s,J,U))&&(U--,(W=s[R])&&(W.__u|=2)),null==W||null==W.__v?(-1==R&&(p>K?D--:p<K&&D++),"function"!=typeof E.type&&(E.__u|=4)):R!=J&&(R==J-1?D--:R==J+1?D++:(R>J?D--:D++,E.__u|=4))):t.__k[h]=null;if(U)for(h=0;h<K;h++)null!=(W=s[h])&&0==(2&W.__u)&&(W.__e==u&&(u=k(W)),V(W,W));return u}function P(t,r,s){var u,p;if("function"==typeof t.type){for(u=t.__k,p=0;u&&p<u.length;p++)u[p]&&(u[p].__=t,r=P(u[p],r,s));return r}t.__e!=r&&(r&&t.type&&!s.contains(r)&&(r=k(t)),s.insertBefore(t.__e,r||null),r=t.__e);do r=r&&r.nextSibling;while(null!=r&&8==r.nodeType);return r}function A(t,r,s,u){var p,h,E=t.key,W=t.type,J=r[s];if(null===J&&null==t.key||J&&E==J.key&&W==J.type&&0==(2&J.__u))return s;if(u>(null!=J&&0==(2&J.__u)?1:0))for(p=s-1,h=s+1;p>=0||h<r.length;){if(p>=0){if((J=r[p])&&0==(2&J.__u)&&E==J.key&&W==J.type)return p;p--}if(h<r.length){if((J=r[h])&&0==(2&J.__u)&&E==J.key&&W==J.type)return h;h++}}return -1}function H(t,r,s){"-"==r[0]?t.setProperty(r,null==s?"":s):t[r]=null==s?"":"number"!=typeof s||Z.test(r)?s:s+"px"}function L(t,r,s,u,p){var h,E;e:if("style"==r){if("string"==typeof s)t.style.cssText=s;else{if("string"==typeof u&&(t.style.cssText=u=""),u)for(r in u)s&&r in s||H(t.style,r,"");if(s)for(r in s)u&&s[r]==u[r]||H(t.style,r,s[r])}}else if("o"==r[0]&&"n"==r[1])h=r!=(r=r.replace(R,"$1")),r=(E=r.toLowerCase())in t||"onFocusOut"==r||"onFocusIn"==r?E.slice(2):r.slice(2),t.l||(t.l={}),t.l[r+h]=s,s?u?s.t=u.t:(s.t=K,t.addEventListener(r,h?D:U,h)):t.removeEventListener(r,h?D:U,h);else{if("http://www.w3.org/2000/svg"==p)r=r.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=r&&"height"!=r&&"href"!=r&&"list"!=r&&"form"!=r&&"tabIndex"!=r&&"download"!=r&&"rowSpan"!=r&&"colSpan"!=r&&"role"!=r&&"popover"!=r&&r in t)try{t[r]=null==s?"":s;break e}catch(t){}"function"==typeof s||(null==s||!1===s&&"-"!=r[4]?t.removeAttribute(r):t.setAttribute(r,"popover"==r&&1==s?"":s))}}function T(t){return function(r){if(this.l){var s=this.l[r.type+t];if(null==r.u)r.u=K++;else if(r.u<s.t)return;return s(u.event?u.event(r):r)}}}function j(t,r,s,p,h,E,W,J,R,K){var U,D,G,Y,X,Z,ee,et,er,en,ei,eo,ea,es,el,ec,eu,ed=r.type;if(null!=r.constructor)return null;128&s.__u&&(R=!!(32&s.__u),E=[J=r.__e=s.__e]),(U=u.__b)&&U(r);e:if("function"==typeof ed)try{if(et=r.props,er="prototype"in ed&&ed.prototype.render,en=(U=ed.contextType)&&p[U.__c],ei=U?en?en.props.value:U.__:p,s.__c?ee=(D=r.__c=s.__c).__=D.__E:(er?r.__c=D=new ed(et,ei):(r.__c=D=new b(et,ei),D.constructor=ed,D.render=q),en&&en.sub(D),D.props=et,D.state||(D.state={}),D.context=ei,D.__n=p,G=D.__d=!0,D.__h=[],D._sb=[]),er&&null==D.__s&&(D.__s=D.state),er&&null!=ed.getDerivedStateFromProps&&(D.__s==D.state&&(D.__s=d({},D.__s)),d(D.__s,ed.getDerivedStateFromProps(et,D.__s))),Y=D.props,X=D.state,D.__v=r,G)er&&null==ed.getDerivedStateFromProps&&null!=D.componentWillMount&&D.componentWillMount(),er&&null!=D.componentDidMount&&D.__h.push(D.componentDidMount);else{if(er&&null==ed.getDerivedStateFromProps&&et!==Y&&null!=D.componentWillReceiveProps&&D.componentWillReceiveProps(et,ei),!D.__e&&null!=D.shouldComponentUpdate&&!1===D.shouldComponentUpdate(et,D.__s,ei)||r.__v==s.__v){for(r.__v!=s.__v&&(D.props=et,D.state=D.__s,D.__d=!1),r.__e=s.__e,r.__k=s.__k,r.__k.some(function(t){t&&(t.__=r)}),eo=0;eo<D._sb.length;eo++)D.__h.push(D._sb[eo]);D._sb=[],D.__h.length&&W.push(D);break e}null!=D.componentWillUpdate&&D.componentWillUpdate(et,D.__s,ei),er&&null!=D.componentDidUpdate&&D.__h.push(function(){D.componentDidUpdate(Y,X,Z)})}if(D.context=ei,D.props=et,D.__P=t,D.__e=!1,ea=u.__r,es=0,er){for(D.state=D.__s,D.__d=!1,ea&&ea(r),U=D.render(D.props,D.state,D.context),el=0;el<D._sb.length;el++)D.__h.push(D._sb[el]);D._sb=[]}else do D.__d=!1,ea&&ea(r),U=D.render(D.props,D.state,D.context),D.state=D.__s;while(D.__d&&++es<25);D.state=D.__s,null!=D.getChildContext&&(p=d(d({},p),D.getChildContext())),er&&!G&&null!=D.getSnapshotBeforeUpdate&&(Z=D.getSnapshotBeforeUpdate(Y,X)),ec=U,null!=U&&U.type===m&&null==U.key&&(ec=O(U.props.children)),J=C(t,Q(ec)?ec:[ec],r,s,p,h,E,W,J,R,K),D.base=r.__e,r.__u&=-161,D.__h.length&&W.push(D),ee&&(D.__E=D.__=null)}catch(t){if(r.__v=null,R||null!=E){if(t.then){for(r.__u|=R?160:128;J&&8==J.nodeType&&J.nextSibling;)J=J.nextSibling;E[E.indexOf(J)]=null,r.__e=J}else for(eu=E.length;eu--;)g(E[eu])}else r.__e=s.__e,r.__k=s.__k;u.__e(t,r,s)}else null==E&&r.__v==s.__v?(r.__k=s.__k,r.__e=s.__e):J=r.__e=z(s.__e,r,s,p,h,E,W,R,K);return(U=u.diffed)&&U(r),128&r.__u?void 0:J}function F(t,r,s){for(var p=0;p<s.length;p++)N(s[p],s[++p],s[++p]);u.__c&&u.__c(r,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(t){t.call(r)})}catch(t){u.__e(t,r.__v)}})}function O(t){return"object"!=typeof t||null==t||t.__b&&t.__b>0?t:Q(t)?t.map(O):d({},t)}function z(t,r,p,h,E,W,J,R,K){var U,D,G,X,Z,ee,et,er=p.props,en=r.props,ei=r.type;if("svg"==ei?E="http://www.w3.org/2000/svg":"math"==ei?E="http://www.w3.org/1998/Math/MathML":E||(E="http://www.w3.org/1999/xhtml"),null!=W){for(U=0;U<W.length;U++)if((Z=W[U])&&"setAttribute"in Z==!!ei&&(ei?Z.localName==ei:3==Z.nodeType)){t=Z,W[U]=null;break}}if(null==t){if(null==ei)return document.createTextNode(en);t=document.createElementNS(E,ei,en.is&&en),R&&(u.__m&&u.__m(r,W),R=!1),W=null}if(null==ei)er===en||R&&t.data==en||(t.data=en);else{if(W=W&&s.call(t.childNodes),er=p.props||Y,!R&&null!=W)for(er={},U=0;U<t.attributes.length;U++)er[(Z=t.attributes[U]).name]=Z.value;for(U in er)if(Z=er[U],"children"==U);else if("dangerouslySetInnerHTML"==U)G=Z;else if(!(U in en)){if("value"==U&&"defaultValue"in en||"checked"==U&&"defaultChecked"in en)continue;L(t,U,null,Z,E)}for(U in en)Z=en[U],"children"==U?X=Z:"dangerouslySetInnerHTML"==U?D=Z:"value"==U?ee=Z:"checked"==U?et=Z:R&&"function"!=typeof Z||er[U]===Z||L(t,U,Z,er[U],E);if(D)R||G&&(D.__html==G.__html||D.__html==t.innerHTML)||(t.innerHTML=D.__html),r.__k=[];else if(G&&(t.innerHTML=""),C("template"==r.type?t.content:t,Q(X)?X:[X],r,p,h,"foreignObject"==ei?"http://www.w3.org/1999/xhtml":E,W,J,W?W[0]:p.__k&&k(p,0),R,K),null!=W)for(U=W.length;U--;)g(W[U]);R||(U="value","progress"==ei&&null==ee?t.removeAttribute("value"):null==ee||ee===t[U]&&("progress"!=ei||ee)&&("option"!=ei||ee==er[U])||L(t,U,ee,er[U],E),U="checked",null!=et&&et!=t[U]&&L(t,U,et,er[U],E))}return t}function N(t,r,s){try{if("function"==typeof t){var p="function"==typeof t.__u;p&&t.__u(),p&&null==r||(t.__u=t(r))}else t.current=r}catch(t){u.__e(t,s)}}function V(t,r,s){var p,h;if(u.unmount&&u.unmount(t),(p=t.ref)&&(p.current&&p.current!=t.__e||N(p,null,r)),null!=(p=t.__c)){if(p.componentWillUnmount)try{p.componentWillUnmount()}catch(t){u.__e(t,r)}p.base=p.__P=null}if(p=t.__k)for(h=0;h<p.length;h++)p[h]&&V(p[h],r,s||"function"!=typeof t.type);s||g(t.__e),t.__c=t.__=t.__e=void 0}function q(t,r,s){return this.constructor(t,s)}function B(t,r,p){var h,E,W,J;r==document&&(r=document.documentElement),u.__&&u.__(t,r),E=(h="function"==typeof p)?null:p&&p.__k||r.__k,W=[],J=[],j(r,t=(!h&&p||r).__k=_(m,null,[t]),E||Y,Y,r.namespaceURI,!h&&p?[p]:E?null:r.firstChild?s.call(r.childNodes):null,W,!h&&p?p:E?E.__e:r.firstChild,h,J),F(W,t,J)}s=X.slice,u={__e:function(t,r,s,u){for(var p,h,E;r=r.__;)if((p=r.__c)&&!p.__)try{if((h=p.constructor)&&null!=h.getDerivedStateFromError&&(p.setState(h.getDerivedStateFromError(t)),E=p.__d),null!=p.componentDidCatch&&(p.componentDidCatch(t,u||{}),E=p.__d),E)return p.__E=p}catch(r){t=r}throw t}},p=0,b.prototype.setState=function(t,r){var s;s=null!=this.__s&&this.__s!=this.state?this.__s:this.__s=d({},this.state),"function"==typeof t&&(t=t(d({},s),this.props)),t&&d(s,t),null!=t&&this.__v&&(r&&this._sb.push(r),M(this))},b.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),M(this))},b.prototype.render=m,h=[],W="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,J=function(t,r){return t.__v.__b-r.__v.__b},$.__r=0,R=/(PointerCapture)$|Capture$/i,K=0,U=T(!1),D=T(!0),G=0,r.Component=b,r.Fragment=m,r.cloneElement=function(t,r,u){var p,h,E,W,J=d({},t.props);for(E in t.type&&t.type.defaultProps&&(W=t.type.defaultProps),r)"key"==E?p=r[E]:"ref"==E?h=r[E]:J[E]=void 0===r[E]&&null!=W?W[E]:r[E];return arguments.length>2&&(J.children=arguments.length>3?s.call(arguments,2):u),x(t.type,J,p||t.key,h||t.ref,null)},r.createContext=function(t){function l(t){var r,s;return this.getChildContext||(r=new Set,(s={})[l.__c]=this,this.getChildContext=function(){return s},this.componentWillUnmount=function(){r=null},this.shouldComponentUpdate=function(t){this.props.value!=t.value&&r.forEach(function(t){t.__e=!0,M(t)})},this.sub=function(t){r.add(t);var s=t.componentWillUnmount;t.componentWillUnmount=function(){r&&r.delete(t),s&&s.call(t)}}),t.children}return l.__c="__cC"+G++,l.__=t,l.Provider=l.__l=(l.Consumer=function(t,r){return t.children(r)}).contextType=l,l},r.createElement=_,r.createRef=function(){return{current:null}},r.h=_,r.hydrate=function n(t,r){B(t,r,n)},r.isValidElement=function(t){return null!=t&&null==t.constructor},r.options=u,r.render=B,r.toChildArray=function n(t,r){return r=r||[],null==t||"boolean"==typeof t||(Q(t)?t.some(function(t){n(t,r)}):r.push(t)),r}},9968:(t,r,s)=>{"use strict";let u,p;s.r(r),s.d(r,{NIL:()=>ea,parse:()=>Z,stringify:()=>D,v1:()=>X,v3:()=>et,v4:()=>er,v5:()=>eo,validate:()=>K,version:()=>es});var h=s(6113),E=s.n(h);let W=new Uint8Array(256),J=W.length;function rng(){return J>W.length-16&&(E().randomFillSync(W),J=0),W.slice(J,J+=16)}let R=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function validate(t){return"string"==typeof t&&R.test(t)}let K=validate,U=[];for(let t=0;t<256;++t)U.push((t+256).toString(16).substr(1));function stringify(t,r=0){let s=(U[t[r+0]]+U[t[r+1]]+U[t[r+2]]+U[t[r+3]]+"-"+U[t[r+4]]+U[t[r+5]]+"-"+U[t[r+6]]+U[t[r+7]]+"-"+U[t[r+8]]+U[t[r+9]]+"-"+U[t[r+10]]+U[t[r+11]]+U[t[r+12]]+U[t[r+13]]+U[t[r+14]]+U[t[r+15]]).toLowerCase();if(!K(s))throw TypeError("Stringified UUID is invalid");return s}let D=stringify,G=0,Y=0;function v1(t,r,s){let h=r&&s||0,E=r||Array(16),W=(t=t||{}).node||u,J=void 0!==t.clockseq?t.clockseq:p;if(null==W||null==J){let r=t.random||(t.rng||rng)();null==W&&(W=u=[1|r[0],r[1],r[2],r[3],r[4],r[5]]),null==J&&(J=p=(r[6]<<8|r[7])&16383)}let R=void 0!==t.msecs?t.msecs:Date.now(),K=void 0!==t.nsecs?t.nsecs:Y+1,U=R-G+(K-Y)/1e4;if(U<0&&void 0===t.clockseq&&(J=J+1&16383),(U<0||R>G)&&void 0===t.nsecs&&(K=0),K>=1e4)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");G=R,Y=K,p=J,R+=122192928e5;let X=((268435455&R)*1e4+K)%4294967296;E[h++]=X>>>24&255,E[h++]=X>>>16&255,E[h++]=X>>>8&255,E[h++]=255&X;let Z=R/4294967296*1e4&268435455;E[h++]=Z>>>8&255,E[h++]=255&Z,E[h++]=Z>>>24&15|16,E[h++]=Z>>>16&255,E[h++]=J>>>8|128,E[h++]=255&J;for(let t=0;t<6;++t)E[h+t]=W[t];return r||D(E)}let X=v1;function parse(t){let r;if(!K(t))throw TypeError("Invalid UUID");let s=new Uint8Array(16);return s[0]=(r=parseInt(t.slice(0,8),16))>>>24,s[1]=r>>>16&255,s[2]=r>>>8&255,s[3]=255&r,s[4]=(r=parseInt(t.slice(9,13),16))>>>8,s[5]=255&r,s[6]=(r=parseInt(t.slice(14,18),16))>>>8,s[7]=255&r,s[8]=(r=parseInt(t.slice(19,23),16))>>>8,s[9]=255&r,s[10]=(r=parseInt(t.slice(24,36),16))/1099511627776&255,s[11]=r/4294967296&255,s[12]=r>>>24&255,s[13]=r>>>16&255,s[14]=r>>>8&255,s[15]=255&r,s}let Z=parse;function stringToBytes(t){t=unescape(encodeURIComponent(t));let r=[];for(let s=0;s<t.length;++s)r.push(t.charCodeAt(s));return r}function v35(t,r,s){function generateUUID(t,u,p,h){if("string"==typeof t&&(t=stringToBytes(t)),"string"==typeof u&&(u=Z(u)),16!==u.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let E=new Uint8Array(16+t.length);if(E.set(u),E.set(t,u.length),(E=s(E))[6]=15&E[6]|r,E[8]=63&E[8]|128,p){h=h||0;for(let t=0;t<16;++t)p[h+t]=E[t];return p}return D(E)}try{generateUUID.name=t}catch(t){}return generateUUID.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",generateUUID.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",generateUUID}function md5(t){return Array.isArray(t)?t=Buffer.from(t):"string"==typeof t&&(t=Buffer.from(t,"utf8")),E().createHash("md5").update(t).digest()}let Q=md5,ee=v35("v3",48,Q),et=ee;function v4(t,r,s){t=t||{};let u=t.random||(t.rng||rng)();if(u[6]=15&u[6]|64,u[8]=63&u[8]|128,r){s=s||0;for(let t=0;t<16;++t)r[s+t]=u[t];return r}return D(u)}let er=v4;function sha1(t){return Array.isArray(t)?t=Buffer.from(t):"string"==typeof t&&(t=Buffer.from(t,"utf8")),E().createHash("sha1").update(t).digest()}let en=sha1,ei=v35("v5",80,en),eo=ei,ea="00000000-0000-0000-0000-000000000000";function version(t){if(!K(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}let es=version},9232:t=>{"use strict";t.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}},2315:(t,r,s)=>{"use strict";function Yallist(t){var r=this;if(r instanceof Yallist||(r=new Yallist),r.tail=null,r.head=null,r.length=0,t&&"function"==typeof t.forEach)t.forEach(function(t){r.push(t)});else if(arguments.length>0)for(var s=0,u=arguments.length;s<u;s++)r.push(arguments[s]);return r}function insert(t,r,s){var u=r===t.head?new Node(s,null,r,t):new Node(s,r,r.next,t);return null===u.next&&(t.tail=u),null===u.prev&&(t.head=u),t.length++,u}function push(t,r){t.tail=new Node(r,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function unshift(t,r){t.head=new Node(r,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function Node(t,r,s,u){if(!(this instanceof Node))return new Node(t,r,s,u);this.list=u,this.value=t,r?(r.next=this,this.prev=r):this.prev=null,s?(s.prev=this,this.next=s):this.next=null}t.exports=Yallist,Yallist.Node=Node,Yallist.create=Yallist,Yallist.prototype.removeNode=function(t){if(t.list!==this)throw Error("removing node which does not belong to this list");var r=t.next,s=t.prev;return r&&(r.prev=s),s&&(s.next=r),t===this.head&&(this.head=r),t===this.tail&&(this.tail=s),t.list.length--,t.next=null,t.prev=null,t.list=null,r},Yallist.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var r=this.head;t.list=this,t.next=r,r&&(r.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}},Yallist.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var r=this.tail;t.list=this,t.prev=r,r&&(r.next=t),this.tail=t,this.head||(this.head=t),this.length++}},Yallist.prototype.push=function(){for(var t=0,r=arguments.length;t<r;t++)push(this,arguments[t]);return this.length},Yallist.prototype.unshift=function(){for(var t=0,r=arguments.length;t<r;t++)unshift(this,arguments[t]);return this.length},Yallist.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}},Yallist.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}},Yallist.prototype.forEach=function(t,r){r=r||this;for(var s=this.head,u=0;null!==s;u++)t.call(r,s.value,u,this),s=s.next},Yallist.prototype.forEachReverse=function(t,r){r=r||this;for(var s=this.tail,u=this.length-1;null!==s;u--)t.call(r,s.value,u,this),s=s.prev},Yallist.prototype.get=function(t){for(var r=0,s=this.head;null!==s&&r<t;r++)s=s.next;if(r===t&&null!==s)return s.value},Yallist.prototype.getReverse=function(t){for(var r=0,s=this.tail;null!==s&&r<t;r++)s=s.prev;if(r===t&&null!==s)return s.value},Yallist.prototype.map=function(t,r){r=r||this;for(var s=new Yallist,u=this.head;null!==u;)s.push(t.call(r,u.value,this)),u=u.next;return s},Yallist.prototype.mapReverse=function(t,r){r=r||this;for(var s=new Yallist,u=this.tail;null!==u;)s.push(t.call(r,u.value,this)),u=u.prev;return s},Yallist.prototype.reduce=function(t,r){var s,u=this.head;if(arguments.length>1)s=r;else if(this.head)u=this.head.next,s=this.head.value;else throw TypeError("Reduce of empty list with no initial value");for(var p=0;null!==u;p++)s=t(s,u.value,p),u=u.next;return s},Yallist.prototype.reduceReverse=function(t,r){var s,u=this.tail;if(arguments.length>1)s=r;else if(this.tail)u=this.tail.prev,s=this.tail.value;else throw TypeError("Reduce of empty list with no initial value");for(var p=this.length-1;null!==u;p--)s=t(s,u.value,p),u=u.prev;return s},Yallist.prototype.toArray=function(){for(var t=Array(this.length),r=0,s=this.head;null!==s;r++)t[r]=s.value,s=s.next;return t},Yallist.prototype.toArrayReverse=function(){for(var t=Array(this.length),r=0,s=this.tail;null!==s;r++)t[r]=s.value,s=s.prev;return t},Yallist.prototype.slice=function(t,r){(r=r||this.length)<0&&(r+=this.length),(t=t||0)<0&&(t+=this.length);var s=new Yallist;if(r<t||r<0)return s;t<0&&(t=0),r>this.length&&(r=this.length);for(var u=0,p=this.head;null!==p&&u<t;u++)p=p.next;for(;null!==p&&u<r;u++,p=p.next)s.push(p.value);return s},Yallist.prototype.sliceReverse=function(t,r){(r=r||this.length)<0&&(r+=this.length),(t=t||0)<0&&(t+=this.length);var s=new Yallist;if(r<t||r<0)return s;t<0&&(t=0),r>this.length&&(r=this.length);for(var u=this.length,p=this.tail;null!==p&&u>r;u--)p=p.prev;for(;null!==p&&u>t;u--,p=p.prev)s.push(p.value);return s},Yallist.prototype.splice=function(t,r,...s){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var u=0,p=this.head;null!==p&&u<t;u++)p=p.next;for(var h=[],u=0;p&&u<r;u++)h.push(p.value),p=this.removeNode(p);null===p&&(p=this.tail),p!==this.head&&p!==this.tail&&(p=p.prev);for(var u=0;u<s.length;u++)p=insert(this,p,s[u]);return h},Yallist.prototype.reverse=function(){for(var t=this.head,r=this.tail,s=t;null!==s;s=s.prev){var u=s.prev;s.prev=s.next,s.next=u}return this.head=r,this.tail=t,this};try{s(9232)(Yallist)}catch(t){}},7203:t=>{"use strict";function _OverloadYield(t,r){this.v=t,this.k=r}t.exports=_OverloadYield,t.exports.__esModule=!0,t.exports.default=t.exports},7485:t=>{"use strict";function _assertThisInitialized(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}t.exports=_assertThisInitialized,t.exports.__esModule=!0,t.exports.default=t.exports},7524:t=>{"use strict";function asyncGeneratorStep(t,r,s,u,p,h,E){try{var W=t[h](E),J=W.value}catch(t){return void s(t)}W.done?r(J):Promise.resolve(J).then(u,p)}function _asyncToGenerator(t){return function(){var r=this,s=arguments;return new Promise(function(u,p){var h=t.apply(r,s);function _next(t){asyncGeneratorStep(h,u,p,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(h,u,p,_next,_throw,"throw",t)}_next(void 0)})}}t.exports=_asyncToGenerator,t.exports.__esModule=!0,t.exports.default=t.exports},7521:t=>{"use strict";function _classCallCheck(t,r){if(!(t instanceof r))throw TypeError("Cannot call a class as a function")}t.exports=_classCallCheck,t.exports.__esModule=!0,t.exports.default=t.exports},7242:(t,r,s)=>{"use strict";var u=s(5405),p=s(4277);function _construct(t,r,s){if(u())return Reflect.construct.apply(null,arguments);var h=[null];h.push.apply(h,r);var E=new(t.bind.apply(t,h));return s&&p(E,s.prototype),E}t.exports=_construct,t.exports.__esModule=!0,t.exports.default=t.exports},222:(t,r,s)=>{"use strict";var u=s(6133);function _defineProperties(t,r){for(var s=0;s<r.length;s++){var p=r[s];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(t,u(p.key),p)}}function _createClass(t,r,s){return r&&_defineProperties(t.prototype,r),s&&_defineProperties(t,s),Object.defineProperty(t,"prototype",{writable:!1}),t}t.exports=_createClass,t.exports.__esModule=!0,t.exports.default=t.exports},7709:(t,r,s)=>{"use strict";var u=s(6133);function _defineProperty(t,r,s){return(r=u(r))in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}t.exports=_defineProperty,t.exports.__esModule=!0,t.exports.default=t.exports},8907:t=>{"use strict";function _extends(){return t.exports=_extends=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var u in s)({}).hasOwnProperty.call(s,u)&&(t[u]=s[u])}return t},t.exports.__esModule=!0,t.exports.default=t.exports,_extends.apply(null,arguments)}t.exports=_extends,t.exports.__esModule=!0,t.exports.default=t.exports},2328:t=>{"use strict";function _getPrototypeOf(r){return t.exports=_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.__esModule=!0,t.exports.default=t.exports,_getPrototypeOf(r)}t.exports=_getPrototypeOf,t.exports.__esModule=!0,t.exports.default=t.exports},2247:(t,r,s)=>{"use strict";var u=s(4277);function _inherits(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&u(t,r)}t.exports=_inherits,t.exports.__esModule=!0,t.exports.default=t.exports},2236:t=>{"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}t.exports=_interopRequireDefault,t.exports.__esModule=!0,t.exports.default=t.exports},8809:t=>{"use strict";function _isNativeFunction(t){try{return -1!==Function.toString.call(t).indexOf("[native code]")}catch(r){return"function"==typeof t}}t.exports=_isNativeFunction,t.exports.__esModule=!0,t.exports.default=t.exports},5405:t=>{"use strict";function _isNativeReflectConstruct(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(t.exports=_isNativeReflectConstruct=function(){return!!r},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=_isNativeReflectConstruct,t.exports.__esModule=!0,t.exports.default=t.exports},5988:(t,r,s)=>{"use strict";var u=s(3114).default,p=s(7485);function _possibleConstructorReturn(t,r){if(r&&("object"==u(r)||"function"==typeof r))return r;if(void 0!==r)throw TypeError("Derived constructors may only return object or undefined");return p(t)}t.exports=_possibleConstructorReturn,t.exports.__esModule=!0,t.exports.default=t.exports},7542:(t,r,s)=>{"use strict";var u=s(2509);function _regenerator(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var r,s,p="function"==typeof Symbol?Symbol:{},h=p.iterator||"@@iterator",E=p.toStringTag||"@@toStringTag";function i(t,p,h,E){var J=Object.create((p&&p.prototype instanceof Generator?p:Generator).prototype);return u(J,"_invoke",function(t,u,p){var h,E,J,R=0,K=p||[],U=!1,D={p:0,n:0,v:r,a:d,f:d.bind(r,4),d:function(t,s){return h=t,E=0,J=r,D.n=s,W}};function d(t,u){for(E=t,J=u,s=0;!U&&R&&!p&&s<K.length;s++){var p,h=K[s],G=D.p,Y=h[2];t>3?(p=Y===u)&&(J=h[(E=h[4])?5:(E=3,3)],h[4]=h[5]=r):h[0]<=G&&((p=t<2&&G<h[1])?(E=0,D.v=u,D.n=h[1]):G<Y&&(p=t<3||h[0]>u||u>Y)&&(h[4]=t,h[5]=u,D.n=Y,E=0))}if(p||t>1)return W;throw U=!0,u}return function(p,K,G){if(R>1)throw TypeError("Generator is already running");for(U&&1===K&&d(K,G),E=K,J=G;(s=E<2?r:J)||!U;){h||(E?E<3?(E>1&&(D.n=-1),d(E,J)):D.n=J:D.v=J);try{if(R=2,h){if(E||(p="next"),s=h[p]){if(!(s=s.call(h,J)))throw TypeError("iterator result is not an object");if(!s.done)return s;J=s.value,E<2&&(E=0)}else 1===E&&(s=h.return)&&s.call(h),E<2&&(J=TypeError("The iterator does not provide a '"+p+"' method"),E=1);h=r}else if((s=(U=D.n<0)?J:t.call(u,D))!==W)break}catch(t){h=r,E=1,J=t}finally{R=1}}return{value:s,done:U}}}(t,h,E),!0),J}var W={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}s=Object.getPrototypeOf;var J=[][h]?s(s([][h]())):(u(s={},h,function(){return this}),s),R=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(J);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,u(t,E,"GeneratorFunction")),t.prototype=Object.create(R),t}return GeneratorFunction.prototype=GeneratorFunctionPrototype,u(R,"constructor",GeneratorFunctionPrototype),u(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName="GeneratorFunction",u(GeneratorFunctionPrototype,E,"GeneratorFunction"),u(R),u(R,E,"Generator"),u(R,h,function(){return this}),u(R,"toString",function(){return"[object Generator]"}),(t.exports=_regenerator=function(){return{w:i,m:f}},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=_regenerator,t.exports.__esModule=!0,t.exports.default=t.exports},5110:(t,r,s)=>{"use strict";var u=s(4236);function _regeneratorAsync(t,r,s,p,h){var E=u(t,r,s,p,h);return E.next().then(function(t){return t.done?t.value:E.next()})}t.exports=_regeneratorAsync,t.exports.__esModule=!0,t.exports.default=t.exports},4236:(t,r,s)=>{"use strict";var u=s(7542),p=s(3555);function _regeneratorAsyncGen(t,r,s,h,E){return new p(u().w(t,r,s,h),E||Promise)}t.exports=_regeneratorAsyncGen,t.exports.__esModule=!0,t.exports.default=t.exports},3555:(t,r,s)=>{"use strict";var u=s(7203),p=s(2509);function AsyncIterator(t,r){var s;function n(s,p,h,E){try{var W=t[s](p),J=W.value;return J instanceof u?r.resolve(J.v).then(function(t){n("next",t,h,E)},function(t){n("throw",t,h,E)}):r.resolve(J).then(function(t){W.value=t,h(W)},function(t){return n("throw",t,h,E)})}catch(t){E(t)}}this.next||(p(AsyncIterator.prototype),p(AsyncIterator.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),p(this,"_invoke",function(t,u,p){function f(){return new r(function(r,s){n(t,p,r,s)})}return s=s?s.then(f,f):f()},!0)}t.exports=AsyncIterator,t.exports.__esModule=!0,t.exports.default=t.exports},2509:t=>{"use strict";function _regeneratorDefine(r,s,u,p){var h=Object.defineProperty;try{h({},"",{})}catch(t){h=0}t.exports=_regeneratorDefine=function(t,r,s,u){if(r)h?h(t,r,{value:s,enumerable:!u,configurable:!u,writable:!u}):t[r]=s;else{var o=function(r,s){_regeneratorDefine(t,r,function(t){return this._invoke(r,s,t)})};o("next",0),o("throw",1),o("return",2)}},t.exports.__esModule=!0,t.exports.default=t.exports,_regeneratorDefine(r,s,u,p)}t.exports=_regeneratorDefine,t.exports.__esModule=!0,t.exports.default=t.exports},1436:t=>{"use strict";function _regeneratorKeys(t){var r=Object(t),s=[];for(var u in r)s.unshift(u);return function e(){for(;s.length;)if((u=s.pop())in r)return e.value=u,e.done=!1,e;return e.done=!0,e}}t.exports=_regeneratorKeys,t.exports.__esModule=!0,t.exports.default=t.exports},5019:(t,r,s)=>{"use strict";var u=s(7203),p=s(7542),h=s(5110),E=s(4236),W=s(3555),J=s(1436),R=s(4362);function _regeneratorRuntime(){var r=p(),s=r.m(_regeneratorRuntime),K=(Object.getPrototypeOf?Object.getPrototypeOf(s):s.__proto__).constructor;function n(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===K||"GeneratorFunction"===(r.displayName||r.name))}var U={throw:1,return:2,break:3,continue:3};function a(t){var r,s;return function(u){r||(r={stop:function(){return s(u.a,2)},catch:function(){return u.v},abrupt:function(t,r){return s(u.a,U[t],r)},delegateYield:function(t,p,h){return r.resultName=p,s(u.d,R(t),h)},finish:function(t){return s(u.f,t)}},s=function(t,s,p){u.p=r.prev,u.n=r.next;try{return t(s,p)}finally{r.next=u.n}}),r.resultName&&(r[r.resultName]=u.v,r.resultName=void 0),r.sent=u.v,r.next=u.n;try{return t.call(this,r)}finally{u.p=r.prev,u.n=r.next}}}return(t.exports=_regeneratorRuntime=function(){return{wrap:function(t,s,u,p){return r.w(a(t),s,u,p&&p.reverse())},isGeneratorFunction:n,mark:r.m,awrap:function(t,r){return new u(t,r)},AsyncIterator:W,async:function(t,r,s,u,p){return(n(r)?E:h)(a(t),r,s,u,p)},keys:J,values:R}},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=_regeneratorRuntime,t.exports.__esModule=!0,t.exports.default=t.exports},4362:(t,r,s)=>{"use strict";var u=s(3114).default;function _regeneratorValues(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],s=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}}}throw TypeError(u(t)+" is not iterable")}t.exports=_regeneratorValues,t.exports.__esModule=!0,t.exports.default=t.exports},4277:t=>{"use strict";function _setPrototypeOf(r,s){return t.exports=_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},t.exports.__esModule=!0,t.exports.default=t.exports,_setPrototypeOf(r,s)}t.exports=_setPrototypeOf,t.exports.__esModule=!0,t.exports.default=t.exports},5791:(t,r,s)=>{"use strict";var u=s(3114).default;function toPrimitive(t,r){if("object"!=u(t)||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var p=s.call(t,r||"default");if("object"!=u(p))return p;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}t.exports=toPrimitive,t.exports.__esModule=!0,t.exports.default=t.exports},6133:(t,r,s)=>{"use strict";var u=s(3114).default,p=s(5791);function toPropertyKey(t){var r=p(t,"string");return"symbol"==u(r)?r:r+""}t.exports=toPropertyKey,t.exports.__esModule=!0,t.exports.default=t.exports},3114:t=>{"use strict";function _typeof(r){return t.exports=_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,_typeof(r)}t.exports=_typeof,t.exports.__esModule=!0,t.exports.default=t.exports},1681:(t,r,s)=>{"use strict";var u=s(2328),p=s(4277),h=s(8809),E=s(7242);function _wrapNativeSuper(r){var s="function"==typeof Map?new Map:void 0;return t.exports=_wrapNativeSuper=function(t){if(null===t||!h(t))return t;if("function"!=typeof t)throw TypeError("Super expression must either be null or a function");if(void 0!==s){if(s.has(t))return s.get(t);s.set(t,Wrapper)}function Wrapper(){return E(t,arguments,u(this).constructor)}return Wrapper.prototype=Object.create(t.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),p(Wrapper,t)},t.exports.__esModule=!0,t.exports.default=t.exports,_wrapNativeSuper(r)}t.exports=_wrapNativeSuper,t.exports.__esModule=!0,t.exports.default=t.exports},4364:(t,r,s)=>{"use strict";var u=s(5019)();t.exports=u;try{regeneratorRuntime=u}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=u:Function("r","regeneratorRuntime = r")(u)}},7605:t=>{"use strict";t.exports=JSON.parse('{"name":"openid-client","version":"5.7.1","description":"OpenID Connect Relying Party (RP, Client) implementation for Node.js runtime, supports passportjs","keywords":["auth","authentication","basic","certified","client","connect","dynamic","electron","hybrid","identity","implicit","oauth","oauth2","oidc","openid","passport","relying party","strategy"],"homepage":"https://github.com/panva/openid-client","repository":"panva/openid-client","funding":{"url":"https://github.com/sponsors/panva"},"license":"MIT","author":"Filip Skokan <panva.ip@gmail.com>","exports":{"types":"./types/index.d.ts","import":"./lib/index.mjs","require":"./lib/index.js"},"main":"./lib/index.js","types":"./types/index.d.ts","files":["lib","types/index.d.ts"],"scripts":{"format":"npx prettier --loglevel silent --write ./lib ./test ./certification ./types","test":"mocha test/**/*.test.js"},"dependencies":{"jose":"^4.15.9","lru-cache":"^6.0.0","object-hash":"^2.2.0","oidc-token-hash":"^5.0.3"},"devDependencies":{"@types/node":"^16.18.106","@types/passport":"^1.0.16","base64url":"^3.0.1","chai":"^4.5.0","mocha":"^10.7.3","nock":"^13.5.5","prettier":"^2.8.8","readable-mock-req":"^0.2.2","sinon":"^9.2.4","timekeeper":"^2.3.1"},"standard-version":{"scripts":{"postchangelog":"sed -i \'\' -e \'s/### \\\\[/## [/g\' CHANGELOG.md"},"types":[{"type":"feat","section":"Features"},{"type":"fix","section":"Fixes"},{"type":"chore","hidden":true},{"type":"docs","hidden":true},{"type":"style","hidden":true},{"type":"refactor","section":"Refactor","hidden":false},{"type":"perf","section":"Performance","hidden":false},{"type":"test","hidden":true}]}}')}};