exports.id=869,exports.ids=[869],exports.modules={21223:()=>{},34837:()=>{},89032:(e,t,r)=>{"use strict";r.d(t,{a:()=>a});var s=r(10241);r(90197),r(97436);const i=(0,s.createContext)(void 0);function a(){const e=(0,s.useContext)(i);if(void 0===e)throw new Error("useAuth must be used within a SupabaseProvider");return e}},45847:(e,t,r)=>{"use strict";r.d(t,{b:()=>T});var s=r(10241),i=r(35612),a=r(90412),n=r(93765),o=r(94226),c=r(15319),l=r(19863),d=r(81466),u=r(29399),x=r(51757),p=r(20664),m=r(21821),b=r(98941),h=r(18384),y=r(23476);const v=(0,y.Z)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);var g=r(91062);const f=(0,y.Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var w=r(90197),j=r(89032),N=r(97436);function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function Z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!==typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const I=[{id:"service",stepTitle:"Service Requirement",stepIcon:n.Z,questionText:"What is the primary service you require?",type:"multiple-choice",options:[{id:"protection",text:"Personal Protection",subtext:"High-security for an individual or group.",icon:o.Z},{id:"executive",text:"Executive Transport",subtext:"Professional travel for business needs.",icon:c.Z},{id:"airport",text:"Airport Transfer",subtext:"Secure and reliable airport transportation.",icon:l.Z},{id:"event",text:"Event Security",subtext:"Transport for weddings or special occasions.",icon:d.Z}]},{id:"principalProfile",stepTitle:"Principal Profile (People)",stepIcon:u.Z,questionText:"What is the public profile of the person requiring protection?",type:"multiple-choice",options:[{id:"private",text:"Private Individual",subtext:"Low public visibility, personal travel.",icon:x.Z},{id:"corporate",text:"Corporate Executive",subtext:"C-suite, board member, business figure.",icon:c.Z},{id:"publicFigure",text:"Public Figure",subtext:"Celebrity, politician, artist, or media personality.",icon:p.Z},{id:"other",text:"Other / Prefer Not to Say",subtext:"For sensitive or unique situations.",icon:o.Z}]},{id:"locations",stepTitle:"Journey Details (Places)",stepIcon:m.Z,questionText:"Describe the primary locations for this journey.",type:"multiple-choice",options:[{id:"routine",text:"Routine & Familiar",subtext:"e.g., Home to office, known routes.",icon:m.Z},{id:"varied",text:"Varied Public Venues",subtext:"e.g., Hotels, restaurants, event spaces.",icon:b.Z},{id:"highRisk",text:"High-Risk / Unfamiliar",subtext:"e.g., Overseas, high-crime areas, sensitive meetings.",icon:o.Z},{id:"secure",text:"Secure / Private",subtext:"e.g., FBOs, private residences, secure compounds.",icon:h.Z}]},{id:"threatHistory",stepTitle:"Threat History (History)",stepIcon:v,questionText:"Has the principal ever received specific threats?",type:"multiple-choice",options:[{id:"none",text:"No Known Threats",subtext:"No history of direct or indirect threats.",icon:h.Z},{id:"unwanted",text:"Unwanted Attention",subtext:"e.g., Paparazzi, stalkers, online harassment.",icon:x.Z},{id:"indirect",text:"Indirect / Vague Threats",subtext:"Non-specific threats have been made.",icon:n.Z},{id:"direct",text:"Yes, Direct Threats",subtext:"A credible, specific threat has been identified.",icon:o.Z}]},{id:"perceivedRisk",stepTitle:"Perceived Risk Level",stepIcon:g.Z,questionText:"What is your perceived level of risk for this task?",type:"multiple-choice",options:[{id:"low",text:"Low",subtext:"An attack is unlikely. General awareness needed.",icon:g.Z},{id:"moderate",text:"Moderate",subtext:"An attack is possible. Precautionary measures required.",icon:g.Z},{id:"substantial",text:"Substantial",subtext:"An attack is a strong possibility. Heightened security required.",icon:g.Z},{id:"severe",text:"Severe / Critical",subtext:"An attack is highly likely or expected.",icon:g.Z}]}];function T(){const{0:e,1:t}=(0,s.useState)(0),{0:r,1:n}=(0,s.useState)({}),{0:c,1:l}=(0,s.useState)(!1),{0:d,1:u}=(0,s.useState)(!1),{0:x,1:p}=(0,s.useState)("idle"),{user:m}=(0,j.a)(),b=async e=>{if(m){u(!0),p("idle");try{const t=v(),r={user_id:m.id,answers:e,threat_level:t.level,risk_score:y(e),recommendations:t.advice,status:"completed"},{data:s,error:i}=await w.db.createAssessment(r);if(i)throw i;p("success")}catch(t){p("error")}finally{u(!1)}}else p("error")},y=e=>{const t={private:1,corporate:2,publicFigure:4,other:3},r={routine:1,varied:2,highRisk:4,secure:1},s={none:1,unwanted:2,indirect:3,direct:4},i={low:1,moderate:2,substantial:3,severe:4};let a=0;return a+={protection:4,executive:2,airport:1,event:2}[e.service]||0,a+=t[e.principalProfile]||0,a+=r[e.locations]||0,a+=s[e.threatHistory]||0,a+=2*(i[e.perceivedRisk]||0),a},v=()=>{const e={private:1,corporate:2,publicFigure:4,other:3},t={routine:1,varied:2,highRisk:4,secure:1},s={none:1,unwanted:2,indirect:3,direct:4},i={low:1,moderate:2,substantial:3,severe:4};let a=0;return a+={protection:4,executive:2,airport:1,event:2}[r.service]||0,a+=e[r.principalProfile]||0,a+=t[r.locations]||0,a+=s[r.threatHistory]||0,a+=2*(i[r.perceivedRisk]||0),a>=16?{level:"Severe / Critical",color:"text-red-500",advice:"Requires immediate, comprehensive security planning. A specialist will contact you urgently."}:a>=12?{level:"Substantial",color:"text-orange-500",advice:"Requires a dedicated security detail and threat mitigation plan."}:a>=7?{level:"Moderate",color:"text-yellow-500",advice:"A professional security driver and vehicle is strongly recommended."}:{level:"Low",color:"text-green-500",advice:"A professional security driver provides peace of mind and enhanced safety."}},g=I[e],k=e/(I.length-1)*100;if(c){const e=v();return(0,N.jsxs)("div",{className:"bg-gradient-to-br from-gray-900 via-blue-900 to-black p-8 sm:p-10 lg:p-12 rounded-2xl border border-yellow-500/30 w-full max-w-3xl mx-auto shadow-2xl text-center",children:[N.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Assessment Complete"}),N.jsx("p",{className:"text-gray-300 mb-6",children:"Thank you for providing this information. Here is our preliminary assessment:"}),d&&N.jsx("div",{className:"bg-blue-900/50 p-4 rounded-xl border border-blue-500 mb-6",children:(0,N.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[N.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-yellow-500"}),N.jsx("span",{className:"text-blue-300",children:"Saving your assessment..."})]})}),"success"===x&&N.jsx("div",{className:"bg-green-900/50 p-4 rounded-xl border border-green-500 mb-6",children:(0,N.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[N.jsx(h.Z,{className:"w-5 h-5 text-green-400"}),N.jsx("span",{className:"text-green-300",children:"Assessment saved successfully!"})]})}),"error"===x&&N.jsx("div",{className:"bg-red-900/50 p-4 rounded-xl border border-red-500 mb-6",children:N.jsx("div",{className:"flex items-center justify-center space-x-2",children:N.jsx("span",{className:"text-red-300",children:"Failed to save assessment. Please try again."})})}),(0,N.jsxs)("div",{className:"bg-black/50 p-6 rounded-xl border border-gray-700 mb-8",children:[N.jsx("p",{className:"text-lg text-gray-400 mb-2",children:"Initial Threat Assessment"}),N.jsx("p",{className:`text-4xl font-extrabold ${e.color}`,children:e.level})]}),(0,N.jsxs)("div",{className:"bg-black/50 p-6 rounded-xl border border-gray-700 mb-8",children:[N.jsx("p",{className:"text-lg text-gray-400 mb-2",children:"Recommended Action"}),N.jsx("p",{className:"text-white text-lg",children:e.advice})]}),N.jsx("p",{className:"text-gray-400 mb-6 text-sm",children:"A member of our senior security team will contact you within 24 hours to conduct a confidential consultation and provide a detailed operational plan and quote."}),N.jsx("button",{onClick:()=>{l(!1),t(0),n({}),p("idle")},className:"w-full bg-yellow-500 text-black font-bold py-3 px-6 rounded-lg hover:bg-yellow-400 transition-colors",children:"Start New Assessment"})]})}return N.jsx("div",{className:"bg-gradient-to-br from-gray-900 via-blue-900 to-black p-6 sm:p-8 lg:p-10 rounded-2xl border border-yellow-500/30 w-full max-w-5xl mx-auto shadow-2xl relative overflow-hidden",children:(0,N.jsxs)("div",{className:"relative z-10",children:[(0,N.jsxs)("div",{className:"text-center mb-8",children:[(0,N.jsxs)("div",{className:"inline-flex items-center justify-center space-x-3 bg-black/50 px-4 py-2 rounded-full mb-4",children:[N.jsx(o.Z,{className:"w-6 h-6 text-yellow-500"}),N.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-white",children:"SIA-Compliant Security Assessment"})]}),N.jsx("p",{className:"text-gray-400 text-sm sm:text-base",children:'This confidential assessment helps us understand your needs, aligning with "Know Your Client" best practices.'})]}),(0,N.jsxs)("div",{className:"mb-8",children:[(0,N.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,N.jsxs)("div",{className:"flex items-center gap-2",children:[N.jsx(g.stepIcon,{className:"w-5 h-5 text-yellow-500"}),N.jsx("span",{className:"text-white font-semibold",children:g.stepTitle})]}),(0,N.jsxs)("span",{className:"text-xs text-gray-400",children:["Step ",e+1," of ",I.length]})]}),N.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:N.jsx(i.E.div,{className:"bg-yellow-500 h-2 rounded-full",initial:{width:0},animate:{width:`${k}%`},transition:{duration:.5,ease:"easeInOut"}})})]}),N.jsx("div",{className:"min-h-[280px]",children:N.jsx(a.M,{mode:"wait",children:(0,N.jsxs)(i.E.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3},children:[N.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-center text-white mb-6",children:g.questionText}),N.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:g.options.map((s=>(0,N.jsxs)("button",{onClick:()=>((s,i)=>{const a=Z(Z({},r),{},{[s]:i});n(a),setTimeout((()=>{e<I.length-1?t(e+1):(l(!0),b(a))}),300)})(g.id,s.id),className:"group p-4 border-2 rounded-xl transition-all duration-200 text-left flex items-center gap-4 border-gray-700 bg-gray-800/50 hover:border-yellow-500 hover:bg-gray-800",children:[N.jsx("div",{className:"w-10 h-10 bg-gray-700 rounded-lg flex items-center justify-center group-hover:bg-yellow-500 transition-colors",children:N.jsx(s.icon,{className:"w-5 h-5 text-yellow-500 group-hover:text-black transition-colors"})}),(0,N.jsxs)("div",{children:[N.jsx("h3",{className:"font-semibold text-white",children:s.text}),s.subtext&&N.jsx("p",{className:"text-sm text-gray-400",children:s.subtext})]})]},s.id)))})]},e)})}),N.jsx("div",{className:"flex justify-between items-center mt-8",children:(0,N.jsxs)("button",{onClick:()=>{e>0&&t(e-1)},disabled:0===e,className:"flex items-center gap-2 px-4 py-2 bg-gray-700 text-white rounded-lg disabled:opacity-50 transition-colors hover:bg-gray-600",children:[N.jsx(f,{className:"w-4 h-4"}),N.jsx("span",{children:"Back"})]})})]})})}},90197:(e,t,r)=>{"use strict";r.d(t,{db:()=>i});const s=(0,r(71777).eI)("https://atjiphyvxzsdpmsguvoo.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF0aWpwaHl2enhzZHBtc2d1dm9vIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA5OTUzNDAsImV4cCI6MjA2NjU3MTM0MH0.8YlnqfENgrnFMzwg8tC9Od48TeevXdJPGop6qIp3Hbw"),i={getProfile:async e=>{const{data:t,error:r}=await s.from("profiles").select("*").eq("id",e).single();return{data:t,error:r}},updateProfile:async(e,t)=>{const{data:r,error:i}=await s.from("profiles").update(t).eq("id",e);return{data:r,error:i}},createBooking:async e=>{const{data:t,error:r}=await s.from("bookings").insert(e).select();return{data:t,error:r}},getUserBookings:async e=>{const{data:t,error:r}=await s.from("bookings").select("*").eq("user_id",e).order("created_at",{ascending:!1});return{data:t,error:r}},createAssessment:async e=>{const{data:t,error:r}=await s.from("assessments").insert(e).select();return{data:t,error:r}},getUserAssessments:async e=>{const{data:t,error:r}=await s.from("assessments").select("*").eq("user_id",e).order("created_at",{ascending:!1});return{data:t,error:r}}}},91062:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});const s=(0,r(23476).Z)("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]])},29399:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});const s=(0,r(23476).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])}};