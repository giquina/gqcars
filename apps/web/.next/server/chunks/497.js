exports.id=497,exports.ids=[497],exports.modules={727:(e,t,s)=>{Promise.resolve().then(s.bind(s,96715))},71917:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,35146,23)),Promise.resolve().then(s.t.bind(s,21725,23)),Promise.resolve().then(s.t.bind(s,67541,23)),Promise.resolve().then(s.t.bind(s,37732,23)),Promise.resolve().then(s.t.bind(s,37465,23)),Promise.resolve().then(s.t.bind(s,98336,23))},96715:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Providers:()=>Providers});var r=s(84196),o=s(20785),a=s(78726);let i=(0,a.createContext)(void 0);function ChatProvider({children:e}){let{data:t}=(0,o.useSession)(),[s,n]=(0,a.useState)(null),[c,d]=(0,a.useState)(!1);(0,a.useEffect)(()=>{t?.user&&n({id:`chat-${Date.now()}`,messages:[],context:{conversationId:`chat-${Date.now()}`,messages:[],userProfile:{id:t.user.id,name:t.user.name||"Guest",preferences:{savedLocations:{},communicationPreferences:{language:"en",notifications:!0,contactMethod:"chat"}},bookingHistory:[]},systemState:{availableDrivers:[],currentDemand:"low",pricing:{baseRates:{},securityPremium:{},demandMultiplier:1}}}})},[t]);let sendMessage=async e=>{if(s){d(!0);try{let t={id:Date.now().toString(),role:"user",content:e,timestamp:new Date};n(e=>({...e,messages:[...e.messages,t]}));let r=await fetch("/api/ai/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e,conversationId:s.id})});if(!r.ok)throw Error("Failed to get AI response");let o=await r.json();if(n(e=>({...e,messages:[...e.messages,o.message],context:{...e.context,...o.context}})),o.actions?.length>0){for(let e of o.actions)if("quote"===e.type&&e.payload.locations){let t=await getSecurityAssessment(e.payload.locations.pickup,e.payload.locations.dropoff);t&&n(e=>({...e,securityAssessment:t}))}}}catch(t){console.error("Error sending message:",t);let e={id:Date.now().toString(),role:"assistant",content:"Sorry, I encountered an error. Please try again later.",timestamp:new Date};n(t=>({...t,messages:[...t.messages,e]}))}finally{d(!1)}}},getSecurityAssessment=async(e,t)=>{try{let s=await fetch("/api/ai/security",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pickup:e,dropoff:t,datetime:new Date().toISOString()})});if(!s.ok)throw Error("Failed to get security assessment");let{assessment:r}=await s.json();return r}catch(e){return console.error("Error getting security assessment:",e),null}};return r.jsx(i.Provider,{value:{conversation:s,isLoading:c,sendMessage,getSecurityAssessment,clearConversation:()=>{t?.user&&n({id:`chat-${Date.now()}`,messages:[],context:{conversationId:`chat-${Date.now()}`,messages:[],userProfile:{id:t.user.id,name:t.user.name||"Guest",preferences:{savedLocations:{},communicationPreferences:{language:"en",notifications:!0,contactMethod:"chat"}},bookingHistory:[]},systemState:{availableDrivers:[],currentDemand:"low",pricing:{baseRates:{},securityPremium:{},demandMultiplier:1}}}})}},children:e})}function Providers({children:e}){return r.jsx(o.SessionProvider,{children:r.jsx(ChatProvider,{children:e})})}},26235:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>RootLayout,metadata:()=>m});var r=s(25620),o=s(38157),a=s.n(o);s(85955);var i=s(64074);let n=(0,i.createProxy)(String.raw`/workspace/apps/web/src/app/providers.tsx`),{__esModule:c,$$typeof:d}=n;n.default;let l=(0,i.createProxy)(String.raw`/workspace/apps/web/src/app/providers.tsx#Providers`),m={title:"GQ Cars LTD - SIA Licensed Security Taxi Service | Professional Drivers | London & Watford",description:"Premium security taxi service with SIA Licensed Close Protection Officers. Smart booking technology, professional drivers covering London, Watford, and all major airports. Book now: 07407 655 203"};function RootLayout({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:`${a().className} bg-black text-white`,children:r.jsx(l,{children:e})})})}},85955:()=>{}};