"use strict";(()=>{var e={id:205,ids:[205]};e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},57693:(e,n,t)=>{t.r(n),t.d(n,{originalPathname:()=>h,patchFetch:()=>f,requestAsyncStorage:()=>m,routeModule:()=>u,serverHooks:()=>g,staticGenerationAsyncStorage:()=>d});var o={};t.r(o),t.d(o,{POST:()=>p});var i=t(63538),s=t(30680),r=t(77144),a=t(86092);function c(e,n,t){return(n=function(e){var n=function(e,n){if("object"!==typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,n||"default");if("object"!==typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===typeof n?n:String(n)}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}const l=new class{constructor(){c(this,"apiKey",void 0),c(this,"fromEmail",void 0),c(this,"companyEmail",void 0),this.apiKey=process.env.SENDGRID_API_KEY||"",this.fromEmail=process.env.FROM_EMAIL||"noreply@gqcars.co.uk",this.companyEmail=process.env.COMPANY_EMAIL||"bookings@gqcars.co.uk"}getBookingConfirmationTemplate(e){return{subject:`Booking Confirmation - GQ Cars ${e.service}`,html:`\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <meta charset="utf-8">\n        <meta name="viewport" content="width=device-width, initial-scale=1.0">\n        <title>Booking Confirmation</title>\n        <style>\n          body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }\n          .container { max-width: 600px; margin: 0 auto; padding: 20px; }\n          .header { background: #1f2937; color: white; padding: 20px; text-align: center; }\n          .content { background: #f9f9f9; padding: 20px; }\n          .booking-details { background: white; padding: 15px; margin: 15px 0; border-radius: 5px; }\n          .footer { background: #1f2937; color: white; padding: 15px; text-align: center; font-size: 12px; }\n          .logo { color: #eab308; font-size: 24px; font-weight: bold; }\n          .price { color: #16a34a; font-weight: bold; font-size: 18px; }\n        </style>\n      </head>\n      <body>\n        <div class="container">\n          <div class="header">\n            <div class="logo">GQ CARS LTD</div>\n            <p>AI-Powered Security Transport</p>\n          </div>\n          \n          <div class="content">\n            <h2>Booking Confirmation</h2>\n            <p>Dear ${e.customerName},</p>\n            <p>Thank you for choosing GQ Cars. Your booking has been confirmed.</p>\n            \n            <div class="booking-details">\n              <h3>Booking Details</h3>\n              <p><strong>Booking ID:</strong> ${e.bookingId}</p>\n              <p><strong>Service:</strong> ${e.service}</p>\n              <p><strong>Date:</strong> ${e.date}</p>\n              <p><strong>Time:</strong> ${e.time}</p>\n              <p><strong>Pickup Location:</strong> ${e.pickupLocation}</p>\n              ${e.dropoffLocation?`<p><strong>Drop-off Location:</strong> ${e.dropoffLocation}</p>`:""}\n              <p><strong>Passengers:</strong> ${e.passengers}</p>\n              ${e.specialRequests?`<p><strong>Special Requests:</strong> ${e.specialRequests}</p>`:""}\n              ${e.estimatedPrice?`<p class="price">Estimated Price: \xa3${e.estimatedPrice}</p>`:""}\n            </div>\n            \n            <h3>What to Expect</h3>\n            <ul>\n              <li>Your SIA licensed driver will arrive 5 minutes early</li>\n              <li>You'll receive an SMS with driver details 30 minutes before pickup</li>\n              <li>All vehicles are equipped with AI-powered safety systems</li>\n              <li>24/7 support available at 07407 655 203</li>\n            </ul>\n            \n            <h3>Need Changes?</h3>\n            <p>If you need to modify or cancel your booking, please contact us at least 2 hours in advance:</p>\n            <ul>\n              <li>Phone: 07407 655 203</li>\n              <li>Email: bookings@gqcars.co.uk</li>\n              <li>WhatsApp: Available on our website</li>\n            </ul>\n          </div>\n          \n          <div class="footer">\n            <p>GQ Cars LTD - Professional Security Transport</p>\n            <p>SIA Licensed \u2022 Fully Insured \u2022 24/7 Service</p>\n            <p>Email: bookings@gqcars.co.uk | Phone: 07407 655 203</p>\n          </div>\n        </div>\n      </body>\n      </html>\n    `,text:`\n      GQ CARS LTD - Booking Confirmation\n      \n      Dear ${e.customerName},\n      \n      Thank you for choosing GQ Cars. Your booking has been confirmed.\n      \n      Booking Details:\n      - Booking ID: ${e.bookingId}\n      - Service: ${e.service}\n      - Date: ${e.date}\n      - Time: ${e.time}\n      - Pickup: ${e.pickupLocation}\n      ${e.dropoffLocation?`- Drop-off: ${e.dropoffLocation}`:""}\n      - Passengers: ${e.passengers}\n      ${e.specialRequests?`- Special Requests: ${e.specialRequests}`:""}\n      ${e.estimatedPrice?`- Estimated Price: \xa3${e.estimatedPrice}`:""}\n      \n      Your SIA licensed driver will arrive 5 minutes early. You'll receive driver details 30 minutes before pickup.\n      \n      Need changes? Contact us at least 2 hours in advance:\n      Phone: 07407 655 203\n      Email: bookings@gqcars.co.uk\n      \n      GQ Cars LTD - Professional Security Transport\n    `}}async sendBookingConfirmation(e){try{const n=this.getBookingConfirmationTemplate(e);return await this.sendEmail({to:e.customerEmail,subject:n.subject,html:n.html,text:n.text}),await this.sendEmail({to:this.companyEmail,subject:`New Booking: ${e.service} - ${e.date}`,html:n.html,text:n.text}),!0}catch(n){return!1}}async sendEmail(e){0}async sendQuoteRequest(e){try{const n=`New Quote Request - ${e.service}`,t=`\n        <h2>New Quote Request</h2>\n        <p><strong>Customer:</strong> ${e.customerName}</p>\n        <p><strong>Email:</strong> ${e.customerEmail}</p>\n        <p><strong>Phone:</strong> ${e.customerPhone}</p>\n        <p><strong>Service:</strong> ${e.service}</p>\n        <p><strong>Details:</strong> ${e.details}</p>\n      `;return await this.sendEmail({to:this.companyEmail,subject:n,html:t,text:`New Quote Request - ${e.service}\n\nCustomer: ${e.customerName}\nEmail: ${e.customerEmail}\nPhone: ${e.customerPhone}\nService: ${e.service}\nDetails: ${e.details}`}),!0}catch(n){return!1}}};async function p(e){try{const n=await e.json(),t=["customerName","customerEmail","service","date","time","pickupLocation","bookingId"];for(const e of t)if(!n[e])return a.NextResponse.json({success:!1,message:`Missing required field: ${e}`},{status:400});return await l.sendBookingConfirmation(n)?a.NextResponse.json({success:!0,message:"Booking confirmation email sent successfully"}):a.NextResponse.json({success:!1,message:"Failed to send email"},{status:500})}catch(n){return a.NextResponse.json({success:!1,message:"Internal server error"},{status:500})}}const u=new i.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/emails/booking-confirmation/route",pathname:"/api/emails/booking-confirmation",filename:"route",bundlePath:"app/api/emails/booking-confirmation/route"},resolvedPagePath:"/mnt/c/Users/Student/Documents/Development_Projects/gqcars-main-production/apps/web/src/app/api/emails/booking-confirmation/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:m,staticGenerationAsyncStorage:d,serverHooks:g}=u,h="/api/emails/booking-confirmation/route";function f(){return(0,r.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:d})}}};var n=require("../../../../webpack-runtime.js");n.C(e);var t=n.X(0,[351,887],(()=>{return e=57693,n(n.s=e);var e}));module.exports=t})();